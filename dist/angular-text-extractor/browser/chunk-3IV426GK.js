import{a as Rt,b as Ot,c as Wt,e as Ct,g as dt}from"./chunk-DM275RSA.js";var Nt=Ct(()=>{"use strict"});var Xt=Ct(()=>{"use strict"});var Vt=Ct(()=>{"use strict"});var Gt=Ct(()=>{"use strict"});var zt=Ct(()=>{"use strict"});var qt=Ct(()=>{"use strict"});var Kt=Ct((exports,module)=>{(function(r,k){typeof exports=="object"&&typeof module=="object"?module.exports=r.pdfjsLib=k():typeof define=="function"&&define.amd?define("pdfjs-dist/build/pdf",[],()=>r.pdfjsLib=k()):typeof exports=="object"?exports["pdfjs-dist/build/pdf"]=r.pdfjsLib=k():r["pdfjs-dist/build/pdf"]=r.pdfjsLib=k()})(globalThis,()=>(()=>{"use strict";var __webpack_modules__=[,(H,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.VerbosityLevel=r.Util=r.UnknownErrorException=r.UnexpectedResponseException=r.TextRenderingMode=r.RenderingIntentFlag=r.PromiseCapability=r.PermissionFlag=r.PasswordResponses=r.PasswordException=r.PageActionEventType=r.OPS=r.MissingPDFException=r.MAX_IMAGE_SIZE_TO_CACHE=r.LINE_FACTOR=r.LINE_DESCENT_FACTOR=r.InvalidPDFException=r.ImageKind=r.IDENTITY_MATRIX=r.FormatError=r.FeatureTest=r.FONT_IDENTITY_MATRIX=r.DocumentActionEventType=r.CMapCompressionType=r.BaseException=r.BASELINE_FACTOR=r.AnnotationType=r.AnnotationReplyType=r.AnnotationPrefix=r.AnnotationMode=r.AnnotationFlag=r.AnnotationFieldFlag=r.AnnotationEditorType=r.AnnotationEditorPrefix=r.AnnotationEditorParamsType=r.AnnotationBorderStyleType=r.AnnotationActionEventType=r.AbortException=void 0,r.assert=c,r.bytesToString=L,r.createValidAbsoluteUrl=_,r.getModificationDate=bt,r.getUuid=$t,r.getVerbosityLevel=nt,r.info=J,r.isArrayBuffer=ft,r.isArrayEqual=yt,r.isNodeJS=void 0,r.normalizeUnicode=Bt,r.objectFromMap=q,r.objectSize=st,r.setVerbosityLevel=Q,r.shadow=P,r.string32=V,r.stringToBytes=j,r.stringToPDFString=lt,r.stringToUTF8String=ct,r.unreachable=b,r.utf8StringToString=ht,r.warn=F;let k=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");r.isNodeJS=k;let o=[1,0,0,1,0,0];r.IDENTITY_MATRIX=o;let y=[.001,0,0,.001,0,0];r.FONT_IDENTITY_MATRIX=y;let O=1e7;r.MAX_IMAGE_SIZE_TO_CACHE=O;let M=1.35;r.LINE_FACTOR=M;let B=.35;r.LINE_DESCENT_FACTOR=B;let N=B/M;r.BASELINE_FACTOR=N;let h={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};r.RenderingIntentFlag=h;let s={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};r.AnnotationMode=s;let t="pdfjs_internal_editor_";r.AnnotationEditorPrefix=t;let i={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};r.AnnotationEditorType=i;let l={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};r.AnnotationEditorParamsType=l;let a={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};r.PermissionFlag=a;let e={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};r.TextRenderingMode=e;let u={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};r.ImageKind=u;let f={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};r.AnnotationType=f;let m={GROUP:"Group",REPLY:"R"};r.AnnotationReplyType=m;let C={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};r.AnnotationFlag=C;let S={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};r.AnnotationFieldFlag=S;let p={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};r.AnnotationBorderStyleType=p;let A={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};r.AnnotationActionEventType=A;let I={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};r.DocumentActionEventType=I;let U={O:"PageOpen",C:"PageClose"};r.PageActionEventType=U;let R={ERRORS:0,WARNINGS:1,INFOS:5};r.VerbosityLevel=R;let G={NONE:0,BINARY:1};r.CMapCompressionType=G;let X={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};r.OPS=X;let it={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};r.PasswordResponses=it;let Z=R.WARNINGS;function Q(et){Number.isInteger(et)&&(Z=et)}function nt(){return Z}function J(et){Z>=R.INFOS&&console.log(`Info: ${et}`)}function F(et){Z>=R.WARNINGS&&console.log(`Warning: ${et}`)}function b(et){throw new Error(et)}function c(et,z){et||b(z)}function d(et){switch(et?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function _(et,z=null,W=null){if(!et)return null;try{if(W&&typeof et=="string"&&(W.addDefaultProtocol&&et.startsWith("www.")&&et.match(/\./g)?.length>=2&&(et=`http://${et}`),W.tryConvertEncoding))try{et=ct(et)}catch{}let at=z?new URL(et,z):new URL(et);if(d(at))return at}catch{}return null}function P(et,z,W,at=!1){return Object.defineProperty(et,z,{value:W,enumerable:!at,configurable:!0,writable:!1}),W}let x=function(){function z(W,at){this.constructor===z&&b("Cannot initialize BaseException."),this.message=W,this.name=at}return z.prototype=new Error,z.constructor=z,z}();r.BaseException=x;class D extends x{constructor(z,W){super(z,"PasswordException"),this.code=W}}r.PasswordException=D;class E extends x{constructor(z,W){super(z,"UnknownErrorException"),this.details=W}}r.UnknownErrorException=E;class n extends x{constructor(z){super(z,"InvalidPDFException")}}r.InvalidPDFException=n;class g extends x{constructor(z){super(z,"MissingPDFException")}}r.MissingPDFException=g;class v extends x{constructor(z,W){super(z,"UnexpectedResponseException"),this.status=W}}r.UnexpectedResponseException=v;class w extends x{constructor(z){super(z,"FormatError")}}r.FormatError=w;class T extends x{constructor(z){super(z,"AbortException")}}r.AbortException=T;function L(et){(typeof et!="object"||et?.length===void 0)&&b("Invalid argument for bytesToString");let z=et.length,W=8192;if(z<W)return String.fromCharCode.apply(null,et);let at=[];for(let ut=0;ut<z;ut+=W){let gt=Math.min(ut+W,z),mt=et.subarray(ut,gt);at.push(String.fromCharCode.apply(null,mt))}return at.join("")}function j(et){typeof et!="string"&&b("Invalid argument for stringToBytes");let z=et.length,W=new Uint8Array(z);for(let at=0;at<z;++at)W[at]=et.charCodeAt(at)&255;return W}function V(et){return String.fromCharCode(et>>24&255,et>>16&255,et>>8&255,et&255)}function st(et){return Object.keys(et).length}function q(et){let z=Object.create(null);for(let[W,at]of et)z[W]=at;return z}function $(){let et=new Uint8Array(4);return et[0]=1,new Uint32Array(et.buffer,0,1)[0]===1}function Y(){try{return new Function(""),!0}catch{return!1}}class K{static get isLittleEndian(){return P(this,"isLittleEndian",$())}static get isEvalSupported(){return P(this,"isEvalSupported",Y())}static get isOffscreenCanvasSupported(){return P(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?P(this,"platform",{isWin:!1,isMac:!1}):P(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){return P(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}r.FeatureTest=K;let tt=[...Array(256).keys()].map(et=>et.toString(16).padStart(2,"0"));class rt{static makeHexColor(z,W,at){return`#${tt[z]}${tt[W]}${tt[at]}`}static scaleMinMax(z,W){let at;z[0]?(z[0]<0&&(at=W[0],W[0]=W[1],W[1]=at),W[0]*=z[0],W[1]*=z[0],z[3]<0&&(at=W[2],W[2]=W[3],W[3]=at),W[2]*=z[3],W[3]*=z[3]):(at=W[0],W[0]=W[2],W[2]=at,at=W[1],W[1]=W[3],W[3]=at,z[1]<0&&(at=W[2],W[2]=W[3],W[3]=at),W[2]*=z[1],W[3]*=z[1],z[2]<0&&(at=W[0],W[0]=W[1],W[1]=at),W[0]*=z[2],W[1]*=z[2]),W[0]+=z[4],W[1]+=z[4],W[2]+=z[5],W[3]+=z[5]}static transform(z,W){return[z[0]*W[0]+z[2]*W[1],z[1]*W[0]+z[3]*W[1],z[0]*W[2]+z[2]*W[3],z[1]*W[2]+z[3]*W[3],z[0]*W[4]+z[2]*W[5]+z[4],z[1]*W[4]+z[3]*W[5]+z[5]]}static applyTransform(z,W){let at=z[0]*W[0]+z[1]*W[2]+W[4],ut=z[0]*W[1]+z[1]*W[3]+W[5];return[at,ut]}static applyInverseTransform(z,W){let at=W[0]*W[3]-W[1]*W[2],ut=(z[0]*W[3]-z[1]*W[2]+W[2]*W[5]-W[4]*W[3])/at,gt=(-z[0]*W[1]+z[1]*W[0]+W[4]*W[1]-W[5]*W[0])/at;return[ut,gt]}static getAxialAlignedBoundingBox(z,W){let at=this.applyTransform(z,W),ut=this.applyTransform(z.slice(2,4),W),gt=this.applyTransform([z[0],z[3]],W),mt=this.applyTransform([z[2],z[1]],W);return[Math.min(at[0],ut[0],gt[0],mt[0]),Math.min(at[1],ut[1],gt[1],mt[1]),Math.max(at[0],ut[0],gt[0],mt[0]),Math.max(at[1],ut[1],gt[1],mt[1])]}static inverseTransform(z){let W=z[0]*z[3]-z[1]*z[2];return[z[3]/W,-z[1]/W,-z[2]/W,z[0]/W,(z[2]*z[5]-z[4]*z[3])/W,(z[4]*z[1]-z[5]*z[0])/W]}static singularValueDecompose2dScale(z){let W=[z[0],z[2],z[1],z[3]],at=z[0]*W[0]+z[1]*W[2],ut=z[0]*W[1]+z[1]*W[3],gt=z[2]*W[0]+z[3]*W[2],mt=z[2]*W[1]+z[3]*W[3],Pt=(at+mt)/2,xt=Math.sqrt((at+mt)**2-4*(at*mt-gt*ut))/2,wt=Pt+xt||1,At=Pt-xt||1;return[Math.sqrt(wt),Math.sqrt(At)]}static normalizeRect(z){let W=z.slice(0);return z[0]>z[2]&&(W[0]=z[2],W[2]=z[0]),z[1]>z[3]&&(W[1]=z[3],W[3]=z[1]),W}static intersect(z,W){let at=Math.max(Math.min(z[0],z[2]),Math.min(W[0],W[2])),ut=Math.min(Math.max(z[0],z[2]),Math.max(W[0],W[2]));if(at>ut)return null;let gt=Math.max(Math.min(z[1],z[3]),Math.min(W[1],W[3])),mt=Math.min(Math.max(z[1],z[3]),Math.max(W[1],W[3]));return gt>mt?null:[at,gt,ut,mt]}static bezierBoundingBox(z,W,at,ut,gt,mt,Pt,xt){let wt=[],At=[[],[]],kt,Et,Dt,pt,It,Lt,Ut,jt;for(let Ht=0;Ht<2;++Ht){if(Ht===0?(Et=6*z-12*at+6*gt,kt=-3*z+9*at-9*gt+3*Pt,Dt=3*at-3*z):(Et=6*W-12*ut+6*mt,kt=-3*W+9*ut-9*mt+3*xt,Dt=3*ut-3*W),Math.abs(kt)<1e-12){if(Math.abs(Et)<1e-12)continue;pt=-Dt/Et,0<pt&&pt<1&&wt.push(pt);continue}Ut=Et*Et-4*Dt*kt,jt=Math.sqrt(Ut),!(Ut<0)&&(It=(-Et+jt)/(2*kt),0<It&&It<1&&wt.push(It),Lt=(-Et-jt)/(2*kt),0<Lt&&Lt<1&&wt.push(Lt))}let Mt=wt.length,vt,Ft=Mt;for(;Mt--;)pt=wt[Mt],vt=1-pt,At[0][Mt]=vt*vt*vt*z+3*vt*vt*pt*at+3*vt*pt*pt*gt+pt*pt*pt*Pt,At[1][Mt]=vt*vt*vt*W+3*vt*vt*pt*ut+3*vt*pt*pt*mt+pt*pt*pt*xt;return At[0][Ft]=z,At[1][Ft]=W,At[0][Ft+1]=Pt,At[1][Ft+1]=xt,At[0].length=At[1].length=Ft+2,[Math.min(...At[0]),Math.min(...At[1]),Math.max(...At[0]),Math.max(...At[1])]}}r.Util=rt;let ot=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function lt(et){if(et[0]>="\xEF"){let W;if(et[0]==="\xFE"&&et[1]==="\xFF"?W="utf-16be":et[0]==="\xFF"&&et[1]==="\xFE"?W="utf-16le":et[0]==="\xEF"&&et[1]==="\xBB"&&et[2]==="\xBF"&&(W="utf-8"),W)try{let at=new TextDecoder(W,{fatal:!0}),ut=j(et);return at.decode(ut)}catch(at){F(`stringToPDFString: "${at}".`)}}let z=[];for(let W=0,at=et.length;W<at;W++){let ut=ot[et.charCodeAt(W)];z.push(ut?String.fromCharCode(ut):et.charAt(W))}return z.join("")}function ct(et){return decodeURIComponent(escape(et))}function ht(et){return unescape(encodeURIComponent(et))}function ft(et){return typeof et=="object"&&et?.byteLength!==void 0}function yt(et,z){if(et.length!==z.length)return!1;for(let W=0,at=et.length;W<at;W++)if(et[W]!==z[W])return!1;return!0}function bt(et=new Date){return[et.getUTCFullYear().toString(),(et.getUTCMonth()+1).toString().padStart(2,"0"),et.getUTCDate().toString().padStart(2,"0"),et.getUTCHours().toString().padStart(2,"0"),et.getUTCMinutes().toString().padStart(2,"0"),et.getUTCSeconds().toString().padStart(2,"0")].join("")}class Tt{#t=!1;constructor(){this.promise=new Promise((z,W)=>{this.resolve=at=>{this.#t=!0,z(at)},this.reject=at=>{this.#t=!0,W(at)}})}get settled(){return this.#t}}r.PromiseCapability=Tt;let _t=null,St=null;function Bt(et){return _t||(_t=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,St=new Map([["\uFB05","\u017Ft"]])),et.replaceAll(_t,(z,W,at)=>W?W.normalize("NFKC"):St.get(at))}function $t(){if(typeof crypto<"u"&&typeof crypto?.randomUUID=="function")return crypto.randomUUID();let et=new Uint8Array(32);if(typeof crypto<"u"&&typeof crypto?.getRandomValues=="function")crypto.getRandomValues(et);else for(let z=0;z<32;z++)et[z]=Math.floor(Math.random()*255);return L(et)}let Yt="pdfjs_internal_id_";r.AnnotationPrefix=Yt},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);let DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;let DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(H){if(typeof H=="string"||H instanceof URL?H={url:H}:(0,_util.isArrayBuffer)(H)&&(H={data:H}),typeof H!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!H.url&&!H.data&&!H.range)throw new Error("Invalid parameter object: need either .data, .range or .url");let r=new PDFDocumentLoadingTask,{docId:k}=r,o=H.url?getUrlProp(H.url):null,y=H.data?getDataProp(H.data):null,O=H.httpHeaders||null,M=H.withCredentials===!0,B=H.password??null,N=H.range instanceof PDFDataRangeTransport?H.range:null,h=Number.isInteger(H.rangeChunkSize)&&H.rangeChunkSize>0?H.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE,s=H.worker instanceof PDFWorker?H.worker:null,t=H.verbosity,i=typeof H.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(H.docBaseUrl)?H.docBaseUrl:null,l=typeof H.cMapUrl=="string"?H.cMapUrl:null,a=H.cMapPacked!==!1,e=H.CMapReaderFactory||DefaultCMapReaderFactory,u=typeof H.standardFontDataUrl=="string"?H.standardFontDataUrl:null,f=H.StandardFontDataFactory||DefaultStandardFontDataFactory,m=H.stopAtErrors!==!0,C=Number.isInteger(H.maxImageSize)&&H.maxImageSize>-1?H.maxImageSize:-1,S=H.isEvalSupported!==!1,p=typeof H.isOffscreenCanvasSupported=="boolean"?H.isOffscreenCanvasSupported:!_util.isNodeJS,A=Number.isInteger(H.canvasMaxAreaInBytes)?H.canvasMaxAreaInBytes:-1,I=typeof H.disableFontFace=="boolean"?H.disableFontFace:_util.isNodeJS,U=H.fontExtraProperties===!0,R=H.enableXfa===!0,G=H.ownerDocument||globalThis.document,X=H.disableRange===!0,it=H.disableStream===!0,Z=H.disableAutoFetch===!0,Q=H.pdfBug===!0,nt=N?N.length:H.length??NaN,J=typeof H.useSystemFonts=="boolean"?H.useSystemFonts:!_util.isNodeJS&&!I,F=typeof H.useWorkerFetch=="boolean"?H.useWorkerFetch:e===_display_utils.DOMCMapReaderFactory&&f===_display_utils.DOMStandardFontDataFactory&&l&&u&&(0,_display_utils.isValidFetchUrl)(l,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(u,document.baseURI),b=H.canvasFactory||new DefaultCanvasFactory({ownerDocument:G}),c=H.filterFactory||new DefaultFilterFactory({docId:k,ownerDocument:G}),d=null;(0,_util.setVerbosityLevel)(t);let _={canvasFactory:b,filterFactory:c};if(F||(_.cMapReaderFactory=new e({baseUrl:l,isCompressed:a}),_.standardFontDataFactory=new f({baseUrl:u})),!s){let D={verbosity:t,port:_worker_options.GlobalWorkerOptions.workerPort};s=D.port?PDFWorker.fromPort(D):new PDFWorker(D),r._worker=s}let P={docId:k,apiVersion:"3.11.174",data:y,password:B,disableAutoFetch:Z,rangeChunkSize:h,length:nt,docBaseUrl:i,enableXfa:R,evaluatorOptions:{maxImageSize:C,disableFontFace:I,ignoreErrors:m,isEvalSupported:S,isOffscreenCanvasSupported:p,canvasMaxAreaInBytes:A,fontExtraProperties:U,useSystemFonts:J,cMapUrl:F?l:null,standardFontDataUrl:F?u:null}},x={ignoreErrors:m,isEvalSupported:S,disableFontFace:I,fontExtraProperties:U,enableXfa:R,ownerDocument:G,disableAutoFetch:Z,pdfBug:Q,styleElement:d};return s.promise.then(function(){if(r.destroyed)throw new Error("Loading aborted");let D=_fetchDocument(s,P),E=new Promise(function(n){let g;N?g=new _transport_stream.PDFDataTransportStream({length:nt,initialData:N.initialData,progressiveDone:N.progressiveDone,contentDispositionFilename:N.contentDispositionFilename,disableRange:X,disableStream:it},N):y||(g=(w=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(w):(0,_display_utils.isValidFetchUrl)(w.url)?new _displayFetch_stream.PDFFetchStream(w):new _displayNetwork.PDFNetworkStream(w))({url:o,length:nt,httpHeaders:O,withCredentials:M,rangeChunkSize:h,disableRange:X,disableStream:it})),n(g)});return Promise.all([D,E]).then(function([n,g]){if(r.destroyed)throw new Error("Loading aborted");let v=new _message_handler.MessageHandler(k,n,s.port),w=new WorkerTransport(v,r,g,x,_);r._transport=w,v.send("Ready",null)})}).catch(r._capability.reject),r}function _fetchDocument(H,r){return dt(this,null,function*(){if(H.destroyed)throw new Error("Worker was destroyed");let k=yield H.messageHandler.sendWithPromise("GetDocRequest",r,r.data?[r.data.buffer]:null);if(H.destroyed)throw new Error("Worker was destroyed");return k})}function getUrlProp(H){if(H instanceof URL)return H.href;try{return new URL(H,window.location).href}catch{if(_util.isNodeJS&&typeof H=="string")return H}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(H){if(_util.isNodeJS&&typeof Buffer<"u"&&H instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(H instanceof Uint8Array&&H.byteLength===H.buffer.byteLength)return H;if(typeof H=="string")return(0,_util.stringToBytes)(H);if(typeof H=="object"&&!isNaN(H?.length)||(0,_util.isArrayBuffer)(H))return new Uint8Array(H);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}class PDFDocumentLoadingTask{static#t=0;constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${PDFDocumentLoadingTask.#t++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}destroy(){return dt(this,null,function*(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),yield this._transport?.destroy()}catch(r){throw this._worker?.port&&delete this._worker._pendingDestroy,r}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)})}}exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(r,k,o=!1,y=null){this.length=r,this.initialData=k,this.progressiveDone=o,this.contentDispositionFilename=y,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(r){this._rangeListeners.push(r)}addProgressListener(r){this._progressListeners.push(r)}addProgressiveReadListener(r){this._progressiveReadListeners.push(r)}addProgressiveDoneListener(r){this._progressiveDoneListeners.push(r)}onDataRange(r,k){for(let o of this._rangeListeners)o(r,k)}onDataProgress(r,k){this._readyCapability.promise.then(()=>{for(let o of this._progressListeners)o(r,k)})}onDataProgressiveRead(r){this._readyCapability.promise.then(()=>{for(let k of this._progressiveReadListeners)k(r)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(let r of this._progressiveDoneListeners)r()})}transportReady(){this._readyCapability.resolve()}requestDataRange(r,k){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(r,k){this._pdfInfo=r,this._transport=k,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(o=>{if(!o)return o;let y=[];for(let O in o)y.push(...o[O]);return y}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(r){return this._transport.getPage(r)}getPageIndex(r){return this._transport.getPageIndex(r)}getDestinations(){return this._transport.getDestinations()}getDestination(r){return this._transport.getDestination(r)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(r=!1){return this._transport.startCleanup(r||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{#t=null;#e=!1;constructor(r,k,o,y=!1){this._pageIndex=r,this._pageInfo=k,this._transport=o,this._stats=y?new _display_utils.StatTimer:null,this._pdfBug=y,this.commonObjs=o.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:r,rotation:k=this.rotate,offsetX:o=0,offsetY:y=0,dontFlip:O=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:r,rotation:k,offsetX:o,offsetY:y,dontFlip:O})}getAnnotations({intent:r="display"}={}){let k=this._transport.getRenderingIntent(r);return this._transport.getAnnotations(this._pageIndex,k.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}getXfa(){return dt(this,null,function*(){return this._transport._htmlForXfa?.children[this._pageIndex]||null})}render({canvasContext:r,viewport:k,intent:o="display",annotationMode:y=_util.AnnotationMode.ENABLE,transform:O=null,background:M=null,optionalContentConfigPromise:B=null,annotationCanvasMap:N=null,pageColors:h=null,printAnnotationStorage:s=null}){this._stats?.time("Overall");let t=this._transport.getRenderingIntent(o,y,s);this.#e=!1,this.#s(),B||(B=this._transport.getOptionalContentConfig());let i=this._intentStates.get(t.cacheKey);i||(i=Object.create(null),this._intentStates.set(t.cacheKey,i)),i.streamReaderCancelTimeout&&(clearTimeout(i.streamReaderCancelTimeout),i.streamReaderCancelTimeout=null);let l=!!(t.renderingIntent&_util.RenderingIntentFlag.PRINT);i.displayReadyCapability||(i.displayReadyCapability=new _util.PromiseCapability,i.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(t));let a=f=>{i.renderTasks.delete(e),(this._maybeCleanupAfterRender||l)&&(this.#e=!0),this.#i(!l),f?(e.capability.reject(f),this._abortOperatorList({intentState:i,reason:f instanceof Error?f:new Error(f)})):e.capability.resolve(),this._stats?.timeEnd("Rendering"),this._stats?.timeEnd("Overall")},e=new InternalRenderTask({callback:a,params:{canvasContext:r,viewport:k,transform:O,background:M},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:N,operatorList:i.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!l,pdfBug:this._pdfBug,pageColors:h});(i.renderTasks||=new Set).add(e);let u=e.task;return Promise.all([i.displayReadyCapability.promise,B]).then(([f,m])=>{if(this.destroyed){a();return}this._stats?.time("Rendering"),e.initializeGraphics({transparency:f,optionalContentConfig:m}),e.operatorListChanged()}).catch(a),u}getOperatorList({intent:r="display",annotationMode:k=_util.AnnotationMode.ENABLE,printAnnotationStorage:o=null}={}){function y(){M.operatorList.lastChunk&&(M.opListReadCapability.resolve(M.operatorList),M.renderTasks.delete(B))}let O=this._transport.getRenderingIntent(r,k,o,!0),M=this._intentStates.get(O.cacheKey);M||(M=Object.create(null),this._intentStates.set(O.cacheKey,M));let B;return M.opListReadCapability||(B=Object.create(null),B.operatorListChanged=y,M.opListReadCapability=new _util.PromiseCapability,(M.renderTasks||=new Set).add(B),M.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(O)),M.opListReadCapability.promise}streamTextContent({includeMarkedContent:r=!1,disableNormalization:k=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:r===!0,disableNormalization:k===!0},{highWaterMark:100,size(y){return y.items.length}})}getTextContent(r={}){if(this._transport._htmlForXfa)return this.getXfa().then(o=>_xfa_text.XfaText.textContent(o));let k=this.streamTextContent(r);return new Promise(function(o,y){function O(){M.read().then(function({value:N,done:h}){if(h){o(B);return}Object.assign(B.styles,N.styles),B.items.push(...N.items),O()},y)}let M=k.getReader(),B={items:[],styles:Object.create(null)};O()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;let r=[];for(let k of this._intentStates.values())if(this._abortOperatorList({intentState:k,reason:new Error("Page was destroyed."),force:!0}),!k.opListReadCapability)for(let o of k.renderTasks)r.push(o.completed),o.cancel();return this.objs.clear(),this.#e=!1,this.#s(),Promise.all(r)}cleanup(r=!1){this.#e=!0;let k=this.#i(!1);return r&&k&&(this._stats&&=new _display_utils.StatTimer),k}#i(r=!1){if(this.#s(),!this.#e||this.destroyed)return!1;if(r)return this.#t=setTimeout(()=>{this.#t=null,this.#i(!1)},DELAYED_CLEANUP_TIMEOUT),!1;for(let{renderTasks:k,operatorList:o}of this._intentStates.values())if(k.size>0||!o.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}#s(){this.#t&&(clearTimeout(this.#t),this.#t=null)}_startRenderPage(r,k){let o=this._intentStates.get(k);o&&(this._stats?.timeEnd("Page Request"),o.displayReadyCapability?.resolve(r))}_renderPageChunk(r,k){for(let o=0,y=r.length;o<y;o++)k.operatorList.fnArray.push(r.fnArray[o]),k.operatorList.argsArray.push(r.argsArray[o]);k.operatorList.lastChunk=r.lastChunk,k.operatorList.separateAnnots=r.separateAnnots;for(let o of k.renderTasks)o.operatorListChanged();r.lastChunk&&this.#i(!0)}_pumpOperatorList({renderingIntent:r,cacheKey:k,annotationStorageSerializable:o}){let{map:y,transfers:O}=o,B=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:r,cacheKey:k,annotationStorage:y},O).getReader(),N=this._intentStates.get(k);N.streamReader=B;let h=()=>{B.read().then(({value:s,done:t})=>{if(t){N.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(s,N),h())},s=>{if(N.streamReader=null,!this._transport.destroyed){if(N.operatorList){N.operatorList.lastChunk=!0;for(let t of N.renderTasks)t.operatorListChanged();this.#i(!0)}if(N.displayReadyCapability)N.displayReadyCapability.reject(s);else if(N.opListReadCapability)N.opListReadCapability.reject(s);else throw s}})};h()}_abortOperatorList({intentState:r,reason:k,force:o=!1}){if(r.streamReader){if(r.streamReaderCancelTimeout&&(clearTimeout(r.streamReaderCancelTimeout),r.streamReaderCancelTimeout=null),!o){if(r.renderTasks.size>0)return;if(k instanceof _display_utils.RenderingCancelledException){let y=RENDERING_CANCELLED_TIMEOUT;k.extraDelay>0&&k.extraDelay<1e3&&(y+=k.extraDelay),r.streamReaderCancelTimeout=setTimeout(()=>{r.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:r,reason:k,force:!0})},y);return}}if(r.streamReader.cancel(new _util.AbortException(k.message)).catch(()=>{}),r.streamReader=null,!this._transport.destroyed){for(let[y,O]of this._intentStates)if(O===r){this._intentStates.delete(y);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{#t=new Set;#e=Promise.resolve();postMessage(r,k){let o={data:structuredClone(r,k?{transfer:k}:null)};this.#e.then(()=>{for(let y of this.#t)y.call(this,o)})}addEventListener(r,k){this.#t.add(k)}removeEventListener(r,k){this.#t.delete(k)}terminate(){this.#t.clear()}}exports.LoopbackPort=LoopbackPort;let PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof Wt=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){let H=document?.currentScript?.src;H&&(PDFWorkerUtil.fallbackWorkerSrc=H.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(H,r){let k;try{if(k=new URL(H),!k.origin||k.origin==="null")return!1}catch{return!1}let o=new URL(r,k);return k.origin===o.origin},PDFWorkerUtil.createCDNWrapper=function(H){let r=`importScripts("${H}");`;return URL.createObjectURL(new Blob([r]))}}class PDFWorker{static#workerPorts;constructor({name:H=null,port:r=null,verbosity:k=(0,_util.getVerbosityLevel)()}={}){if(this.name=H,this.destroyed=!1,this.verbosity=k,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,r){if(PDFWorker.#workerPorts?.has(r))throw new Error("Cannot use more than one PDFWorker per port.");(PDFWorker.#workerPorts||=new WeakMap).set(r,this),this._initializeFromPort(r);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(H){this._port=H,this._messageHandler=new _message_handler.MessageHandler("main","worker",H),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:H}=PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,H)||(H=PDFWorkerUtil.createCDNWrapper(new URL(H,window.location).href));let r=new Worker(H),k=new _message_handler.MessageHandler("main","worker",r),o=()=>{r.removeEventListener("error",y),k.destroy(),r.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},y=()=>{this._webWorker||o()};r.addEventListener("error",y),k.on("test",M=>{if(r.removeEventListener("error",y),this.destroyed){o();return}M?(this._messageHandler=k,this._port=r,this._webWorker=r,this._readyCapability.resolve(),k.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),k.destroy(),r.terminate())}),k.on("ready",M=>{if(r.removeEventListener("error",y),this.destroyed){o();return}try{O()}catch{this._setupFakeWorker()}});let O=()=>{let M=new Uint8Array;k.send("test",M,[M.buffer])};O();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(H=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}let r=new LoopbackPort;this._port=r;let k=`fake${PDFWorkerUtil.fakeWorkerId++}`,o=new _message_handler.MessageHandler(k+"_worker",k,r);H.setup(o,r);let y=new _message_handler.MessageHandler(k,k+"_worker",r);this._messageHandler=y,this._readyCapability.resolve(),y.send("configure",{verbosity:this.verbosity})}).catch(H=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${H.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),PDFWorker.#workerPorts?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(H){if(!H?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");let r=this.#workerPorts?.get(H.port);if(r){if(r._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return r}return new PDFWorker(H)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){let loader=()=>dt(this,null,function*(){let mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof Wt=="function"){let worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return yield(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler});return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports.PDFWorker=PDFWorker;class WorkerTransport{#t=new Map;#e=new Map;#i=new Map;#s=null;constructor(r,k,o,y,O){this.messageHandler=r,this.loadingTask=k,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:y.ownerDocument,styleElement:y.styleElement}),this._params=y,this.canvasFactory=O.canvasFactory,this.filterFactory=O.filterFactory,this.cMapReaderFactory=O.cMapReaderFactory,this.standardFontDataFactory=O.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=o,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}#o(r,k=null){let o=this.#t.get(r);if(o)return o;let y=this.messageHandler.sendWithPromise(r,k);return this.#t.set(r,y),y}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(r,k=_util.AnnotationMode.ENABLE,o=null,y=!1){let O=_util.RenderingIntentFlag.DISPLAY,M=_annotation_storage.SerializableEmpty;switch(r){case"any":O=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":O=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${r}`)}switch(k){case _util.AnnotationMode.DISABLE:O+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:O+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:O+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,M=(O&_util.RenderingIntentFlag.PRINT&&o instanceof _annotation_storage.PrintAnnotationStorage?o:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${k}`)}return y&&(O+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:O,cacheKey:`${O}_${M.hash}`,annotationStorageSerializable:M}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,this.#s?.reject(new Error("Worker was destroyed during onPassword callback"));let r=[];for(let o of this.#e.values())r.push(o._destroy());this.#e.clear(),this.#i.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();let k=this.messageHandler.sendWithPromise("Terminate",null);return r.push(k),Promise.all(r).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),this._networkStream?.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){let{messageHandler:r,loadingTask:k}=this;r.on("GetReader",(o,y)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=O=>{this._lastProgress={loaded:O.loaded,total:O.total}},y.onPull=()=>{this._fullReader.read().then(function({value:O,done:M}){if(M){y.close();return}(0,_util.assert)(O instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),y.enqueue(new Uint8Array(O),1,[O])}).catch(O=>{y.error(O)})},y.onCancel=O=>{this._fullReader.cancel(O),y.ready.catch(M=>{if(!this.destroyed)throw M})}}),r.on("ReaderHeadersReady",o=>{let y=new _util.PromiseCapability,O=this._fullReader;return O.headersReady.then(()=>{(!O.isStreamingSupported||!O.isRangeSupported)&&(this._lastProgress&&k.onProgress?.(this._lastProgress),O.onProgress=M=>{k.onProgress?.({loaded:M.loaded,total:M.total})}),y.resolve({isStreamingSupported:O.isStreamingSupported,isRangeSupported:O.isRangeSupported,contentLength:O.contentLength})},y.reject),y.promise}),r.on("GetRangeReader",(o,y)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");let O=this._networkStream.getRangeReader(o.begin,o.end);if(!O){y.close();return}y.onPull=()=>{O.read().then(function({value:M,done:B}){if(B){y.close();return}(0,_util.assert)(M instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),y.enqueue(new Uint8Array(M),1,[M])}).catch(M=>{y.error(M)})},y.onCancel=M=>{O.cancel(M),y.ready.catch(B=>{if(!this.destroyed)throw B})}}),r.on("GetDoc",({pdfInfo:o})=>{this._numPages=o.numPages,this._htmlForXfa=o.htmlForXfa,delete o.htmlForXfa,k._capability.resolve(new PDFDocumentProxy(o,this))}),r.on("DocException",function(o){let y;switch(o.name){case"PasswordException":y=new _util.PasswordException(o.message,o.code);break;case"InvalidPDFException":y=new _util.InvalidPDFException(o.message);break;case"MissingPDFException":y=new _util.MissingPDFException(o.message);break;case"UnexpectedResponseException":y=new _util.UnexpectedResponseException(o.message,o.status);break;case"UnknownErrorException":y=new _util.UnknownErrorException(o.message,o.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}k._capability.reject(y)}),r.on("PasswordRequest",o=>{if(this.#s=new _util.PromiseCapability,k.onPassword){let y=O=>{O instanceof Error?this.#s.reject(O):this.#s.resolve({password:O})};try{k.onPassword(y,o.code)}catch(O){this.#s.reject(O)}}else this.#s.reject(new _util.PasswordException(o.message,o.code));return this.#s.promise}),r.on("DataLoaded",o=>{k.onProgress?.({loaded:o.length,total:o.length}),this.downloadInfoCapability.resolve(o)}),r.on("StartRenderPage",o=>{if(this.destroyed)return;this.#e.get(o.pageIndex)._startRenderPage(o.transparency,o.cacheKey)}),r.on("commonobj",([o,y,O])=>{if(!this.destroyed&&!this.commonObjs.has(o))switch(y){case"Font":let M=this._params;if("error"in O){let h=O.error;(0,_util.warn)(`Error during font loading: ${h}`),this.commonObjs.resolve(o,h);break}let B=M.pdfBug&&globalThis.FontInspector?.enabled?(h,s)=>globalThis.FontInspector.fontAdded(h,s):null,N=new _font_loader.FontFaceObject(O,{isEvalSupported:M.isEvalSupported,disableFontFace:M.disableFontFace,ignoreErrors:M.ignoreErrors,inspectFont:B});this.fontLoader.bind(N).catch(h=>r.sendWithPromise("FontFallback",{id:o})).finally(()=>{!M.fontExtraProperties&&N.data&&(N.data=null),this.commonObjs.resolve(o,N)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(o,O);break;default:throw new Error(`Got unknown common object type ${y}`)}}),r.on("obj",([o,y,O,M])=>{if(this.destroyed)return;let B=this.#e.get(y);if(!B.objs.has(o))switch(O){case"Image":if(B.objs.resolve(o,M),M){let N;if(M.bitmap){let{width:h,height:s}=M;N=h*s*4}else N=M.data?.length||0;N>_util.MAX_IMAGE_SIZE_TO_CACHE&&(B._maybeCleanupAfterRender=!0)}break;case"Pattern":B.objs.resolve(o,M);break;default:throw new Error(`Got unknown object type ${O}`)}}),r.on("DocProgress",o=>{this.destroyed||k.onProgress?.({loaded:o.loaded,total:o.total})}),r.on("FetchBuiltInCMap",o=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(o):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),r.on("FetchStandardFontData",o=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(o):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");let{map:r,transfers:k}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:r,filename:this._fullReader?.filename??null},k).finally(()=>{this.annotationStorage.resetModified()})}getPage(r){if(!Number.isInteger(r)||r<=0||r>this._numPages)return Promise.reject(new Error("Invalid page request."));let k=r-1,o=this.#i.get(k);if(o)return o;let y=this.messageHandler.sendWithPromise("GetPage",{pageIndex:k}).then(O=>{if(this.destroyed)throw new Error("Transport destroyed");let M=new PDFPageProxy(k,O,this,this._params.pdfBug);return this.#e.set(k,M),M});return this.#i.set(k,y),y}getPageIndex(r){return typeof r!="object"||r===null||!Number.isInteger(r.num)||r.num<0||!Number.isInteger(r.gen)||r.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:r.num,gen:r.gen})}getAnnotations(r,k){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:r,intent:k})}getFieldObjects(){return this.#o("GetFieldObjects")}hasJSActions(){return this.#o("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(r){return typeof r!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:r})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#o("GetDocJSActions")}getPageJSActions(r){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:r})}getStructTree(r){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:r})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(r=>new _optional_content_config.OptionalContentConfig(r))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){let r="GetMetadata",k=this.#t.get(r);if(k)return k;let o=this.messageHandler.sendWithPromise(r,null).then(y=>({info:y[0],metadata:y[1]?new _metadata.Metadata(y[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(r,o),o}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}startCleanup(r=!1){return dt(this,null,function*(){if(!this.destroyed){yield this.messageHandler.sendWithPromise("Cleanup",null);for(let k of this.#e.values())if(!k.cleanup())throw new Error(`startCleanup: Page ${k.pageNumber} is currently rendering.`);this.commonObjs.clear(),r||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0)}})}get loadingParams(){let{disableAutoFetch:r,enableXfa:k}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:r,enableXfa:k})}}class PDFObjects{#t=Object.create(null);#e(r){return this.#t[r]||={capability:new _util.PromiseCapability,data:null}}get(r,k=null){if(k){let y=this.#e(r);return y.capability.promise.then(()=>k(y.data)),null}let o=this.#t[r];if(!o?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${r}.`);return o.data}has(r){return this.#t[r]?.capability.settled||!1}resolve(r,k=null){let o=this.#e(r);o.data=k,o.capability.resolve()}clear(){for(let r in this.#t){let{data:k}=this.#t[r];k?.bitmap?.close()}this.#t=Object.create(null)}}class RenderTask{#t=null;constructor(r){this.#t=r,this.onContinue=null}get promise(){return this.#t.capability.promise}cancel(r=0){this.#t.cancel(null,r)}get separateAnnots(){let{separateAnnots:r}=this.#t.operatorList;if(!r)return!1;let{annotationCanvasMap:k}=this.#t;return r.form||r.canvas&&k?.size>0}}exports.RenderTask=RenderTask;class InternalRenderTask{static#t=new WeakSet;constructor({callback:r,params:k,objs:o,commonObjs:y,annotationCanvasMap:O,operatorList:M,pageIndex:B,canvasFactory:N,filterFactory:h,useRequestAnimationFrame:s=!1,pdfBug:t=!1,pageColors:i=null}){this.callback=r,this.params=k,this.objs=o,this.commonObjs=y,this.annotationCanvasMap=O,this.operatorListIdx=null,this.operatorList=M,this._pageIndex=B,this.canvasFactory=N,this.filterFactory=h,this._pdfBug=t,this.pageColors=i,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=s===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=k.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:r=!1,optionalContentConfig:k}){if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());let{canvasContext:o,viewport:y,transform:O,background:M}=this.params;this.gfx=new _canvas.CanvasGraphics(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:k},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:O,viewport:y,transparency:r,background:M}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(r=null,k=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),InternalRenderTask.#t.delete(this._canvas),this.callback(r||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,k))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}_next(){return dt(this,null,function*(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),InternalRenderTask.#t.delete(this._canvas),this.callback())))})}}let version="3.11.174";exports.version=version;let build="ce8716743";exports.build=build},(H,r,k)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.SerializableEmpty=r.PrintAnnotationStorage=r.AnnotationStorage=void 0;var o=k(1),y=k(4),O=k(8);let M=Object.freeze({map:null,hash:"",transfers:void 0});r.SerializableEmpty=M;class B{#t=!1;#e=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(s,t){let i=this.#e.get(s);return i===void 0?t:Object.assign(t,i)}getRawValue(s){return this.#e.get(s)}remove(s){if(this.#e.delete(s),this.#e.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(let t of this.#e.values())if(t instanceof y.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(s,t){let i=this.#e.get(s),l=!1;if(i!==void 0)for(let[a,e]of Object.entries(t))i[a]!==e&&(l=!0,i[a]=e);else l=!0,this.#e.set(s,t);l&&this.#i(),t instanceof y.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(s){return this.#e.has(s)}getAll(){return this.#e.size>0?(0,o.objectFromMap)(this.#e):null}setAll(s){for(let[t,i]of Object.entries(s))this.setValue(t,i)}get size(){return this.#e.size}#i(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new N(this)}get serializable(){if(this.#e.size===0)return M;let s=new Map,t=new O.MurmurHash3_64,i=[],l=Object.create(null),a=!1;for(let[e,u]of this.#e){let f=u instanceof y.AnnotationEditor?u.serialize(!1,l):u;f&&(s.set(e,f),t.update(`${e}:${JSON.stringify(f)}`),a||=!!f.bitmap)}if(a)for(let e of s.values())e.bitmap&&i.push(e.bitmap);return s.size>0?{map:s,hash:t.hexdigest(),transfers:i}:M}}r.AnnotationStorage=B;class N extends B{#t;constructor(s){super();let{map:t,hash:i,transfers:l}=s.serializable,a=structuredClone(t,l?{transfer:l}:null);this.#t={map:a,hash:i,transfers:l}}get print(){(0,o.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}}r.PrintAnnotationStorage=N},(H,r,k)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.AnnotationEditor=void 0;var o=k(5),y=k(1),O=k(6);class M{#t="";#e=!1;#i=null;#s=null;#o=null;#a=!1;#r=null;#l=this.focusin.bind(this);#c=this.focusout.bind(this);#n=!1;#f=!1;#d=!1;_initialOptions=Object.create(null);_uiManager=null;_focusEventsAllowed=!0;_l10nPromise=null;#u=!1;#p=M._zIndex++;static _borderLineWidth=-1;static _colorManager=new o.ColorManager;static _zIndex=1;static SMALL_EDITOR_SIZE=0;constructor(h){this.constructor===M&&(0,y.unreachable)("Cannot initialize AnnotationEditor."),this.parent=h.parent,this.id=h.id,this.width=this.height=null,this.pageIndex=h.parent.pageIndex,this.name=h.name,this.div=null,this._uiManager=h.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=h.isCentered,this._structTreeParentId=null;let{rotation:s,rawDims:{pageWidth:t,pageHeight:i,pageX:l,pageY:a}}=this.parent.viewport;this.rotation=s,this.pageRotation=(360+s-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[t,i],this.pageTranslation=[l,a];let[e,u]=this.parentDimensions;this.x=h.x/e,this.y=h.y/u,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,y.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(h){let s=new B({id:h.parent.getNextId(),parent:h.parent,uiManager:h._uiManager});s.annotationElementId=h.annotationElementId,s.deleted=!0,s._uiManager.addToAnnotationStorage(s)}static initialize(h,s=null){if(M._l10nPromise||=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(i=>[i,h.get(i)])),s?.strings)for(let i of s.strings)M._l10nPromise.set(i,h.get(i));if(M._borderLineWidth!==-1)return;let t=getComputedStyle(document.documentElement);M._borderLineWidth=parseFloat(t.getPropertyValue("--outline-width"))||0}static updateDefaultParams(h,s){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(h){return!1}static paste(h,s){(0,y.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#u}set _isDraggable(h){this.#u=h,this.div?.classList.toggle("draggable",h)}center(){let[h,s]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*s/(h*2),this.y+=this.width*h/(s*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*s/(h*2),this.y-=this.width*h/(s*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(h){this._uiManager.addCommands(h)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#p}setParent(h){h!==null&&(this.pageIndex=h.pageIndex,this.pageDimensions=h.pageDimensions),this.parent=h}focusin(h){this._focusEventsAllowed&&(this.#n?this.#n=!1:this.parent.setSelected(this))}focusout(h){!this._focusEventsAllowed||!this.isAttachedToDOM||h.relatedTarget?.closest(`#${this.id}`)||(h.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(h,s,t,i){let[l,a]=this.parentDimensions;[t,i]=this.screenToPageTranslation(t,i),this.x=(h+t)/l,this.y=(s+i)/a,this.fixAndSetPosition()}#b([h,s],t,i){[t,i]=this.screenToPageTranslation(t,i),this.x+=t/h,this.y+=i/s,this.fixAndSetPosition()}translate(h,s){this.#b(this.parentDimensions,h,s)}translateInPage(h,s){this.#b(this.pageDimensions,h,s),this.div.scrollIntoView({block:"nearest"})}drag(h,s){let[t,i]=this.parentDimensions;if(this.x+=h/t,this.y+=s/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){let{x:f,y:m}=this.div.getBoundingClientRect();this.parent.findNewParent(this,f,m)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:a}=this,[e,u]=this.#m();l+=e,a+=u,this.div.style.left=`${(100*l).toFixed(2)}%`,this.div.style.top=`${(100*a).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}#m(){let[h,s]=this.parentDimensions,{_borderLineWidth:t}=M,i=t/h,l=t/s;switch(this.rotation){case 90:return[-i,l];case 180:return[i,l];case 270:return[i,-l];default:return[-i,-l]}}fixAndSetPosition(){let[h,s]=this.pageDimensions,{x:t,y:i,width:l,height:a}=this;switch(l*=h,a*=s,t*=h,i*=s,this.rotation){case 0:t=Math.max(0,Math.min(h-l,t)),i=Math.max(0,Math.min(s-a,i));break;case 90:t=Math.max(0,Math.min(h-a,t)),i=Math.min(s,Math.max(l,i));break;case 180:t=Math.min(h,Math.max(l,t)),i=Math.min(s,Math.max(a,i));break;case 270:t=Math.min(h,Math.max(a,t)),i=Math.max(0,Math.min(s-l,i));break}this.x=t/=h,this.y=i/=s;let[e,u]=this.#m();t+=e,i+=u;let{style:f}=this.div;f.left=`${(100*t).toFixed(2)}%`,f.top=`${(100*i).toFixed(2)}%`,this.moveInDOM()}static#g(h,s,t){switch(t){case 90:return[s,-h];case 180:return[-h,-s];case 270:return[-s,h];default:return[h,s]}}screenToPageTranslation(h,s){return M.#g(h,s,this.parentRotation)}pageTranslationToScreen(h,s){return M.#g(h,s,360-this.parentRotation)}#h(h){switch(h){case 90:{let[s,t]=this.pageDimensions;return[0,-s/t,t/s,0]}case 180:return[-1,0,0,-1];case 270:{let[s,t]=this.pageDimensions;return[0,s/t,-t/s,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){let{parentScale:h,pageDimensions:[s,t]}=this,i=s*h,l=t*h;return y.FeatureTest.isCSSRoundSupported?[Math.round(i),Math.round(l)]:[i,l]}setDims(h,s){let[t,i]=this.parentDimensions;this.div.style.width=`${(100*h/t).toFixed(2)}%`,this.#a||(this.div.style.height=`${(100*s/i).toFixed(2)}%`),this.#i?.classList.toggle("small",h<M.SMALL_EDITOR_SIZE||s<M.SMALL_EDITOR_SIZE)}fixDims(){let{style:h}=this.div,{height:s,width:t}=h,i=t.endsWith("%"),l=!this.#a&&s.endsWith("%");if(i&&l)return;let[a,e]=this.parentDimensions;i||(h.width=`${(100*parseFloat(t)/a).toFixed(2)}%`),!this.#a&&!l&&(h.height=`${(100*parseFloat(s)/e).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#_(){if(this.#r)return;this.#r=document.createElement("div"),this.#r.classList.add("resizers");let h=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||h.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(let s of h){let t=document.createElement("div");this.#r.append(t),t.classList.add("resizer",s),t.addEventListener("pointerdown",this.#E.bind(this,s)),t.addEventListener("contextmenu",O.noContextMenu)}this.div.prepend(this.#r)}#E(h,s){s.preventDefault();let{isMac:t}=y.FeatureTest.platform;if(s.button!==0||s.ctrlKey&&t)return;let i=this.#S.bind(this,h),l=this._isDraggable;this._isDraggable=!1;let a={passive:!0,capture:!0};window.addEventListener("pointermove",i,a);let e=this.x,u=this.y,f=this.width,m=this.height,C=this.parent.div.style.cursor,S=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(s.target).cursor;let p=()=>{this._isDraggable=l,window.removeEventListener("pointerup",p),window.removeEventListener("blur",p),window.removeEventListener("pointermove",i,a),this.parent.div.style.cursor=C,this.div.style.cursor=S;let A=this.x,I=this.y,U=this.width,R=this.height;A===e&&I===u&&U===f&&R===m||this.addCommands({cmd:()=>{this.width=U,this.height=R,this.x=A,this.y=I;let[G,X]=this.parentDimensions;this.setDims(G*U,X*R),this.fixAndSetPosition()},undo:()=>{this.width=f,this.height=m,this.x=e,this.y=u;let[G,X]=this.parentDimensions;this.setDims(G*f,X*m),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",p),window.addEventListener("blur",p)}#S(h,s){let[t,i]=this.parentDimensions,l=this.x,a=this.y,e=this.width,u=this.height,f=M.MIN_SIZE/t,m=M.MIN_SIZE/i,C=E=>Math.round(E*1e4)/1e4,S=this.#h(this.rotation),p=(E,n)=>[S[0]*E+S[2]*n,S[1]*E+S[3]*n],A=this.#h(360-this.rotation),I=(E,n)=>[A[0]*E+A[2]*n,A[1]*E+A[3]*n],U,R,G=!1,X=!1;switch(h){case"topLeft":G=!0,U=(E,n)=>[0,0],R=(E,n)=>[E,n];break;case"topMiddle":U=(E,n)=>[E/2,0],R=(E,n)=>[E/2,n];break;case"topRight":G=!0,U=(E,n)=>[E,0],R=(E,n)=>[0,n];break;case"middleRight":X=!0,U=(E,n)=>[E,n/2],R=(E,n)=>[0,n/2];break;case"bottomRight":G=!0,U=(E,n)=>[E,n],R=(E,n)=>[0,0];break;case"bottomMiddle":U=(E,n)=>[E/2,n],R=(E,n)=>[E/2,0];break;case"bottomLeft":G=!0,U=(E,n)=>[0,n],R=(E,n)=>[E,0];break;case"middleLeft":X=!0,U=(E,n)=>[0,n/2],R=(E,n)=>[E,n/2];break}let it=U(e,u),Z=R(e,u),Q=p(...Z),nt=C(l+Q[0]),J=C(a+Q[1]),F=1,b=1,[c,d]=this.screenToPageTranslation(s.movementX,s.movementY);if([c,d]=I(c/t,d/i),G){let E=Math.hypot(e,u);F=b=Math.max(Math.min(Math.hypot(Z[0]-it[0]-c,Z[1]-it[1]-d)/E,1/e,1/u),f/e,m/u)}else X?F=Math.max(f,Math.min(1,Math.abs(Z[0]-it[0]-c)))/e:b=Math.max(m,Math.min(1,Math.abs(Z[1]-it[1]-d)))/u;let _=C(e*F),P=C(u*b);Q=p(...R(_,P));let x=nt-Q[0],D=J-Q[1];this.width=_,this.height=P,this.x=x,this.y=D,this.setDims(t*_,i*P),this.fixAndSetPosition()}addAltTextButton(){return dt(this,null,function*(){if(this.#i)return;let h=this.#i=document.createElement("button");h.className="altText";let s=yield M._l10nPromise.get("editor_alt_text_button_label");h.textContent=s,h.setAttribute("aria-label",s),h.tabIndex="0",h.addEventListener("contextmenu",O.noContextMenu),h.addEventListener("pointerdown",t=>t.stopPropagation()),h.addEventListener("click",t=>{t.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),h.addEventListener("keydown",t=>{t.target===h&&t.key==="Enter"&&(t.preventDefault(),this._uiManager.editAltText(this))}),this.#T(),this.div.append(h),M.SMALL_EDITOR_SIZE||(M.SMALL_EDITOR_SIZE=Math.min(128,Math.round(h.getBoundingClientRect().width*1.4)))})}#T(){return dt(this,null,function*(){let h=this.#i;if(!h)return;if(!this.#t&&!this.#e){h.classList.remove("done"),this.#s?.remove();return}M._l10nPromise.get("editor_alt_text_edit_button_label").then(t=>{h.setAttribute("aria-label",t)});let s=this.#s;if(!s){this.#s=s=document.createElement("span"),s.className="tooltip",s.setAttribute("role","tooltip");let t=s.id=`alt-text-tooltip-${this.id}`;h.setAttribute("aria-describedby",t);let i=100;h.addEventListener("mouseenter",()=>{this.#o=setTimeout(()=>{this.#o=null,this.#s.classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},i)}),h.addEventListener("mouseleave",()=>{clearTimeout(this.#o),this.#o=null,this.#s?.classList.remove("show")})}h.classList.add("done"),s.innerText=this.#e?yield M._l10nPromise.get("editor_alt_text_decorative_tooltip"):this.#t,s.parentNode||h.append(s)})}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:this.#t,decorative:this.#e}}set altTextData({altText:h,decorative:s}){this.#t===h&&this.#e===s||(this.#t=h,this.#e=s,this.#T())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",this.#l),this.div.addEventListener("focusout",this.#c);let[h,s]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*s/h).toFixed(2)}%`,this.div.style.maxHeight=`${(100*h/s).toFixed(2)}%`);let[t,i]=this.getInitialTranslation();return this.translate(t,i),(0,o.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(h){let{isMac:s}=y.FeatureTest.platform;if(h.button!==0||h.ctrlKey&&s){h.preventDefault();return}this.#n=!0,this.#x(h)}#x(h){if(!this._isDraggable)return;let s=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let t,i;s&&(t={passive:!0,capture:!0},i=a=>{let[e,u]=this.screenToPageTranslation(a.movementX,a.movementY);this._uiManager.dragSelectedEditors(e,u)},window.addEventListener("pointermove",i,t));let l=()=>{if(window.removeEventListener("pointerup",l),window.removeEventListener("blur",l),s&&window.removeEventListener("pointermove",i,t),this.#n=!1,!this._uiManager.endDragSession()){let{isMac:a}=y.FeatureTest.platform;h.ctrlKey&&!a||h.shiftKey||h.metaKey&&a?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",l),window.addEventListener("blur",l)}moveInDOM(){this.parent?.moveEditorInDOM(this)}_setParentAndPosition(h,s,t){h.changeParent(this),this.x=s,this.y=t,this.fixAndSetPosition()}getRect(h,s){let t=this.parentScale,[i,l]=this.pageDimensions,[a,e]=this.pageTranslation,u=h/t,f=s/t,m=this.x*i,C=this.y*l,S=this.width*i,p=this.height*l;switch(this.rotation){case 0:return[m+u+a,l-C-f-p+e,m+u+S+a,l-C-f+e];case 90:return[m+f+a,l-C+u+e,m+f+p+a,l-C+u+S+e];case 180:return[m-u-S+a,l-C+f+e,m-u+a,l-C+f+p+e];case 270:return[m-f-p+a,l-C-u-S+e,m-f+a,l-C-u+e];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(h,s){let[t,i,l,a]=h,e=l-t,u=a-i;switch(this.rotation){case 0:return[t,s-a,e,u];case 90:return[t,s-i,u,e];case 180:return[l,s-i,e,u];case 270:return[l,s-a,u,e];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#d=!0}disableEditMode(){this.#d=!1}isInEditMode(){return this.#d}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",this.#l),this.div?.addEventListener("focusout",this.#c)}serialize(h=!1,s=null){(0,y.unreachable)("An editor must be serializable")}static deserialize(h,s,t){let i=new this.prototype.constructor({parent:s,id:s.getNextId(),uiManager:t});i.rotation=h.rotation;let[l,a]=i.pageDimensions,[e,u,f,m]=i.getRectInCurrentCoords(h.rect,a);return i.x=e/l,i.y=u/a,i.width=f/l,i.height=m/a,i}remove(){this.div.removeEventListener("focusin",this.#l),this.div.removeEventListener("focusout",this.#c),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#i?.remove(),this.#i=null,this.#s=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#_(),this.#r.classList.remove("hidden"))}select(){this.makeResizable(),this.div?.classList.add("selectedEditor")}unselect(){this.#r?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(h,s){}disableEditing(){this.#i&&(this.#i.hidden=!0)}enableEditing(){this.#i&&(this.#i.hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return this.#f}set isEditing(h){this.#f=h,this.parent&&(h?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(h,s){this.#a=!0;let t=h/s,{style:i}=this.div;i.aspectRatio=t,i.height="auto"}static get MIN_SIZE(){return 16}}r.AnnotationEditor=M;class B extends M{constructor(h){super(h),this.annotationElementId=h.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(H,r,k)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.KeyboardManager=r.CommandManager=r.ColorManager=r.AnnotationEditorUIManager=void 0,r.bindEvents=O,r.opacityToHex=M;var o=k(1),y=k(6);function O(l,a,e){for(let u of e)a.addEventListener(u,l[u].bind(l))}function M(l){return Math.round(Math.min(255,Math.max(1,255*l))).toString(16).padStart(2,"0")}class B{#t=0;getId(){return`${o.AnnotationEditorPrefix}${this.#t++}`}}class N{#t=(0,o.getUuid)();#e=0;#i=null;static get _isSVGFittingCanvas(){let a='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',u=new OffscreenCanvas(1,3).getContext("2d"),f=new Image;f.src=a;let m=f.decode().then(()=>(u.drawImage(f,0,0,1,1,0,0,1,3),new Uint32Array(u.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,o.shadow)(this,"_isSVGFittingCanvas",m)}#s(a,e){return dt(this,null,function*(){this.#i||=new Map;let u=this.#i.get(a);if(u===null)return null;if(u?.bitmap)return u.refCounter+=1,u;try{u||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let f;if(typeof e=="string"){u.url=e;let m=yield fetch(e);if(!m.ok)throw new Error(m.statusText);f=yield m.blob()}else f=u.file=e;if(f.type==="image/svg+xml"){let m=N._isSVGFittingCanvas,C=new FileReader,S=new Image,p=new Promise((A,I)=>{S.onload=()=>{u.bitmap=S,u.isSvg=!0,A()},C.onload=()=>dt(this,null,function*(){let U=u.svgUrl=C.result;S.src=(yield m)?`${U}#svgView(preserveAspectRatio(none))`:U}),S.onerror=C.onerror=I});C.readAsDataURL(f),yield p}else u.bitmap=yield createImageBitmap(f);u.refCounter=1}catch(f){console.error(f),u=null}return this.#i.set(a,u),u&&this.#i.set(u.id,u),u})}getFromFile(a){return dt(this,null,function*(){let{lastModified:e,name:u,size:f,type:m}=a;return this.#s(`${e}_${u}_${f}_${m}`,a)})}getFromUrl(a){return dt(this,null,function*(){return this.#s(a,a)})}getFromId(a){return dt(this,null,function*(){this.#i||=new Map;let e=this.#i.get(a);return e?e.bitmap?(e.refCounter+=1,e):e.file?this.getFromFile(e.file):this.getFromUrl(e.url):null})}getSvgUrl(a){let e=this.#i.get(a);return e?.isSvg?e.svgUrl:null}deleteId(a){this.#i||=new Map;let e=this.#i.get(a);e&&(e.refCounter-=1,e.refCounter===0&&(e.bitmap=null))}isValidId(a){return a.startsWith(`image_${this.#t}_`)}}class h{#t=[];#e=!1;#i;#s=-1;constructor(a=128){this.#i=a}add({cmd:a,undo:e,mustExec:u,type:f=NaN,overwriteIfSameType:m=!1,keepUndo:C=!1}){if(u&&a(),this.#e)return;let S={cmd:a,undo:e,type:f};if(this.#s===-1){this.#t.length>0&&(this.#t.length=0),this.#s=0,this.#t.push(S);return}if(m&&this.#t[this.#s].type===f){C&&(S.undo=this.#t[this.#s].undo),this.#t[this.#s]=S;return}let p=this.#s+1;p===this.#i?this.#t.splice(0,1):(this.#s=p,p<this.#t.length&&this.#t.splice(p)),this.#t.push(S)}undo(){this.#s!==-1&&(this.#e=!0,this.#t[this.#s].undo(),this.#e=!1,this.#s-=1)}redo(){this.#s<this.#t.length-1&&(this.#s+=1,this.#e=!0,this.#t[this.#s].cmd(),this.#e=!1)}hasSomethingToUndo(){return this.#s!==-1}hasSomethingToRedo(){return this.#s<this.#t.length-1}destroy(){this.#t=null}}r.CommandManager=h;class s{constructor(a){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;let{isMac:e}=o.FeatureTest.platform;for(let[u,f,m={}]of a)for(let C of u){let S=C.startsWith("mac+");e&&S?(this.callbacks.set(C.slice(4),{callback:f,options:m}),this.allKeys.add(C.split("+").at(-1))):!e&&!S&&(this.callbacks.set(C,{callback:f,options:m}),this.allKeys.add(C.split("+").at(-1)))}}#t(a){a.altKey&&this.buffer.push("alt"),a.ctrlKey&&this.buffer.push("ctrl"),a.metaKey&&this.buffer.push("meta"),a.shiftKey&&this.buffer.push("shift"),this.buffer.push(a.key);let e=this.buffer.join("+");return this.buffer.length=0,e}exec(a,e){if(!this.allKeys.has(e.key))return;let u=this.callbacks.get(this.#t(e));if(!u)return;let{callback:f,options:{bubbles:m=!1,args:C=[],checker:S=null}}=u;S&&!S(a,e)||(f.bind(a,...C)(),m||(e.stopPropagation(),e.preventDefault()))}}r.KeyboardManager=s;class t{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){let a=new Map([["CanvasText",null],["Canvas",null]]);return(0,y.getColorValues)(a),(0,o.shadow)(this,"_colors",a)}convert(a){let e=(0,y.getRGB)(a);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(let[u,f]of this._colors)if(f.every((m,C)=>m===e[C]))return t._colorsMapping.get(u);return e}getHexCode(a){let e=this._colors.get(a);return e?o.Util.makeHexColor(...e):a}}r.ColorManager=t;let i=(()=>{class l{#t=null;#e=new Map;#i=new Map;#s=null;#o=null;#a=new h;#r=0;#l=new Set;#c=null;#n=null;#f=new Set;#d=null;#u=new B;#p=!1;#b=!1;#m=null;#g=o.AnnotationEditorType.NONE;#h=new Set;#_=null;#E=this.blur.bind(this);#S=this.focus.bind(this);#T=this.copy.bind(this);#x=this.cut.bind(this);#I=this.paste.bind(this);#L=this.keydown.bind(this);#O=this.onEditingAction.bind(this);#A=this.onPageChanging.bind(this);#D=this.onScaleChanging.bind(this);#k=this.onRotationChanging.bind(this);#M={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1};#y=[0,0];#P=null;#w=null;#N=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){let e=l.prototype,u=C=>{let{activeElement:S}=document;return S&&C.#w.contains(S)&&C.hasSomethingToControl()},f=this.TRANSLATE_SMALL,m=this.TRANSLATE_BIG;return(0,o.shadow)(this,"_keyboardManager",new s([[["ctrl+a","mac+meta+a"],e.selectAll],[["ctrl+z","mac+meta+z"],e.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-f,0],checker:u}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-m,0],checker:u}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[f,0],checker:u}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[m,0],checker:u}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-f],checker:u}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-m],checker:u}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,f],checker:u}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,m],checker:u}]]))}constructor(e,u,f,m,C,S){this.#w=e,this.#N=u,this.#s=f,this._eventBus=m,this._eventBus._on("editingaction",this.#O),this._eventBus._on("pagechanging",this.#A),this._eventBus._on("scalechanging",this.#D),this._eventBus._on("rotationchanging",this.#k),this.#o=C.annotationStorage,this.#d=C.filterFactory,this.#_=S,this.viewParameters={realScale:y.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){this.#F(),this.#U(),this._eventBus._off("editingaction",this.#O),this._eventBus._off("pagechanging",this.#A),this._eventBus._off("scalechanging",this.#D),this._eventBus._off("rotationchanging",this.#k);for(let e of this.#i.values())e.destroy();this.#i.clear(),this.#e.clear(),this.#f.clear(),this.#t=null,this.#h.clear(),this.#a.destroy(),this.#s.destroy()}get hcmFilter(){return(0,o.shadow)(this,"hcmFilter",this.#_?this.#d.addHCMFilter(this.#_.foreground,this.#_.background):"none")}get direction(){return(0,o.shadow)(this,"direction",getComputedStyle(this.#w).direction)}editAltText(e){this.#s?.editAltText(this,e)}onPageChanging({pageNumber:e}){this.#r=e-1}focusMainContainer(){this.#w.focus()}findParent(e,u){for(let f of this.#i.values()){let{x:m,y:C,width:S,height:p}=f.div.getBoundingClientRect();if(e>=m&&e<=m+S&&u>=C&&u<=C+p)return f}return null}disableUserSelect(e=!1){this.#N.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#f.add(e)}removeShouldRescale(e){this.#f.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*y.PixelsPerInch.PDF_TO_CSS_UNITS;for(let u of this.#f)u.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}addToAnnotationStorage(e){!e.isEmpty()&&this.#o&&!this.#o.has(e.id)&&this.#o.setValue(e.id,e)}#B(){window.addEventListener("focus",this.#S),window.addEventListener("blur",this.#E)}#U(){window.removeEventListener("focus",this.#S),window.removeEventListener("blur",this.#E)}blur(){if(!this.hasSelection)return;let{activeElement:e}=document;for(let u of this.#h)if(u.div.contains(e)){this.#m=[u,e],u._focusEventsAllowed=!1;break}}focus(){if(!this.#m)return;let[e,u]=this.#m;this.#m=null,u.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0}),u.focus()}#j(){window.addEventListener("keydown",this.#L,{capture:!0})}#F(){window.removeEventListener("keydown",this.#L,{capture:!0})}#R(){document.addEventListener("copy",this.#T),document.addEventListener("cut",this.#x),document.addEventListener("paste",this.#I)}#C(){document.removeEventListener("copy",this.#T),document.removeEventListener("cut",this.#x),document.removeEventListener("paste",this.#I)}addEditListeners(){this.#j(),this.#R()}removeEditListeners(){this.#F(),this.#C()}copy(e){if(e.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;let u=[];for(let f of this.#h){let m=f.serialize(!0);m&&u.push(m)}u.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(u))}cut(e){this.copy(e),this.delete()}paste(e){e.preventDefault();let{clipboardData:u}=e;for(let C of u.items)for(let S of this.#n)if(S.isHandlingMimeForPasting(C.type)){S.paste(C,this.currentLayer);return}let f=u.getData("application/pdfjs");if(!f)return;try{f=JSON.parse(f)}catch(C){(0,o.warn)(`paste: "${C.message}".`);return}if(!Array.isArray(f))return;this.unselectAll();let m=this.currentLayer;try{let C=[];for(let A of f){let I=m.deserialize(A);if(!I)return;C.push(I)}let S=()=>{for(let A of C)this.#G(A);this.#z(C)},p=()=>{for(let A of C)A.remove()};this.addCommands({cmd:S,undo:p,mustExec:!0})}catch(C){(0,o.warn)(`paste: "${C.message}".`)}}keydown(e){this.getActive()?.shouldGetKeyboardEvents()||l._keyboardManager.exec(this,e)}onEditingAction(e){["undo","redo","delete","selectAll"].includes(e.name)&&this[e.name]()}#v(e){Object.entries(e).some(([f,m])=>this.#M[f]!==m)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#M,e)})}#H(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#B(),this.#j(),this.#R(),this.#v({isEditing:this.#g!==o.AnnotationEditorType.NONE,isEmpty:this.#W(),hasSomethingToUndo:this.#a.hasSomethingToUndo(),hasSomethingToRedo:this.#a.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#U(),this.#F(),this.#C(),this.#v({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#n){this.#n=e;for(let u of this.#n)this.#H(u.defaultPropertiesToUpdate)}}getId(){return this.#u.getId()}get currentLayer(){return this.#i.get(this.#r)}getLayer(e){return this.#i.get(e)}get currentPageIndex(){return this.#r}addLayer(e){this.#i.set(e.pageIndex,e),this.#p?e.enable():e.disable()}removeLayer(e){this.#i.delete(e.pageIndex)}updateMode(e,u=null){if(this.#g!==e){if(this.#g=e,e===o.AnnotationEditorType.NONE){this.setEditingState(!1),this.#V();return}this.setEditingState(!0),this.#X(),this.unselectAll();for(let f of this.#i.values())f.updateMode(e);if(u){for(let f of this.#e.values())if(f.annotationElementId===u){this.setSelected(f),f.enterInEditMode();break}}}}updateToolbar(e){e!==this.#g&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,u){if(this.#n){if(e===o.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(e);return}for(let f of this.#h)f.updateParams(e,u);for(let f of this.#n)f.updateDefaultParams(e,u)}}enableWaiting(e=!1){if(this.#b!==e){this.#b=e;for(let u of this.#i.values())e?u.disableClick():u.enableClick(),u.div.classList.toggle("waiting",e)}}#X(){if(!this.#p){this.#p=!0;for(let e of this.#i.values())e.enable()}}#V(){if(this.unselectAll(),this.#p){this.#p=!1;for(let e of this.#i.values())e.disable()}}getEditors(e){let u=[];for(let f of this.#e.values())f.pageIndex===e&&u.push(f);return u}getEditor(e){return this.#e.get(e)}addEditor(e){this.#e.set(e.id,e)}removeEditor(e){this.#e.delete(e.id),this.unselect(e),(!e.annotationElementId||!this.#l.has(e.annotationElementId))&&this.#o?.remove(e.id)}addDeletedAnnotationElement(e){this.#l.add(e.annotationElementId),e.deleted=!0}isDeletedAnnotationElement(e){return this.#l.has(e)}removeDeletedAnnotationElement(e){this.#l.delete(e.annotationElementId),e.deleted=!1}#G(e){let u=this.#i.get(e.pageIndex);u?u.addOrRebuild(e):this.addEditor(e)}setActiveEditor(e){this.#t!==e&&(this.#t=e,e&&this.#H(e.propertiesToUpdate))}toggleSelected(e){if(this.#h.has(e)){this.#h.delete(e),e.unselect(),this.#v({hasSelectedEditor:this.hasSelection});return}this.#h.add(e),e.select(),this.#H(e.propertiesToUpdate),this.#v({hasSelectedEditor:!0})}setSelected(e){for(let u of this.#h)u!==e&&u.unselect();this.#h.clear(),this.#h.add(e),e.select(),this.#H(e.propertiesToUpdate),this.#v({hasSelectedEditor:!0})}isSelected(e){return this.#h.has(e)}unselect(e){e.unselect(),this.#h.delete(e),this.#v({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#h.size!==0}undo(){this.#a.undo(),this.#v({hasSomethingToUndo:this.#a.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#W()})}redo(){this.#a.redo(),this.#v({hasSomethingToUndo:!0,hasSomethingToRedo:this.#a.hasSomethingToRedo(),isEmpty:this.#W()})}addCommands(e){this.#a.add(e),this.#v({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#W()})}#W(){if(this.#e.size===0)return!0;if(this.#e.size===1)for(let e of this.#e.values())return e.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;let e=[...this.#h],u=()=>{for(let m of e)m.remove()},f=()=>{for(let m of e)this.#G(m)};this.addCommands({cmd:u,undo:f,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#z(e){this.#h.clear();for(let u of e)u.isEmpty()||(this.#h.add(u),u.select());this.#v({hasSelectedEditor:!0})}selectAll(){for(let e of this.#h)e.commit();this.#z(this.#e.values())}unselectAll(){if(this.#t){this.#t.commitOrRemove();return}if(this.hasSelection){for(let e of this.#h)e.unselect();this.#h.clear(),this.#v({hasSelectedEditor:!1})}}translateSelectedEditors(e,u,f=!1){if(f||this.commitOrRemove(),!this.hasSelection)return;this.#y[0]+=e,this.#y[1]+=u;let[m,C]=this.#y,S=[...this.#h],p=1e3;this.#P&&clearTimeout(this.#P),this.#P=setTimeout(()=>{this.#P=null,this.#y[0]=this.#y[1]=0,this.addCommands({cmd:()=>{for(let A of S)this.#e.has(A.id)&&A.translateInPage(m,C)},undo:()=>{for(let A of S)this.#e.has(A.id)&&A.translateInPage(-m,-C)},mustExec:!1})},p);for(let A of S)A.translateInPage(e,u)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#c=new Map;for(let e of this.#h)this.#c.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#c)return!1;this.disableUserSelect(!1);let e=this.#c;this.#c=null;let u=!1;for(let[{x:m,y:C,pageIndex:S},p]of e)p.newX=m,p.newY=C,p.newPageIndex=S,u||=m!==p.savedX||C!==p.savedY||S!==p.savedPageIndex;if(!u)return!1;let f=(m,C,S,p)=>{if(this.#e.has(m.id)){let A=this.#i.get(p);A?m._setParentAndPosition(A,C,S):(m.pageIndex=p,m.x=C,m.y=S)}};return this.addCommands({cmd:()=>{for(let[m,{newX:C,newY:S,newPageIndex:p}]of e)f(m,C,S,p)},undo:()=>{for(let[m,{savedX:C,savedY:S,savedPageIndex:p}]of e)f(m,C,S,p)},mustExec:!0}),!0}dragSelectedEditors(e,u){if(this.#c)for(let f of this.#c.keys())f.drag(e,u)}rebuild(e){if(e.parent===null){let u=this.getLayer(e.pageIndex);u?(u.changeParent(e),u.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}isActive(e){return this.#t===e}getActive(){return this.#t}getMode(){return this.#g}get imageManager(){return(0,o.shadow)(this,"imageManager",new N)}}return l})();r.AnnotationEditorUIManager=i},(H,r,k)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.StatTimer=r.RenderingCancelledException=r.PixelsPerInch=r.PageViewport=r.PDFDateString=r.DOMStandardFontDataFactory=r.DOMSVGFactory=r.DOMFilterFactory=r.DOMCanvasFactory=r.DOMCMapReaderFactory=void 0,r.deprecated=I,r.getColorValues=it,r.getCurrentTransform=Z,r.getCurrentTransformInverse=Q,r.getFilenameFromUrl=f,r.getPdfFilenameFromUrl=m,r.getRGB=X,r.getXfaPageViewport=G,r.isDataScheme=e,r.isPdfFile=u,r.isValidFetchUrl=S,r.loadScript=A,r.noContextMenu=p,r.setLayerDimensions=nt;var o=k(7),y=k(1);let O="http://www.w3.org/2000/svg";class M{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}r.PixelsPerInch=M;class B extends o.BaseFilterFactory{#t;#e;#i;#s;#o;#a;#r;#l;#c;#n;#f=0;constructor({docId:F,ownerDocument:b=globalThis.document}={}){super(),this.#i=F,this.#s=b}get#d(){return this.#t||=new Map}get#u(){if(!this.#e){let F=this.#s.createElement("div"),{style:b}=F;b.visibility="hidden",b.contain="strict",b.width=b.height=0,b.position="absolute",b.top=b.left=0,b.zIndex=-1;let c=this.#s.createElementNS(O,"svg");c.setAttribute("width",0),c.setAttribute("height",0),this.#e=this.#s.createElementNS(O,"defs"),F.append(c),c.append(this.#e),this.#s.body.append(F)}return this.#e}addFilter(F){if(!F)return"none";let b=this.#d.get(F);if(b)return b;let c,d,_,P;if(F.length===1){let n=F[0],g=new Array(256);for(let v=0;v<256;v++)g[v]=n[v]/255;P=c=d=_=g.join(",")}else{let[n,g,v]=F,w=new Array(256),T=new Array(256),L=new Array(256);for(let j=0;j<256;j++)w[j]=n[j]/255,T[j]=g[j]/255,L[j]=v[j]/255;c=w.join(","),d=T.join(","),_=L.join(","),P=`${c}${d}${_}`}if(b=this.#d.get(P),b)return this.#d.set(F,b),b;let x=`g_${this.#i}_transfer_map_${this.#f++}`,D=`url(#${x})`;this.#d.set(F,D),this.#d.set(P,D);let E=this.#b(x);return this.#g(c,d,_,E),D}addHCMFilter(F,b){let c=`${F}-${b}`;if(this.#a===c)return this.#r;if(this.#a=c,this.#r="none",this.#o?.remove(),!F||!b)return this.#r;let d=this.#h(F);F=y.Util.makeHexColor(...d);let _=this.#h(b);if(b=y.Util.makeHexColor(..._),this.#u.style.color="",F==="#000000"&&b==="#ffffff"||F===b)return this.#r;let P=new Array(256);for(let g=0;g<=255;g++){let v=g/255;P[g]=v<=.03928?v/12.92:((v+.055)/1.055)**2.4}let x=P.join(","),D=`g_${this.#i}_hcm_filter`,E=this.#l=this.#b(D);this.#g(x,x,x,E),this.#p(E);let n=(g,v)=>{let w=d[g]/255,T=_[g]/255,L=new Array(v+1);for(let j=0;j<=v;j++)L[j]=w+j/v*(T-w);return L.join(",")};return this.#g(n(0,5),n(1,5),n(2,5),E),this.#r=`url(#${D})`,this.#r}addHighlightHCMFilter(F,b,c,d){let _=`${F}-${b}-${c}-${d}`;if(this.#c===_)return this.#n;if(this.#c=_,this.#n="none",this.#l?.remove(),!F||!b)return this.#n;let[P,x]=[F,b].map(this.#h.bind(this)),D=Math.round(.2126*P[0]+.7152*P[1]+.0722*P[2]),E=Math.round(.2126*x[0]+.7152*x[1]+.0722*x[2]),[n,g]=[c,d].map(this.#h.bind(this));E<D&&([D,E,n,g]=[E,D,g,n]),this.#u.style.color="";let v=(L,j,V)=>{let st=new Array(256),q=(E-D)/V,$=L/255,Y=(j-L)/(255*V),K=0;for(let tt=0;tt<=V;tt++){let rt=Math.round(D+tt*q),ot=$+tt*Y;for(let lt=K;lt<=rt;lt++)st[lt]=ot;K=rt+1}for(let tt=K;tt<256;tt++)st[tt]=st[K-1];return st.join(",")},w=`g_${this.#i}_hcm_highlight_filter`,T=this.#l=this.#b(w);return this.#p(T),this.#g(v(n[0],g[0],5),v(n[1],g[1],5),v(n[2],g[2],5),T),this.#n=`url(#${w})`,this.#n}destroy(F=!1){F&&(this.#r||this.#n)||(this.#e&&(this.#e.parentNode.parentNode.remove(),this.#e=null),this.#t&&(this.#t.clear(),this.#t=null),this.#f=0)}#p(F){let b=this.#s.createElementNS(O,"feColorMatrix");b.setAttribute("type","matrix"),b.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),F.append(b)}#b(F){let b=this.#s.createElementNS(O,"filter");return b.setAttribute("color-interpolation-filters","sRGB"),b.setAttribute("id",F),this.#u.append(b),b}#m(F,b,c){let d=this.#s.createElementNS(O,b);d.setAttribute("type","discrete"),d.setAttribute("tableValues",c),F.append(d)}#g(F,b,c,d){let _=this.#s.createElementNS(O,"feComponentTransfer");d.append(_),this.#m(_,"feFuncR",F),this.#m(_,"feFuncG",b),this.#m(_,"feFuncB",c)}#h(F){return this.#u.style.color=F,X(getComputedStyle(this.#u).getPropertyValue("color"))}}r.DOMFilterFactory=B;class N extends o.BaseCanvasFactory{constructor({ownerDocument:F=globalThis.document}={}){super(),this._document=F}_createCanvas(F,b){let c=this._document.createElement("canvas");return c.width=F,c.height=b,c}}r.DOMCanvasFactory=N;function h(J,F=!1){return dt(this,null,function*(){if(S(J,document.baseURI)){let b=yield fetch(J);if(!b.ok)throw new Error(b.statusText);return F?new Uint8Array(yield b.arrayBuffer()):(0,y.stringToBytes)(yield b.text())}return new Promise((b,c)=>{let d=new XMLHttpRequest;d.open("GET",J,!0),F&&(d.responseType="arraybuffer"),d.onreadystatechange=()=>{if(d.readyState===XMLHttpRequest.DONE){if(d.status===200||d.status===0){let _;if(F&&d.response?_=new Uint8Array(d.response):!F&&d.responseText&&(_=(0,y.stringToBytes)(d.responseText)),_){b(_);return}}c(new Error(d.statusText))}},d.send(null)})})}class s extends o.BaseCMapReaderFactory{_fetchData(F,b){return h(F,this.isCompressed).then(c=>({cMapData:c,compressionType:b}))}}r.DOMCMapReaderFactory=s;class t extends o.BaseStandardFontDataFactory{_fetchData(F){return h(F,!0)}}r.DOMStandardFontDataFactory=t;class i extends o.BaseSVGFactory{_createSVG(F){return document.createElementNS(O,F)}}r.DOMSVGFactory=i;class l{constructor({viewBox:F,scale:b,rotation:c,offsetX:d=0,offsetY:_=0,dontFlip:P=!1}){this.viewBox=F,this.scale=b,this.rotation=c,this.offsetX=d,this.offsetY=_;let x=(F[2]+F[0])/2,D=(F[3]+F[1])/2,E,n,g,v;switch(c%=360,c<0&&(c+=360),c){case 180:E=-1,n=0,g=0,v=1;break;case 90:E=0,n=1,g=1,v=0;break;case 270:E=0,n=-1,g=-1,v=0;break;case 0:E=1,n=0,g=0,v=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}P&&(g=-g,v=-v);let w,T,L,j;E===0?(w=Math.abs(D-F[1])*b+d,T=Math.abs(x-F[0])*b+_,L=(F[3]-F[1])*b,j=(F[2]-F[0])*b):(w=Math.abs(x-F[0])*b+d,T=Math.abs(D-F[1])*b+_,L=(F[2]-F[0])*b,j=(F[3]-F[1])*b),this.transform=[E*b,n*b,g*b,v*b,w-E*b*x-g*b*D,T-n*b*x-v*b*D],this.width=L,this.height=j}get rawDims(){let{viewBox:F}=this;return(0,y.shadow)(this,"rawDims",{pageWidth:F[2]-F[0],pageHeight:F[3]-F[1],pageX:F[0],pageY:F[1]})}clone({scale:F=this.scale,rotation:b=this.rotation,offsetX:c=this.offsetX,offsetY:d=this.offsetY,dontFlip:_=!1}={}){return new l({viewBox:this.viewBox.slice(),scale:F,rotation:b,offsetX:c,offsetY:d,dontFlip:_})}convertToViewportPoint(F,b){return y.Util.applyTransform([F,b],this.transform)}convertToViewportRectangle(F){let b=y.Util.applyTransform([F[0],F[1]],this.transform),c=y.Util.applyTransform([F[2],F[3]],this.transform);return[b[0],b[1],c[0],c[1]]}convertToPdfPoint(F,b){return y.Util.applyInverseTransform([F,b],this.transform)}}r.PageViewport=l;class a extends y.BaseException{constructor(F,b=0){super(F,"RenderingCancelledException"),this.extraDelay=b}}r.RenderingCancelledException=a;function e(J){let F=J.length,b=0;for(;b<F&&J[b].trim()==="";)b++;return J.substring(b,b+5).toLowerCase()==="data:"}function u(J){return typeof J=="string"&&/\.pdf$/i.test(J)}function f(J,F=!1){return F||([J]=J.split(/[#?]/,1)),J.substring(J.lastIndexOf("/")+1)}function m(J,F="document.pdf"){if(typeof J!="string")return F;if(e(J))return(0,y.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),F;let b=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,c=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,d=b.exec(J),_=c.exec(d[1])||c.exec(d[2])||c.exec(d[3]);if(_&&(_=_[0],_.includes("%")))try{_=c.exec(decodeURIComponent(_))[0]}catch{}return _||F}class C{started=Object.create(null);times=[];time(F){F in this.started&&(0,y.warn)(`Timer is already running for ${F}`),this.started[F]=Date.now()}timeEnd(F){F in this.started||(0,y.warn)(`Timer has not been started for ${F}`),this.times.push({name:F,start:this.started[F],end:Date.now()}),delete this.started[F]}toString(){let F=[],b=0;for(let{name:c}of this.times)b=Math.max(c.length,b);for(let{name:c,start:d,end:_}of this.times)F.push(`${c.padEnd(b)} ${_-d}ms
`);return F.join("")}}r.StatTimer=C;function S(J,F){try{let{protocol:b}=F?new URL(J,F):new URL(J);return b==="http:"||b==="https:"}catch{return!1}}function p(J){J.preventDefault()}function A(J,F=!1){return new Promise((b,c)=>{let d=document.createElement("script");d.src=J,d.onload=function(_){F&&d.remove(),b(_)},d.onerror=function(){c(new Error(`Cannot load script at: ${d.src}`))},(document.head||document.documentElement).append(d)})}function I(J){console.log("Deprecated API usage: "+J)}let U;class R{static toDateObject(F){if(!F||typeof F!="string")return null;U||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");let b=U.exec(F);if(!b)return null;let c=parseInt(b[1],10),d=parseInt(b[2],10);d=d>=1&&d<=12?d-1:0;let _=parseInt(b[3],10);_=_>=1&&_<=31?_:1;let P=parseInt(b[4],10);P=P>=0&&P<=23?P:0;let x=parseInt(b[5],10);x=x>=0&&x<=59?x:0;let D=parseInt(b[6],10);D=D>=0&&D<=59?D:0;let E=b[7]||"Z",n=parseInt(b[8],10);n=n>=0&&n<=23?n:0;let g=parseInt(b[9],10)||0;return g=g>=0&&g<=59?g:0,E==="-"?(P+=n,x+=g):E==="+"&&(P-=n,x-=g),new Date(Date.UTC(c,d,_,P,x,D))}}r.PDFDateString=R;function G(J,{scale:F=1,rotation:b=0}){let{width:c,height:d}=J.attributes.style,_=[0,0,parseInt(c),parseInt(d)];return new l({viewBox:_,scale:F,rotation:b})}function X(J){if(J.startsWith("#")){let F=parseInt(J.slice(1),16);return[(F&16711680)>>16,(F&65280)>>8,F&255]}return J.startsWith("rgb(")?J.slice(4,-1).split(",").map(F=>parseInt(F)):J.startsWith("rgba(")?J.slice(5,-1).split(",").map(F=>parseInt(F)).slice(0,3):((0,y.warn)(`Not a valid color format: "${J}"`),[0,0,0])}function it(J){let F=document.createElement("span");F.style.visibility="hidden",document.body.append(F);for(let b of J.keys()){F.style.color=b;let c=window.getComputedStyle(F).color;J.set(b,X(c))}F.remove()}function Z(J){let{a:F,b,c,d,e:_,f:P}=J.getTransform();return[F,b,c,d,_,P]}function Q(J){let{a:F,b,c,d,e:_,f:P}=J.getTransform().invertSelf();return[F,b,c,d,_,P]}function nt(J,F,b=!1,c=!0){if(F instanceof l){let{pageWidth:d,pageHeight:_}=F.rawDims,{style:P}=J,x=y.FeatureTest.isCSSRoundSupported,D=`var(--scale-factor) * ${d}px`,E=`var(--scale-factor) * ${_}px`,n=x?`round(${D}, 1px)`:`calc(${D})`,g=x?`round(${E}, 1px)`:`calc(${E})`;!b||F.rotation%180===0?(P.width=n,P.height=g):(P.width=g,P.height=n)}c&&J.setAttribute("data-main-rotation",F.rotation)}},(H,r,k)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BaseStandardFontDataFactory=r.BaseSVGFactory=r.BaseFilterFactory=r.BaseCanvasFactory=r.BaseCMapReaderFactory=void 0;var o=k(1);class y{constructor(){this.constructor===y&&(0,o.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(s){return"none"}addHCMFilter(s,t){return"none"}addHighlightHCMFilter(s,t,i,l){return"none"}destroy(s=!1){}}r.BaseFilterFactory=y;class O{constructor(){this.constructor===O&&(0,o.unreachable)("Cannot initialize BaseCanvasFactory.")}create(s,t){if(s<=0||t<=0)throw new Error("Invalid canvas size");let i=this._createCanvas(s,t);return{canvas:i,context:i.getContext("2d")}}reset(s,t,i){if(!s.canvas)throw new Error("Canvas is not specified");if(t<=0||i<=0)throw new Error("Invalid canvas size");s.canvas.width=t,s.canvas.height=i}destroy(s){if(!s.canvas)throw new Error("Canvas is not specified");s.canvas.width=0,s.canvas.height=0,s.canvas=null,s.context=null}_createCanvas(s,t){(0,o.unreachable)("Abstract method `_createCanvas` called.")}}r.BaseCanvasFactory=O;class M{constructor({baseUrl:s=null,isCompressed:t=!0}){this.constructor===M&&(0,o.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=s,this.isCompressed=t}fetch(t){return dt(this,arguments,function*({name:s}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!s)throw new Error("CMap name must be specified.");let i=this.baseUrl+s+(this.isCompressed?".bcmap":""),l=this.isCompressed?o.CMapCompressionType.BINARY:o.CMapCompressionType.NONE;return this._fetchData(i,l).catch(a=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${i}`)})})}_fetchData(s,t){(0,o.unreachable)("Abstract method `_fetchData` called.")}}r.BaseCMapReaderFactory=M;class B{constructor({baseUrl:s=null}){this.constructor===B&&(0,o.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=s}fetch(t){return dt(this,arguments,function*({filename:s}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!s)throw new Error("Font filename must be specified.");let i=`${this.baseUrl}${s}`;return this._fetchData(i).catch(l=>{throw new Error(`Unable to load font data at: ${i}`)})})}_fetchData(s){(0,o.unreachable)("Abstract method `_fetchData` called.")}}r.BaseStandardFontDataFactory=B;class N{constructor(){this.constructor===N&&(0,o.unreachable)("Cannot initialize BaseSVGFactory.")}create(s,t,i=!1){if(s<=0||t<=0)throw new Error("Invalid SVG dimensions");let l=this._createSVG("svg:svg");return l.setAttribute("version","1.1"),i||(l.setAttribute("width",`${s}px`),l.setAttribute("height",`${t}px`)),l.setAttribute("preserveAspectRatio","none"),l.setAttribute("viewBox",`0 0 ${s} ${t}`),l}createElement(s){if(typeof s!="string")throw new Error("Invalid SVG element type");return this._createSVG(s)}_createSVG(s){(0,o.unreachable)("Abstract method `_createSVG` called.")}}r.BaseSVGFactory=N},(H,r,k)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.MurmurHash3_64=void 0;var o=k(1);let y=3285377520,O=4294901760,M=65535;class B{constructor(h){this.h1=h?h&4294967295:y,this.h2=h?h&4294967295:y}update(h){let s,t;if(typeof h=="string"){s=new Uint8Array(h.length*2),t=0;for(let I=0,U=h.length;I<U;I++){let R=h.charCodeAt(I);R<=255?s[t++]=R:(s[t++]=R>>>8,s[t++]=R&255)}}else if((0,o.isArrayBuffer)(h))s=h.slice(),t=s.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");let i=t>>2,l=t-i*4,a=new Uint32Array(s.buffer,0,i),e=0,u=0,f=this.h1,m=this.h2,C=3432918353,S=461845907,p=C&M,A=S&M;for(let I=0;I<i;I++)I&1?(e=a[I],e=e*C&O|e*p&M,e=e<<15|e>>>17,e=e*S&O|e*A&M,f^=e,f=f<<13|f>>>19,f=f*5+3864292196):(u=a[I],u=u*C&O|u*p&M,u=u<<15|u>>>17,u=u*S&O|u*A&M,m^=u,m=m<<13|m>>>19,m=m*5+3864292196);switch(e=0,l){case 3:e^=s[i*4+2]<<16;case 2:e^=s[i*4+1]<<8;case 1:e^=s[i*4],e=e*C&O|e*p&M,e=e<<15|e>>>17,e=e*S&O|e*A&M,i&1?f^=e:m^=e}this.h1=f,this.h2=m}hexdigest(){let h=this.h1,s=this.h2;return h^=s>>>1,h=h*3981806797&O|h*36045&M,s=s*4283543511&O|((s<<16|h>>>16)*2950163797&O)>>>16,h^=s>>>1,h=h*444984403&O|h*60499&M,s=s*3301882366&O|((s<<16|h>>>16)*3120437893&O)>>>16,h^=s>>>1,(h>>>0).toString(16).padStart(8,"0")+(s>>>0).toString(16).padStart(8,"0")}}r.MurmurHash3_64=B},(H,r,k)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.FontLoader=r.FontFaceObject=void 0;var o=k(1);class y{#t=new Set;constructor({ownerDocument:B=globalThis.document,styleElement:N=null}){this._document=B,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(B){this.nativeFontFaces.add(B),this._document.fonts.add(B)}removeNativeFontFace(B){this.nativeFontFaces.delete(B),this._document.fonts.delete(B)}insertRule(B){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));let N=this.styleElement.sheet;N.insertRule(B,N.cssRules.length)}clear(){for(let B of this.nativeFontFaces)this._document.fonts.delete(B);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}loadSystemFont(B){return dt(this,null,function*(){if(!(!B||this.#t.has(B.loadedName))){if((0,o.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){let{loadedName:N,src:h,style:s}=B,t=new FontFace(N,h,s);this.addNativeFontFace(t);try{yield t.load(),this.#t.add(N)}catch{(0,o.warn)(`Cannot load system font: ${B.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(t)}return}(0,o.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}})}bind(B){return dt(this,null,function*(){if(B.attached||B.missingFile&&!B.systemFontInfo)return;if(B.attached=!0,B.systemFontInfo){yield this.loadSystemFont(B.systemFontInfo);return}if(this.isFontLoadingAPISupported){let h=B.createNativeFontFace();if(h){this.addNativeFontFace(h);try{yield h.loaded}catch(s){throw(0,o.warn)(`Failed to load font '${h.family}': '${s}'.`),B.disableFontFace=!0,s}}return}let N=B.createFontFaceRule();if(N){if(this.insertRule(N),this.isSyncFontLoadingSupported)return;yield new Promise(h=>{let s=this._queueLoadingCallback(h);this._prepareFontLoadEvent(B,s)})}})}get isFontLoadingAPISupported(){let B=!!this._document?.fonts;return(0,o.shadow)(this,"isFontLoadingAPISupported",B)}get isSyncFontLoadingSupported(){let B=!1;return(o.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(B=!0),(0,o.shadow)(this,"isSyncFontLoadingSupported",B)}_queueLoadingCallback(B){function N(){for((0,o.assert)(!s.done,"completeRequest() cannot be called twice."),s.done=!0;h.length>0&&h[0].done;){let t=h.shift();setTimeout(t.callback,0)}}let{loadingRequests:h}=this,s={done:!1,complete:N,callback:B};return h.push(s),s}get _loadTestFont(){let B=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,o.shadow)(this,"_loadTestFont",B)}_prepareFontLoadEvent(B,N){function h(G,X){return G.charCodeAt(X)<<24|G.charCodeAt(X+1)<<16|G.charCodeAt(X+2)<<8|G.charCodeAt(X+3)&255}function s(G,X,it,Z){let Q=G.substring(0,X),nt=G.substring(X+it);return Q+Z+nt}let t,i,l=this._document.createElement("canvas");l.width=1,l.height=1;let a=l.getContext("2d"),e=0;function u(G,X){if(++e>30){(0,o.warn)("Load test font never loaded."),X();return}if(a.font="30px "+G,a.fillText(".",0,20),a.getImageData(0,0,1,1).data[3]>0){X();return}setTimeout(u.bind(null,G,X))}let f=`lt${Date.now()}${this.loadTestFontId++}`,m=this._loadTestFont;m=s(m,976,f.length,f);let S=16,p=1482184792,A=h(m,S);for(t=0,i=f.length-3;t<i;t+=4)A=A-p+h(f,t)|0;t<f.length&&(A=A-p+h(f+"XXX",t)|0),m=s(m,S,4,(0,o.string32)(A));let I=`url(data:font/opentype;base64,${btoa(m)});`,U=`@font-face {font-family:"${f}";src:${I}}`;this.insertRule(U);let R=this._document.createElement("div");R.style.visibility="hidden",R.style.width=R.style.height="10px",R.style.position="absolute",R.style.top=R.style.left="0px";for(let G of[B.loadedName,f]){let X=this._document.createElement("span");X.textContent="Hi",X.style.fontFamily=G,R.append(X)}this._document.body.append(R),u(f,()=>{R.remove(),N.complete()})}}r.FontLoader=y;class O{constructor(B,{isEvalSupported:N=!0,disableFontFace:h=!1,ignoreErrors:s=!1,inspectFont:t=null}){this.compiledGlyphs=Object.create(null);for(let i in B)this[i]=B[i];this.isEvalSupported=N!==!1,this.disableFontFace=h===!0,this.ignoreErrors=s===!0,this._inspectFont=t}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let B;if(!this.cssFontInfo)B=new FontFace(this.loadedName,this.data,{});else{let N={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(N.style=`oblique ${this.cssFontInfo.italicAngle}deg`),B=new FontFace(this.cssFontInfo.fontFamily,this.data,N)}return this._inspectFont?.(this),B}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;let B=(0,o.bytesToString)(this.data),N=`url(data:${this.mimetype};base64,${btoa(B)});`,h;if(!this.cssFontInfo)h=`@font-face {font-family:"${this.loadedName}";src:${N}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),h=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${N}}`}return this._inspectFont?.(this,N),h}getPathGenerator(B,N){if(this.compiledGlyphs[N]!==void 0)return this.compiledGlyphs[N];let h;try{h=B.get(this.loadedName+"_path_"+N)}catch(s){if(!this.ignoreErrors)throw s;return(0,o.warn)(`getPathGenerator - ignoring character: "${s}".`),this.compiledGlyphs[N]=function(t,i){}}if(this.isEvalSupported&&o.FeatureTest.isEvalSupported){let s=[];for(let t of h){let i=t.args!==void 0?t.args.join(","):"";s.push("c.",t.cmd,"(",i,`);
`)}return this.compiledGlyphs[N]=new Function("c","size",s.join(""))}return this.compiledGlyphs[N]=function(s,t){for(let i of h)i.cmd==="scale"&&(i.args=[t,-t]),s[i.cmd].apply(s,i.args)}}}r.FontFaceObject=O},(H,r,k)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.NodeStandardFontDataFactory=r.NodeFilterFactory=r.NodeCanvasFactory=r.NodeCMapReaderFactory=void 0;var o=k(7),y=k(1);let O=function(s){return new Promise((t,i)=>{Nt().readFile(s,(a,e)=>{if(a||!e){i(new Error(a));return}t(new Uint8Array(e))})})};class M extends o.BaseFilterFactory{}r.NodeFilterFactory=M;class B extends o.BaseCanvasFactory{_createCanvas(t,i){return Xt().createCanvas(t,i)}}r.NodeCanvasFactory=B;class N extends o.BaseCMapReaderFactory{_fetchData(t,i){return O(t).then(l=>({cMapData:l,compressionType:i}))}}r.NodeCMapReaderFactory=N;class h extends o.BaseStandardFontDataFactory{_fetchData(t){return O(t)}}r.NodeStandardFontDataFactory=h},(H,r,k)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CanvasGraphics=void 0;var o=k(1),y=k(6),O=k(12),M=k(13);let B=16,N=100,h=4096,s=15,t=10,i=1e3,l=16;function a(b,c){if(b._removeMirroring)throw new Error("Context is already forwarding operations.");b.__originalSave=b.save,b.__originalRestore=b.restore,b.__originalRotate=b.rotate,b.__originalScale=b.scale,b.__originalTranslate=b.translate,b.__originalTransform=b.transform,b.__originalSetTransform=b.setTransform,b.__originalResetTransform=b.resetTransform,b.__originalClip=b.clip,b.__originalMoveTo=b.moveTo,b.__originalLineTo=b.lineTo,b.__originalBezierCurveTo=b.bezierCurveTo,b.__originalRect=b.rect,b.__originalClosePath=b.closePath,b.__originalBeginPath=b.beginPath,b._removeMirroring=()=>{b.save=b.__originalSave,b.restore=b.__originalRestore,b.rotate=b.__originalRotate,b.scale=b.__originalScale,b.translate=b.__originalTranslate,b.transform=b.__originalTransform,b.setTransform=b.__originalSetTransform,b.resetTransform=b.__originalResetTransform,b.clip=b.__originalClip,b.moveTo=b.__originalMoveTo,b.lineTo=b.__originalLineTo,b.bezierCurveTo=b.__originalBezierCurveTo,b.rect=b.__originalRect,b.closePath=b.__originalClosePath,b.beginPath=b.__originalBeginPath,delete b._removeMirroring},b.save=function(){c.save(),this.__originalSave()},b.restore=function(){c.restore(),this.__originalRestore()},b.translate=function(_,P){c.translate(_,P),this.__originalTranslate(_,P)},b.scale=function(_,P){c.scale(_,P),this.__originalScale(_,P)},b.transform=function(_,P,x,D,E,n){c.transform(_,P,x,D,E,n),this.__originalTransform(_,P,x,D,E,n)},b.setTransform=function(_,P,x,D,E,n){c.setTransform(_,P,x,D,E,n),this.__originalSetTransform(_,P,x,D,E,n)},b.resetTransform=function(){c.resetTransform(),this.__originalResetTransform()},b.rotate=function(_){c.rotate(_),this.__originalRotate(_)},b.clip=function(_){c.clip(_),this.__originalClip(_)},b.moveTo=function(d,_){c.moveTo(d,_),this.__originalMoveTo(d,_)},b.lineTo=function(d,_){c.lineTo(d,_),this.__originalLineTo(d,_)},b.bezierCurveTo=function(d,_,P,x,D,E){c.bezierCurveTo(d,_,P,x,D,E),this.__originalBezierCurveTo(d,_,P,x,D,E)},b.rect=function(d,_,P,x){c.rect(d,_,P,x),this.__originalRect(d,_,P,x)},b.closePath=function(){c.closePath(),this.__originalClosePath()},b.beginPath=function(){c.beginPath(),this.__originalBeginPath()}}class e{constructor(c){this.canvasFactory=c,this.cache=Object.create(null)}getCanvas(c,d,_){let P;return this.cache[c]!==void 0?(P=this.cache[c],this.canvasFactory.reset(P,d,_)):(P=this.canvasFactory.create(d,_),this.cache[c]=P),P}delete(c){delete this.cache[c]}clear(){for(let c in this.cache){let d=this.cache[c];this.canvasFactory.destroy(d),delete this.cache[c]}}}function u(b,c,d,_,P,x,D,E,n,g){let[v,w,T,L,j,V]=(0,y.getCurrentTransform)(b);if(w===0&&T===0){let $=D*v+j,Y=Math.round($),K=E*L+V,tt=Math.round(K),rt=(D+n)*v+j,ot=Math.abs(Math.round(rt)-Y)||1,lt=(E+g)*L+V,ct=Math.abs(Math.round(lt)-tt)||1;return b.setTransform(Math.sign(v),0,0,Math.sign(L),Y,tt),b.drawImage(c,d,_,P,x,0,0,ot,ct),b.setTransform(v,w,T,L,j,V),[ot,ct]}if(v===0&&L===0){let $=E*T+j,Y=Math.round($),K=D*w+V,tt=Math.round(K),rt=(E+g)*T+j,ot=Math.abs(Math.round(rt)-Y)||1,lt=(D+n)*w+V,ct=Math.abs(Math.round(lt)-tt)||1;return b.setTransform(0,Math.sign(w),Math.sign(T),0,Y,tt),b.drawImage(c,d,_,P,x,0,0,ct,ot),b.setTransform(v,w,T,L,j,V),[ct,ot]}b.drawImage(c,d,_,P,x,D,E,n,g);let st=Math.hypot(v,w),q=Math.hypot(T,L);return[st*n,q*g]}function f(b){let{width:c,height:d}=b;if(c>i||d>i)return null;let _=1e3,P=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),x=c+1,D=new Uint8Array(x*(d+1)),E,n,g,v=c+7&-8,w=new Uint8Array(v*d),T=0;for(let q of b.data){let $=128;for(;$>0;)w[T++]=q&$?0:255,$>>=1}let L=0;for(T=0,w[T]!==0&&(D[0]=1,++L),n=1;n<c;n++)w[T]!==w[T+1]&&(D[n]=w[T]?2:1,++L),T++;for(w[T]!==0&&(D[n]=2,++L),E=1;E<d;E++){T=E*v,g=E*x,w[T-v]!==w[T]&&(D[g]=w[T]?1:8,++L);let q=(w[T]?4:0)+(w[T-v]?8:0);for(n=1;n<c;n++)q=(q>>2)+(w[T+1]?4:0)+(w[T-v+1]?8:0),P[q]&&(D[g+n]=P[q],++L),T++;if(w[T-v]!==w[T]&&(D[g+n]=w[T]?2:4,++L),L>_)return null}for(T=v*(d-1),g=E*x,w[T]!==0&&(D[g]=8,++L),n=1;n<c;n++)w[T]!==w[T+1]&&(D[g+n]=w[T]?4:8,++L),T++;if(w[T]!==0&&(D[g+n]=4,++L),L>_)return null;let j=new Int32Array([0,x,-1,0,-x,0,0,0,1]),V=new Path2D;for(E=0;L&&E<=d;E++){let q=E*x,$=q+c;for(;q<$&&!D[q];)q++;if(q===$)continue;V.moveTo(q%x,E);let Y=q,K=D[q];do{let tt=j[K];do q+=tt;while(!D[q]);let rt=D[q];rt!==5&&rt!==10?(K=rt,D[q]=0):(K=rt&51*K>>4,D[q]&=K>>2|K<<2),V.lineTo(q%x,q/x|0),D[q]||--L}while(Y!==q);--E}return w=null,D=null,function(q){q.save(),q.scale(1/c,-1/d),q.translate(0,-d),q.fill(V),q.beginPath(),q.restore()}}class m{constructor(c,d){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=o.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=o.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=o.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,c,d])}clone(){let c=Object.create(this);return c.clipBox=this.clipBox.slice(),c}setCurrentPoint(c,d){this.x=c,this.y=d}updatePathMinMax(c,d,_){[d,_]=o.Util.applyTransform([d,_],c),this.minX=Math.min(this.minX,d),this.minY=Math.min(this.minY,_),this.maxX=Math.max(this.maxX,d),this.maxY=Math.max(this.maxY,_)}updateRectMinMax(c,d){let _=o.Util.applyTransform(d,c),P=o.Util.applyTransform(d.slice(2),c);this.minX=Math.min(this.minX,_[0],P[0]),this.minY=Math.min(this.minY,_[1],P[1]),this.maxX=Math.max(this.maxX,_[0],P[0]),this.maxY=Math.max(this.maxY,_[1],P[1])}updateScalingPathMinMax(c,d){o.Util.scaleMinMax(c,d),this.minX=Math.min(this.minX,d[0]),this.maxX=Math.max(this.maxX,d[1]),this.minY=Math.min(this.minY,d[2]),this.maxY=Math.max(this.maxY,d[3])}updateCurvePathMinMax(c,d,_,P,x,D,E,n,g,v){let w=o.Util.bezierBoundingBox(d,_,P,x,D,E,n,g);if(v){v[0]=Math.min(v[0],w[0],w[2]),v[1]=Math.max(v[1],w[0],w[2]),v[2]=Math.min(v[2],w[1],w[3]),v[3]=Math.max(v[3],w[1],w[3]);return}this.updateRectMinMax(c,w)}getPathBoundingBox(c=O.PathType.FILL,d=null){let _=[this.minX,this.minY,this.maxX,this.maxY];if(c===O.PathType.STROKE){d||(0,o.unreachable)("Stroke bounding box must include transform.");let P=o.Util.singularValueDecompose2dScale(d),x=P[0]*this.lineWidth/2,D=P[1]*this.lineWidth/2;_[0]-=x,_[1]-=D,_[2]+=x,_[3]+=D}return _}updateClipFromPath(){let c=o.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(c||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(c){this.clipBox=c,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(c=O.PathType.FILL,d=null){return o.Util.intersect(this.clipBox,this.getPathBoundingBox(c,d))}}function C(b,c){if(typeof ImageData<"u"&&c instanceof ImageData){b.putImageData(c,0,0);return}let d=c.height,_=c.width,P=d%l,x=(d-P)/l,D=P===0?x:x+1,E=b.createImageData(_,l),n=0,g,v=c.data,w=E.data,T,L,j,V;if(c.kind===o.ImageKind.GRAYSCALE_1BPP){let st=v.byteLength,q=new Uint32Array(w.buffer,0,w.byteLength>>2),$=q.length,Y=_+7>>3,K=4294967295,tt=o.FeatureTest.isLittleEndian?4278190080:255;for(T=0;T<D;T++){for(j=T<x?l:P,g=0,L=0;L<j;L++){let rt=st-n,ot=0,lt=rt>Y?_:rt*8-7,ct=lt&-8,ht=0,ft=0;for(;ot<ct;ot+=8)ft=v[n++],q[g++]=ft&128?K:tt,q[g++]=ft&64?K:tt,q[g++]=ft&32?K:tt,q[g++]=ft&16?K:tt,q[g++]=ft&8?K:tt,q[g++]=ft&4?K:tt,q[g++]=ft&2?K:tt,q[g++]=ft&1?K:tt;for(;ot<lt;ot++)ht===0&&(ft=v[n++],ht=128),q[g++]=ft&ht?K:tt,ht>>=1}for(;g<$;)q[g++]=0;b.putImageData(E,0,T*l)}}else if(c.kind===o.ImageKind.RGBA_32BPP){for(L=0,V=_*l*4,T=0;T<x;T++)w.set(v.subarray(n,n+V)),n+=V,b.putImageData(E,0,L),L+=l;T<D&&(V=_*P*4,w.set(v.subarray(n,n+V)),b.putImageData(E,0,L))}else if(c.kind===o.ImageKind.RGB_24BPP)for(j=l,V=_*j,T=0;T<D;T++){for(T>=x&&(j=P,V=_*j),g=0,L=V;L--;)w[g++]=v[n++],w[g++]=v[n++],w[g++]=v[n++],w[g++]=255;b.putImageData(E,0,T*l)}else throw new Error(`bad image kind: ${c.kind}`)}function S(b,c){if(c.bitmap){b.drawImage(c.bitmap,0,0);return}let d=c.height,_=c.width,P=d%l,x=(d-P)/l,D=P===0?x:x+1,E=b.createImageData(_,l),n=0,g=c.data,v=E.data;for(let w=0;w<D;w++){let T=w<x?l:P;({srcPos:n}=(0,M.convertBlackAndWhiteToRGBA)({src:g,srcPos:n,dest:v,width:_,height:T,nonBlackColor:0})),b.putImageData(E,0,w*l)}}function p(b,c){let d=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(let _ of d)b[_]!==void 0&&(c[_]=b[_]);b.setLineDash!==void 0&&(c.setLineDash(b.getLineDash()),c.lineDashOffset=b.lineDashOffset)}function A(b){if(b.strokeStyle=b.fillStyle="#000000",b.fillRule="nonzero",b.globalAlpha=1,b.lineWidth=1,b.lineCap="butt",b.lineJoin="miter",b.miterLimit=10,b.globalCompositeOperation="source-over",b.font="10px sans-serif",b.setLineDash!==void 0&&(b.setLineDash([]),b.lineDashOffset=0),!o.isNodeJS){let{filter:c}=b;c!=="none"&&c!==""&&(b.filter="none")}}function I(b,c,d,_){let P=b.length;for(let x=3;x<P;x+=4){let D=b[x];if(D===0)b[x-3]=c,b[x-2]=d,b[x-1]=_;else if(D<255){let E=255-D;b[x-3]=b[x-3]*D+c*E>>8,b[x-2]=b[x-2]*D+d*E>>8,b[x-1]=b[x-1]*D+_*E>>8}}}function U(b,c,d){let _=b.length,P=1/255;for(let x=3;x<_;x+=4){let D=d?d[b[x]]:b[x];c[x]=c[x]*D*P|0}}function R(b,c,d){let _=b.length;for(let P=3;P<_;P+=4){let x=b[P-3]*77+b[P-2]*152+b[P-1]*28;c[P]=d?c[P]*d[x>>8]>>8:c[P]*x>>16}}function G(b,c,d,_,P,x,D,E,n,g,v){let w=!!x,T=w?x[0]:0,L=w?x[1]:0,j=w?x[2]:0,V=P==="Luminosity"?R:U,q=Math.min(_,Math.ceil(1048576/d));for(let $=0;$<_;$+=q){let Y=Math.min(q,_-$),K=b.getImageData(E-g,$+(n-v),d,Y),tt=c.getImageData(E,$+n,d,Y);w&&I(K.data,T,L,j),V(K.data,tt.data,D),c.putImageData(tt,E,$+n)}}function X(b,c,d,_){let P=_[0],x=_[1],D=_[2]-P,E=_[3]-x;D===0||E===0||(G(c.context,d,D,E,c.subtype,c.backdrop,c.transferMap,P,x,c.offsetX,c.offsetY),b.save(),b.globalAlpha=1,b.globalCompositeOperation="source-over",b.setTransform(1,0,0,1,0,0),b.drawImage(d.canvas,0,0),b.restore())}function it(b,c){let d=o.Util.singularValueDecompose2dScale(b);d[0]=Math.fround(d[0]),d[1]=Math.fround(d[1]);let _=Math.fround((globalThis.devicePixelRatio||1)*y.PixelsPerInch.PDF_TO_CSS_UNITS);return c!==void 0?c:d[0]<=_||d[1]<=_}let Z=["butt","round","square"],Q=["miter","round","bevel"],nt={},J={};class F{constructor(c,d,_,P,x,{optionalContentConfig:D,markedContentStack:E=null},n,g){this.ctx=c,this.current=new m(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=d,this.objs=_,this.canvasFactory=P,this.filterFactory=x,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=E||[],this.optionalContentConfig=D,this.cachedCanvases=new e(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=n,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=g,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(c,d=null){return typeof c=="string"?c.startsWith("g_")?this.commonObjs.get(c):this.objs.get(c):d}beginDrawing({transform:c,viewport:d,transparency:_=!1,background:P=null}){let x=this.ctx.canvas.width,D=this.ctx.canvas.height,E=this.ctx.fillStyle;if(this.ctx.fillStyle=P||"#ffffff",this.ctx.fillRect(0,0,x,D),this.ctx.fillStyle=E,_){let n=this.cachedCanvases.getCanvas("transparent",x,D);this.compositeCtx=this.ctx,this.transparentCanvas=n.canvas,this.ctx=n.context,this.ctx.save(),this.ctx.transform(...(0,y.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),A(this.ctx),c&&(this.ctx.transform(...c),this.outputScaleX=c[0],this.outputScaleY=c[0]),this.ctx.transform(...d.transform),this.viewportScale=d.scale,this.baseTransform=(0,y.getCurrentTransform)(this.ctx)}executeOperatorList(c,d,_,P){let x=c.argsArray,D=c.fnArray,E=d||0,n=x.length;if(n===E)return E;let g=n-E>t&&typeof _=="function",v=g?Date.now()+s:0,w=0,T=this.commonObjs,L=this.objs,j;for(;;){if(P!==void 0&&E===P.nextBreakPoint)return P.breakIt(E,_),E;if(j=D[E],j!==o.OPS.dependency)this[j].apply(this,x[E]);else for(let V of x[E]){let st=V.startsWith("g_")?T:L;if(!st.has(V))return st.get(V,_),E}if(E++,E===n)return E;if(g&&++w>t){if(Date.now()>v)return _(),E;w=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(let c of this._cachedBitmapsMap.values()){for(let d of c.values())typeof HTMLCanvasElement<"u"&&d instanceof HTMLCanvasElement&&(d.width=d.height=0);c.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){let c=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(c!=="none"){let d=this.ctx.filter;this.ctx.filter=c,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=d}}}_scaleImage(c,d){let _=c.width,P=c.height,x=Math.max(Math.hypot(d[0],d[1]),1),D=Math.max(Math.hypot(d[2],d[3]),1),E=_,n=P,g="prescale1",v,w;for(;x>2&&E>1||D>2&&n>1;){let T=E,L=n;x>2&&E>1&&(T=E>=16384?Math.floor(E/2)-1||1:Math.ceil(E/2),x/=E/T),D>2&&n>1&&(L=n>=16384?Math.floor(n/2)-1||1:Math.ceil(n)/2,D/=n/L),v=this.cachedCanvases.getCanvas(g,T,L),w=v.context,w.clearRect(0,0,T,L),w.drawImage(c,0,0,E,n,0,0,T,L),c=v.canvas,E=T,n=L,g=g==="prescale1"?"prescale2":"prescale1"}return{img:c,paintWidth:E,paintHeight:n}}_createMaskCanvas(c){let d=this.ctx,{width:_,height:P}=c,x=this.current.fillColor,D=this.current.patternFill,E=(0,y.getCurrentTransform)(d),n,g,v,w;if((c.bitmap||c.data)&&c.count>1){let ot=c.bitmap||c.data.buffer;g=JSON.stringify(D?E:[E.slice(0,4),x]),n=this._cachedBitmapsMap.get(ot),n||(n=new Map,this._cachedBitmapsMap.set(ot,n));let lt=n.get(g);if(lt&&!D){let ct=Math.round(Math.min(E[0],E[2])+E[4]),ht=Math.round(Math.min(E[1],E[3])+E[5]);return{canvas:lt,offsetX:ct,offsetY:ht}}v=lt}v||(w=this.cachedCanvases.getCanvas("maskCanvas",_,P),S(w.context,c));let T=o.Util.transform(E,[1/_,0,0,-1/P,0,0]);T=o.Util.transform(T,[1,0,0,1,0,-P]);let L=o.Util.applyTransform([0,0],T),j=o.Util.applyTransform([_,P],T),V=o.Util.normalizeRect([L[0],L[1],j[0],j[1]]),st=Math.round(V[2]-V[0])||1,q=Math.round(V[3]-V[1])||1,$=this.cachedCanvases.getCanvas("fillCanvas",st,q),Y=$.context,K=Math.min(L[0],j[0]),tt=Math.min(L[1],j[1]);Y.translate(-K,-tt),Y.transform(...T),v||(v=this._scaleImage(w.canvas,(0,y.getCurrentTransformInverse)(Y)),v=v.img,n&&D&&n.set(g,v)),Y.imageSmoothingEnabled=it((0,y.getCurrentTransform)(Y),c.interpolate),u(Y,v,0,0,v.width,v.height,0,0,_,P),Y.globalCompositeOperation="source-in";let rt=o.Util.transform((0,y.getCurrentTransformInverse)(Y),[1,0,0,1,-K,-tt]);return Y.fillStyle=D?x.getPattern(d,this,rt,O.PathType.FILL):x,Y.fillRect(0,0,_,P),n&&!D&&(this.cachedCanvases.delete("fillCanvas"),n.set(g,$.canvas)),{canvas:$.canvas,offsetX:Math.round(K),offsetY:Math.round(tt)}}setLineWidth(c){c!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=c,this.ctx.lineWidth=c}setLineCap(c){this.ctx.lineCap=Z[c]}setLineJoin(c){this.ctx.lineJoin=Q[c]}setMiterLimit(c){this.ctx.miterLimit=c}setDash(c,d){let _=this.ctx;_.setLineDash!==void 0&&(_.setLineDash(c),_.lineDashOffset=d)}setRenderingIntent(c){}setFlatness(c){}setGState(c){for(let[d,_]of c)switch(d){case"LW":this.setLineWidth(_);break;case"LC":this.setLineCap(_);break;case"LJ":this.setLineJoin(_);break;case"ML":this.setMiterLimit(_);break;case"D":this.setDash(_[0],_[1]);break;case"RI":this.setRenderingIntent(_);break;case"FL":this.setFlatness(_);break;case"Font":this.setFont(_[0],_[1]);break;case"CA":this.current.strokeAlpha=_;break;case"ca":this.current.fillAlpha=_,this.ctx.globalAlpha=_;break;case"BM":this.ctx.globalCompositeOperation=_;break;case"SMask":this.current.activeSMask=_?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(_);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){let c=this.inSMaskMode;this.current.activeSMask&&!c?this.beginSMaskMode():!this.current.activeSMask&&c&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");let c=this.ctx.canvas.width,d=this.ctx.canvas.height,_="smaskGroupAt"+this.groupLevel,P=this.cachedCanvases.getCanvas(_,c,d);this.suspendedCtx=this.ctx,this.ctx=P.context;let x=this.ctx;x.setTransform(...(0,y.getCurrentTransform)(this.suspendedCtx)),p(this.suspendedCtx,x),a(x,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),p(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(c){if(!this.current.activeSMask)return;c?(c[0]=Math.floor(c[0]),c[1]=Math.floor(c[1]),c[2]=Math.ceil(c[2]),c[3]=Math.ceil(c[3])):c=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];let d=this.current.activeSMask,_=this.suspendedCtx;X(_,d,this.ctx,c),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(p(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();let c=this.current;this.stateStack.push(c),this.current=c.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),p(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(c,d,_,P,x,D){this.ctx.transform(c,d,_,P,x,D),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(c,d,_){let P=this.ctx,x=this.current,D=x.x,E=x.y,n,g,v=(0,y.getCurrentTransform)(P),w=v[0]===0&&v[3]===0||v[1]===0&&v[2]===0,T=w?_.slice(0):null;for(let L=0,j=0,V=c.length;L<V;L++)switch(c[L]|0){case o.OPS.rectangle:D=d[j++],E=d[j++];let st=d[j++],q=d[j++],$=D+st,Y=E+q;P.moveTo(D,E),st===0||q===0?P.lineTo($,Y):(P.lineTo($,E),P.lineTo($,Y),P.lineTo(D,Y)),w||x.updateRectMinMax(v,[D,E,$,Y]),P.closePath();break;case o.OPS.moveTo:D=d[j++],E=d[j++],P.moveTo(D,E),w||x.updatePathMinMax(v,D,E);break;case o.OPS.lineTo:D=d[j++],E=d[j++],P.lineTo(D,E),w||x.updatePathMinMax(v,D,E);break;case o.OPS.curveTo:n=D,g=E,D=d[j+4],E=d[j+5],P.bezierCurveTo(d[j],d[j+1],d[j+2],d[j+3],D,E),x.updateCurvePathMinMax(v,n,g,d[j],d[j+1],d[j+2],d[j+3],D,E,T),j+=6;break;case o.OPS.curveTo2:n=D,g=E,P.bezierCurveTo(D,E,d[j],d[j+1],d[j+2],d[j+3]),x.updateCurvePathMinMax(v,n,g,D,E,d[j],d[j+1],d[j+2],d[j+3],T),D=d[j+2],E=d[j+3],j+=4;break;case o.OPS.curveTo3:n=D,g=E,D=d[j+2],E=d[j+3],P.bezierCurveTo(d[j],d[j+1],D,E,D,E),x.updateCurvePathMinMax(v,n,g,d[j],d[j+1],D,E,D,E,T),j+=4;break;case o.OPS.closePath:P.closePath();break}w&&x.updateScalingPathMinMax(v,T),x.setCurrentPoint(D,E)}closePath(){this.ctx.closePath()}stroke(c=!0){let d=this.ctx,_=this.current.strokeColor;d.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof _=="object"&&_?.getPattern?(d.save(),d.strokeStyle=_.getPattern(d,this,(0,y.getCurrentTransformInverse)(d),O.PathType.STROKE),this.rescaleAndStroke(!1),d.restore()):this.rescaleAndStroke(!0)),c&&this.consumePath(this.current.getClippedPathBoundingBox()),d.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(c=!0){let d=this.ctx,_=this.current.fillColor,P=this.current.patternFill,x=!1;P&&(d.save(),d.fillStyle=_.getPattern(d,this,(0,y.getCurrentTransformInverse)(d),O.PathType.FILL),x=!0);let D=this.current.getClippedPathBoundingBox();this.contentVisible&&D!==null&&(this.pendingEOFill?(d.fill("evenodd"),this.pendingEOFill=!1):d.fill()),x&&d.restore(),c&&this.consumePath(D)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=nt}eoClip(){this.pendingClip=J}beginText(){this.current.textMatrix=o.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){let c=this.pendingTextPaths,d=this.ctx;if(c===void 0){d.beginPath();return}d.save(),d.beginPath();for(let _ of c)d.setTransform(..._.transform),d.translate(_.x,_.y),_.addToPath(d,_.fontSize);d.restore(),d.clip(),d.beginPath(),delete this.pendingTextPaths}setCharSpacing(c){this.current.charSpacing=c}setWordSpacing(c){this.current.wordSpacing=c}setHScale(c){this.current.textHScale=c/100}setLeading(c){this.current.leading=-c}setFont(c,d){let _=this.commonObjs.get(c),P=this.current;if(!_)throw new Error(`Can't find font for ${c}`);if(P.fontMatrix=_.fontMatrix||o.FONT_IDENTITY_MATRIX,(P.fontMatrix[0]===0||P.fontMatrix[3]===0)&&(0,o.warn)("Invalid font matrix for font "+c),d<0?(d=-d,P.fontDirection=-1):P.fontDirection=1,this.current.font=_,this.current.fontSize=d,_.isType3Font)return;let x=_.loadedName||"sans-serif",D=_.systemFontInfo?.css||`"${x}", ${_.fallbackName}`,E="normal";_.black?E="900":_.bold&&(E="bold");let n=_.italic?"italic":"normal",g=d;d<B?g=B:d>N&&(g=N),this.current.fontSizeScale=d/g,this.ctx.font=`${n} ${E} ${g}px ${D}`}setTextRenderingMode(c){this.current.textRenderingMode=c}setTextRise(c){this.current.textRise=c}moveText(c,d){this.current.x=this.current.lineX+=c,this.current.y=this.current.lineY+=d}setLeadingMoveText(c,d){this.setLeading(-d),this.moveText(c,d)}setTextMatrix(c,d,_,P,x,D){this.current.textMatrix=[c,d,_,P,x,D],this.current.textMatrixScale=Math.hypot(c,d),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(c,d,_,P){let x=this.ctx,D=this.current,E=D.font,n=D.textRenderingMode,g=D.fontSize/D.fontSizeScale,v=n&o.TextRenderingMode.FILL_STROKE_MASK,w=!!(n&o.TextRenderingMode.ADD_TO_PATH_FLAG),T=D.patternFill&&!E.missingFile,L;(E.disableFontFace||w||T)&&(L=E.getPathGenerator(this.commonObjs,c)),E.disableFontFace||T?(x.save(),x.translate(d,_),x.beginPath(),L(x,g),P&&x.setTransform(...P),(v===o.TextRenderingMode.FILL||v===o.TextRenderingMode.FILL_STROKE)&&x.fill(),(v===o.TextRenderingMode.STROKE||v===o.TextRenderingMode.FILL_STROKE)&&x.stroke(),x.restore()):((v===o.TextRenderingMode.FILL||v===o.TextRenderingMode.FILL_STROKE)&&x.fillText(c,d,_),(v===o.TextRenderingMode.STROKE||v===o.TextRenderingMode.FILL_STROKE)&&x.strokeText(c,d,_)),w&&(this.pendingTextPaths||=[]).push({transform:(0,y.getCurrentTransform)(x),x:d,y:_,fontSize:g,addToPath:L})}get isFontSubpixelAAEnabled(){let{context:c}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);c.scale(1.5,1),c.fillText("I",0,10);let d=c.getImageData(0,0,10,10).data,_=!1;for(let P=3;P<d.length;P+=4)if(d[P]>0&&d[P]<255){_=!0;break}return(0,o.shadow)(this,"isFontSubpixelAAEnabled",_)}showText(c){let d=this.current,_=d.font;if(_.isType3Font)return this.showType3Text(c);let P=d.fontSize;if(P===0)return;let x=this.ctx,D=d.fontSizeScale,E=d.charSpacing,n=d.wordSpacing,g=d.fontDirection,v=d.textHScale*g,w=c.length,T=_.vertical,L=T?1:-1,j=_.defaultVMetrics,V=P*d.fontMatrix[0],st=d.textRenderingMode===o.TextRenderingMode.FILL&&!_.disableFontFace&&!d.patternFill;x.save(),x.transform(...d.textMatrix),x.translate(d.x,d.y+d.textRise),g>0?x.scale(v,-1):x.scale(v,1);let q;if(d.patternFill){x.save();let rt=d.fillColor.getPattern(x,this,(0,y.getCurrentTransformInverse)(x),O.PathType.FILL);q=(0,y.getCurrentTransform)(x),x.restore(),x.fillStyle=rt}let $=d.lineWidth,Y=d.textMatrixScale;if(Y===0||$===0){let rt=d.textRenderingMode&o.TextRenderingMode.FILL_STROKE_MASK;(rt===o.TextRenderingMode.STROKE||rt===o.TextRenderingMode.FILL_STROKE)&&($=this.getSinglePixelWidth())}else $/=Y;if(D!==1&&(x.scale(D,D),$/=D),x.lineWidth=$,_.isInvalidPDFjsFont){let rt=[],ot=0;for(let lt of c)rt.push(lt.unicode),ot+=lt.width;x.fillText(rt.join(""),0,0),d.x+=ot*V*v,x.restore(),this.compose();return}let K=0,tt;for(tt=0;tt<w;++tt){let rt=c[tt];if(typeof rt=="number"){K+=L*rt*P/1e3;continue}let ot=!1,lt=(rt.isSpace?n:0)+E,ct=rt.fontChar,ht=rt.accent,ft,yt,bt=rt.width;if(T){let _t=rt.vmetric||j,St=-(rt.vmetric?_t[1]:bt*.5)*V,Bt=_t[2]*V;bt=_t?-_t[0]:bt,ft=St/D,yt=(K+Bt)/D}else ft=K/D,yt=0;if(_.remeasure&&bt>0){let _t=x.measureText(ct).width*1e3/P*D;if(bt<_t&&this.isFontSubpixelAAEnabled){let St=bt/_t;ot=!0,x.save(),x.scale(St,1),ft/=St}else bt!==_t&&(ft+=(bt-_t)/2e3*P/D)}if(this.contentVisible&&(rt.isInFont||_.missingFile)){if(st&&!ht)x.fillText(ct,ft,yt);else if(this.paintChar(ct,ft,yt,q),ht){let _t=ft+P*ht.offset.x/D,St=yt-P*ht.offset.y/D;this.paintChar(ht.fontChar,_t,St,q)}}let Tt=T?bt*V-lt*g:bt*V+lt*g;K+=Tt,ot&&x.restore()}T?d.y-=K:d.x+=K*v,x.restore(),this.compose()}showType3Text(c){let d=this.ctx,_=this.current,P=_.font,x=_.fontSize,D=_.fontDirection,E=P.vertical?1:-1,n=_.charSpacing,g=_.wordSpacing,v=_.textHScale*D,w=_.fontMatrix||o.FONT_IDENTITY_MATRIX,T=c.length,L=_.textRenderingMode===o.TextRenderingMode.INVISIBLE,j,V,st,q;if(!(L||x===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,d.save(),d.transform(..._.textMatrix),d.translate(_.x,_.y),d.scale(v,D),j=0;j<T;++j){if(V=c[j],typeof V=="number"){q=E*V*x/1e3,this.ctx.translate(q,0),_.x+=q*v;continue}let $=(V.isSpace?g:0)+n,Y=P.charProcOperatorList[V.operatorListId];if(!Y){(0,o.warn)(`Type3 character "${V.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=V,this.save(),d.scale(x,x),d.transform(...w),this.executeOperatorList(Y),this.restore()),st=o.Util.applyTransform([V.width,0],w)[0]*x+$,d.translate(st,0),_.x+=st*v}d.restore(),this.processingType3=null}}setCharWidth(c,d){}setCharWidthAndBounds(c,d,_,P,x,D){this.ctx.rect(_,P,x-_,D-P),this.ctx.clip(),this.endPath()}getColorN_Pattern(c){let d;if(c[0]==="TilingPattern"){let _=c[1],P=this.baseTransform||(0,y.getCurrentTransform)(this.ctx),x={createCanvasGraphics:D=>new F(D,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};d=new O.TilingPattern(c,_,this.ctx,x,P)}else d=this._getPattern(c[1],c[2]);return d}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(c,d,_){let P=o.Util.makeHexColor(c,d,_);this.ctx.strokeStyle=P,this.current.strokeColor=P}setFillRGBColor(c,d,_){let P=o.Util.makeHexColor(c,d,_);this.ctx.fillStyle=P,this.current.fillColor=P,this.current.patternFill=!1}_getPattern(c,d=null){let _;return this.cachedPatterns.has(c)?_=this.cachedPatterns.get(c):(_=(0,O.getShadingPattern)(this.getObject(c)),this.cachedPatterns.set(c,_)),d&&(_.matrix=d),_}shadingFill(c){if(!this.contentVisible)return;let d=this.ctx;this.save();let _=this._getPattern(c);d.fillStyle=_.getPattern(d,this,(0,y.getCurrentTransformInverse)(d),O.PathType.SHADING);let P=(0,y.getCurrentTransformInverse)(d);if(P){let{width:x,height:D}=d.canvas,[E,n,g,v]=o.Util.getAxialAlignedBoundingBox([0,0,x,D],P);this.ctx.fillRect(E,n,g-E,v-n)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,o.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,o.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(c,d){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(c)&&c.length===6&&this.transform(...c),this.baseTransform=(0,y.getCurrentTransform)(this.ctx),d)){let _=d[2]-d[0],P=d[3]-d[1];this.ctx.rect(d[0],d[1],_,P),this.current.updateRectMinMax((0,y.getCurrentTransform)(this.ctx),d),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(c){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);let d=this.ctx;c.isolated||(0,o.info)("TODO: Support non-isolated groups."),c.knockout&&(0,o.warn)("Knockout groups not supported.");let _=(0,y.getCurrentTransform)(d);if(c.matrix&&d.transform(...c.matrix),!c.bbox)throw new Error("Bounding box is required.");let P=o.Util.getAxialAlignedBoundingBox(c.bbox,(0,y.getCurrentTransform)(d)),x=[0,0,d.canvas.width,d.canvas.height];P=o.Util.intersect(P,x)||[0,0,0,0];let D=Math.floor(P[0]),E=Math.floor(P[1]),n=Math.max(Math.ceil(P[2])-D,1),g=Math.max(Math.ceil(P[3])-E,1),v=1,w=1;n>h&&(v=n/h,n=h),g>h&&(w=g/h,g=h),this.current.startNewPathAndClipBox([0,0,n,g]);let T="groupAt"+this.groupLevel;c.smask&&(T+="_smask_"+this.smaskCounter++%2);let L=this.cachedCanvases.getCanvas(T,n,g),j=L.context;j.scale(1/v,1/w),j.translate(-D,-E),j.transform(..._),c.smask?this.smaskStack.push({canvas:L.canvas,context:j,offsetX:D,offsetY:E,scaleX:v,scaleY:w,subtype:c.smask.subtype,backdrop:c.smask.backdrop,transferMap:c.smask.transferMap||null,startTransformInverse:null}):(d.setTransform(1,0,0,1,0,0),d.translate(D,E),d.scale(v,w),d.save()),p(d,j),this.ctx=j,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(d),this.groupLevel++}endGroup(c){if(!this.contentVisible)return;this.groupLevel--;let d=this.ctx,_=this.groupStack.pop();if(this.ctx=_,this.ctx.imageSmoothingEnabled=!1,c.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();let P=(0,y.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...P);let x=o.Util.getAxialAlignedBoundingBox([0,0,d.canvas.width,d.canvas.height],P);this.ctx.drawImage(d.canvas,0,0),this.ctx.restore(),this.compose(x)}}beginAnnotation(c,d,_,P,x){if(this.#t(),A(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(d)&&d.length===4){let D=d[2]-d[0],E=d[3]-d[1];if(x&&this.annotationCanvasMap){_=_.slice(),_[4]-=d[0],_[5]-=d[1],d=d.slice(),d[0]=d[1]=0,d[2]=D,d[3]=E;let[n,g]=o.Util.singularValueDecompose2dScale((0,y.getCurrentTransform)(this.ctx)),{viewportScale:v}=this,w=Math.ceil(D*this.outputScaleX*v),T=Math.ceil(E*this.outputScaleY*v);this.annotationCanvas=this.canvasFactory.create(w,T);let{canvas:L,context:j}=this.annotationCanvas;this.annotationCanvasMap.set(c,L),this.annotationCanvas.savedCtx=this.ctx,this.ctx=j,this.ctx.save(),this.ctx.setTransform(n,0,0,-g,0,E*g),A(this.ctx)}else A(this.ctx),this.ctx.rect(d[0],d[1],D,E),this.ctx.clip(),this.endPath()}this.current=new m(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(..._),this.transform(...P)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(c){if(!this.contentVisible)return;let d=c.count;c=this.getObject(c.data,c),c.count=d;let _=this.ctx,P=this.processingType3;if(P&&(P.compiled===void 0&&(P.compiled=f(c)),P.compiled)){P.compiled(_);return}let x=this._createMaskCanvas(c),D=x.canvas;_.save(),_.setTransform(1,0,0,1,0,0),_.drawImage(D,x.offsetX,x.offsetY),_.restore(),this.compose()}paintImageMaskXObjectRepeat(c,d,_=0,P=0,x,D){if(!this.contentVisible)return;c=this.getObject(c.data,c);let E=this.ctx;E.save();let n=(0,y.getCurrentTransform)(E);E.transform(d,_,P,x,0,0);let g=this._createMaskCanvas(c);E.setTransform(1,0,0,1,g.offsetX-n[4],g.offsetY-n[5]);for(let v=0,w=D.length;v<w;v+=2){let T=o.Util.transform(n,[d,_,P,x,D[v],D[v+1]]),[L,j]=o.Util.applyTransform([0,0],T);E.drawImage(g.canvas,L,j)}E.restore(),this.compose()}paintImageMaskXObjectGroup(c){if(!this.contentVisible)return;let d=this.ctx,_=this.current.fillColor,P=this.current.patternFill;for(let x of c){let{data:D,width:E,height:n,transform:g}=x,v=this.cachedCanvases.getCanvas("maskCanvas",E,n),w=v.context;w.save();let T=this.getObject(D,x);S(w,T),w.globalCompositeOperation="source-in",w.fillStyle=P?_.getPattern(w,this,(0,y.getCurrentTransformInverse)(d),O.PathType.FILL):_,w.fillRect(0,0,E,n),w.restore(),d.save(),d.transform(...g),d.scale(1,-1),u(d,v.canvas,0,0,E,n,0,-1,1,1),d.restore()}this.compose()}paintImageXObject(c){if(!this.contentVisible)return;let d=this.getObject(c);if(!d){(0,o.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(d)}paintImageXObjectRepeat(c,d,_,P){if(!this.contentVisible)return;let x=this.getObject(c);if(!x){(0,o.warn)("Dependent image isn't ready yet");return}let D=x.width,E=x.height,n=[];for(let g=0,v=P.length;g<v;g+=2)n.push({transform:[d,0,0,_,P[g],P[g+1]],x:0,y:0,w:D,h:E});this.paintInlineImageXObjectGroup(x,n)}applyTransferMapsToCanvas(c){return this.current.transferMaps!=="none"&&(c.filter=this.current.transferMaps,c.drawImage(c.canvas,0,0),c.filter="none"),c.canvas}applyTransferMapsToBitmap(c){if(this.current.transferMaps==="none")return c.bitmap;let{bitmap:d,width:_,height:P}=c,x=this.cachedCanvases.getCanvas("inlineImage",_,P),D=x.context;return D.filter=this.current.transferMaps,D.drawImage(d,0,0),D.filter="none",x.canvas}paintInlineImageXObject(c){if(!this.contentVisible)return;let d=c.width,_=c.height,P=this.ctx;if(this.save(),!o.isNodeJS){let{filter:E}=P;E!=="none"&&E!==""&&(P.filter="none")}P.scale(1/d,-1/_);let x;if(c.bitmap)x=this.applyTransferMapsToBitmap(c);else if(typeof HTMLElement=="function"&&c instanceof HTMLElement||!c.data)x=c;else{let n=this.cachedCanvases.getCanvas("inlineImage",d,_).context;C(n,c),x=this.applyTransferMapsToCanvas(n)}let D=this._scaleImage(x,(0,y.getCurrentTransformInverse)(P));P.imageSmoothingEnabled=it((0,y.getCurrentTransform)(P),c.interpolate),u(P,D.img,0,0,D.paintWidth,D.paintHeight,0,-_,d,_),this.compose(),this.restore()}paintInlineImageXObjectGroup(c,d){if(!this.contentVisible)return;let _=this.ctx,P;if(c.bitmap)P=c.bitmap;else{let x=c.width,D=c.height,n=this.cachedCanvases.getCanvas("inlineImage",x,D).context;C(n,c),P=this.applyTransferMapsToCanvas(n)}for(let x of d)_.save(),_.transform(...x.transform),_.scale(1,-1),u(_,P,x.x,x.y,x.w,x.h,0,-1,1,1),_.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(c){}markPointProps(c,d){}beginMarkedContent(c){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(c,d){c==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(d)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(c){let d=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(c);let _=this.ctx;this.pendingClip&&(d||(this.pendingClip===J?_.clip("evenodd"):_.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),_.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){let c=(0,y.getCurrentTransform)(this.ctx);if(c[1]===0&&c[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(c[0]),Math.abs(c[3]));else{let d=Math.abs(c[0]*c[3]-c[2]*c[1]),_=Math.hypot(c[0],c[2]),P=Math.hypot(c[1],c[3]);this._cachedGetSinglePixelWidth=Math.max(_,P)/d}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){let{lineWidth:c}=this.current,{a:d,b:_,c:P,d:x}=this.ctx.getTransform(),D,E;if(_===0&&P===0){let n=Math.abs(d),g=Math.abs(x);if(n===g)if(c===0)D=E=1/n;else{let v=n*c;D=E=v<1?1/v:1}else if(c===0)D=1/n,E=1/g;else{let v=n*c,w=g*c;D=v<1?1/v:1,E=w<1?1/w:1}}else{let n=Math.abs(d*x-_*P),g=Math.hypot(d,_),v=Math.hypot(P,x);if(c===0)D=v/n,E=g/n;else{let w=c*n;D=v>w?v/w:1,E=g>w?g/w:1}}this._cachedScaleForStroking[0]=D,this._cachedScaleForStroking[1]=E}return this._cachedScaleForStroking}rescaleAndStroke(c){let{ctx:d}=this,{lineWidth:_}=this.current,[P,x]=this.getScaleForStroking();if(d.lineWidth=_||1,P===1&&x===1){d.stroke();return}let D=d.getLineDash();if(c&&d.save(),d.scale(P,x),D.length>0){let E=Math.max(P,x);d.setLineDash(D.map(n=>n/E)),d.lineDashOffset/=E}d.stroke(),c&&d.restore()}isContentVisible(){for(let c=this.markedContentStack.length-1;c>=0;c--)if(!this.markedContentStack[c].visible)return!1;return!0}}r.CanvasGraphics=F;for(let b in o.OPS)F.prototype[b]!==void 0&&(F.prototype[o.OPS[b]]=F.prototype[b])},(H,r,k)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.TilingPattern=r.PathType=void 0,r.getShadingPattern=l;var o=k(1),y=k(6);let O={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};r.PathType=O;function M(u,f){if(!f)return;let m=f[2]-f[0],C=f[3]-f[1],S=new Path2D;S.rect(f[0],f[1],m,C),u.clip(S)}class B{constructor(){this.constructor===B&&(0,o.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,o.unreachable)("Abstract method `getPattern` called.")}}class N extends B{constructor(f){super(),this._type=f[1],this._bbox=f[2],this._colorStops=f[3],this._p0=f[4],this._p1=f[5],this._r0=f[6],this._r1=f[7],this.matrix=null}_createGradient(f){let m;this._type==="axial"?m=f.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(m=f.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(let C of this._colorStops)m.addColorStop(C[0],C[1]);return m}getPattern(f,m,C,S){let p;if(S===O.STROKE||S===O.FILL){let A=m.current.getClippedPathBoundingBox(S,(0,y.getCurrentTransform)(f))||[0,0,0,0],I=Math.ceil(A[2]-A[0])||1,U=Math.ceil(A[3]-A[1])||1,R=m.cachedCanvases.getCanvas("pattern",I,U,!0),G=R.context;G.clearRect(0,0,G.canvas.width,G.canvas.height),G.beginPath(),G.rect(0,0,G.canvas.width,G.canvas.height),G.translate(-A[0],-A[1]),C=o.Util.transform(C,[1,0,0,1,A[0],A[1]]),G.transform(...m.baseTransform),this.matrix&&G.transform(...this.matrix),M(G,this._bbox),G.fillStyle=this._createGradient(G),G.fill(),p=f.createPattern(R.canvas,"no-repeat");let X=new DOMMatrix(C);p.setTransform(X)}else M(f,this._bbox),p=this._createGradient(f);return p}}function h(u,f,m,C,S,p,A,I){let U=f.coords,R=f.colors,G=u.data,X=u.width*4,it;U[m+1]>U[C+1]&&(it=m,m=C,C=it,it=p,p=A,A=it),U[C+1]>U[S+1]&&(it=C,C=S,S=it,it=A,A=I,I=it),U[m+1]>U[C+1]&&(it=m,m=C,C=it,it=p,p=A,A=it);let Z=(U[m]+f.offsetX)*f.scaleX,Q=(U[m+1]+f.offsetY)*f.scaleY,nt=(U[C]+f.offsetX)*f.scaleX,J=(U[C+1]+f.offsetY)*f.scaleY,F=(U[S]+f.offsetX)*f.scaleX,b=(U[S+1]+f.offsetY)*f.scaleY;if(Q>=b)return;let c=R[p],d=R[p+1],_=R[p+2],P=R[A],x=R[A+1],D=R[A+2],E=R[I],n=R[I+1],g=R[I+2],v=Math.round(Q),w=Math.round(b),T,L,j,V,st,q,$,Y;for(let K=v;K<=w;K++){if(K<J){let ct=K<Q?0:(Q-K)/(Q-J);T=Z-(Z-nt)*ct,L=c-(c-P)*ct,j=d-(d-x)*ct,V=_-(_-D)*ct}else{let ct;K>b?ct=1:J===b?ct=0:ct=(J-K)/(J-b),T=nt-(nt-F)*ct,L=P-(P-E)*ct,j=x-(x-n)*ct,V=D-(D-g)*ct}let tt;K<Q?tt=0:K>b?tt=1:tt=(Q-K)/(Q-b),st=Z-(Z-F)*tt,q=c-(c-E)*tt,$=d-(d-n)*tt,Y=_-(_-g)*tt;let rt=Math.round(Math.min(T,st)),ot=Math.round(Math.max(T,st)),lt=X*K+rt*4;for(let ct=rt;ct<=ot;ct++)tt=(T-ct)/(T-st),tt<0?tt=0:tt>1&&(tt=1),G[lt++]=L-(L-q)*tt|0,G[lt++]=j-(j-$)*tt|0,G[lt++]=V-(V-Y)*tt|0,G[lt++]=255}}function s(u,f,m){let C=f.coords,S=f.colors,p,A;switch(f.type){case"lattice":let I=f.verticesPerRow,U=Math.floor(C.length/I)-1,R=I-1;for(p=0;p<U;p++){let G=p*I;for(let X=0;X<R;X++,G++)h(u,m,C[G],C[G+1],C[G+I],S[G],S[G+1],S[G+I]),h(u,m,C[G+I+1],C[G+1],C[G+I],S[G+I+1],S[G+1],S[G+I])}break;case"triangles":for(p=0,A=C.length;p<A;p+=3)h(u,m,C[p],C[p+1],C[p+2],S[p],S[p+1],S[p+2]);break;default:throw new Error("illegal figure")}}class t extends B{constructor(f){super(),this._coords=f[2],this._colors=f[3],this._figures=f[4],this._bounds=f[5],this._bbox=f[7],this._background=f[8],this.matrix=null}_createMeshCanvas(f,m,C){let I=Math.floor(this._bounds[0]),U=Math.floor(this._bounds[1]),R=Math.ceil(this._bounds[2])-I,G=Math.ceil(this._bounds[3])-U,X=Math.min(Math.ceil(Math.abs(R*f[0]*1.1)),3e3),it=Math.min(Math.ceil(Math.abs(G*f[1]*1.1)),3e3),Z=R/X,Q=G/it,nt={coords:this._coords,colors:this._colors,offsetX:-I,offsetY:-U,scaleX:1/Z,scaleY:1/Q},J=X+2*2,F=it+2*2,b=C.getCanvas("mesh",J,F,!1),c=b.context,d=c.createImageData(X,it);if(m){let P=d.data;for(let x=0,D=P.length;x<D;x+=4)P[x]=m[0],P[x+1]=m[1],P[x+2]=m[2],P[x+3]=255}for(let P of this._figures)s(d,P,nt);return c.putImageData(d,2,2),{canvas:b.canvas,offsetX:I-2*Z,offsetY:U-2*Q,scaleX:Z,scaleY:Q}}getPattern(f,m,C,S){M(f,this._bbox);let p;if(S===O.SHADING)p=o.Util.singularValueDecompose2dScale((0,y.getCurrentTransform)(f));else if(p=o.Util.singularValueDecompose2dScale(m.baseTransform),this.matrix){let I=o.Util.singularValueDecompose2dScale(this.matrix);p=[p[0]*I[0],p[1]*I[1]]}let A=this._createMeshCanvas(p,S===O.SHADING?null:this._background,m.cachedCanvases);return S!==O.SHADING&&(f.setTransform(...m.baseTransform),this.matrix&&f.transform(...this.matrix)),f.translate(A.offsetX,A.offsetY),f.scale(A.scaleX,A.scaleY),f.createPattern(A.canvas,"no-repeat")}}class i extends B{getPattern(){return"hotpink"}}function l(u){switch(u[0]){case"RadialAxial":return new N(u);case"Mesh":return new t(u);case"Dummy":return new i}throw new Error(`Unknown IR type: ${u[0]}`)}let a={COLORED:1,UNCOLORED:2},e=(()=>{class u{static MAX_PATTERN_SIZE=3e3;constructor(m,C,S,p,A){this.operatorList=m[2],this.matrix=m[3]||[1,0,0,1,0,0],this.bbox=m[4],this.xstep=m[5],this.ystep=m[6],this.paintType=m[7],this.tilingType=m[8],this.color=C,this.ctx=S,this.canvasGraphicsFactory=p,this.baseTransform=A}createPatternCanvas(m){let C=this.operatorList,S=this.bbox,p=this.xstep,A=this.ystep,I=this.paintType,U=this.tilingType,R=this.color,G=this.canvasGraphicsFactory;(0,o.info)("TilingType: "+U);let X=S[0],it=S[1],Z=S[2],Q=S[3],nt=o.Util.singularValueDecompose2dScale(this.matrix),J=o.Util.singularValueDecompose2dScale(this.baseTransform),F=[nt[0]*J[0],nt[1]*J[1]],b=this.getSizeAndScale(p,this.ctx.canvas.width,F[0]),c=this.getSizeAndScale(A,this.ctx.canvas.height,F[1]),d=m.cachedCanvases.getCanvas("pattern",b.size,c.size,!0),_=d.context,P=G.createCanvasGraphics(_);P.groupLevel=m.groupLevel,this.setFillAndStrokeStyleToContext(P,I,R);let x=X,D=it,E=Z,n=Q;return X<0&&(x=0,E+=Math.abs(X)),it<0&&(D=0,n+=Math.abs(it)),_.translate(-(b.scale*x),-(c.scale*D)),P.transform(b.scale,0,0,c.scale,0,0),_.save(),this.clipBbox(P,x,D,E,n),P.baseTransform=(0,y.getCurrentTransform)(P.ctx),P.executeOperatorList(C),P.endDrawing(),{canvas:d.canvas,scaleX:b.scale,scaleY:c.scale,offsetX:x,offsetY:D}}getSizeAndScale(m,C,S){m=Math.abs(m);let p=Math.max(u.MAX_PATTERN_SIZE,C),A=Math.ceil(m*S);return A>=p?A=p:S=A/m,{scale:S,size:A}}clipBbox(m,C,S,p,A){let I=p-C,U=A-S;m.ctx.rect(C,S,I,U),m.current.updateRectMinMax((0,y.getCurrentTransform)(m.ctx),[C,S,p,A]),m.clip(),m.endPath()}setFillAndStrokeStyleToContext(m,C,S){let p=m.ctx,A=m.current;switch(C){case a.COLORED:let I=this.ctx;p.fillStyle=I.fillStyle,p.strokeStyle=I.strokeStyle,A.fillColor=I.fillStyle,A.strokeColor=I.strokeStyle;break;case a.UNCOLORED:let U=o.Util.makeHexColor(S[0],S[1],S[2]);p.fillStyle=U,p.strokeStyle=U,A.fillColor=U,A.strokeColor=U;break;default:throw new o.FormatError(`Unsupported paint type: ${C}`)}}getPattern(m,C,S,p){let A=S;p!==O.SHADING&&(A=o.Util.transform(A,C.baseTransform),this.matrix&&(A=o.Util.transform(A,this.matrix)));let I=this.createPatternCanvas(C),U=new DOMMatrix(A);U=U.translate(I.offsetX,I.offsetY),U=U.scale(1/I.scaleX,1/I.scaleY);let R=m.createPattern(I.canvas,"repeat");return R.setTransform(U),R}}return u})();r.TilingPattern=e},(H,r,k)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.convertBlackAndWhiteToRGBA=O,r.convertToRGBA=y,r.grayToRGBA=B;var o=k(1);function y(N){switch(N.kind){case o.ImageKind.GRAYSCALE_1BPP:return O(N);case o.ImageKind.RGB_24BPP:return M(N)}return null}function O({src:N,srcPos:h=0,dest:s,width:t,height:i,nonBlackColor:l=4294967295,inverseDecode:a=!1}){let e=o.FeatureTest.isLittleEndian?4278190080:255,[u,f]=a?[l,e]:[e,l],m=t>>3,C=t&7,S=N.length;s=new Uint32Array(s.buffer);let p=0;for(let A=0;A<i;A++){for(let U=h+m;h<U;h++){let R=h<S?N[h]:255;s[p++]=R&128?f:u,s[p++]=R&64?f:u,s[p++]=R&32?f:u,s[p++]=R&16?f:u,s[p++]=R&8?f:u,s[p++]=R&4?f:u,s[p++]=R&2?f:u,s[p++]=R&1?f:u}if(C===0)continue;let I=h<S?N[h++]:255;for(let U=0;U<C;U++)s[p++]=I&1<<7-U?f:u}return{srcPos:h,destPos:p}}function M({src:N,srcPos:h=0,dest:s,destPos:t=0,width:i,height:l}){let a=0,e=N.length>>2,u=new Uint32Array(N.buffer,h,e);if(o.FeatureTest.isLittleEndian){for(;a<e-2;a+=3,t+=4){let f=u[a],m=u[a+1],C=u[a+2];s[t]=f|4278190080,s[t+1]=f>>>24|m<<8|4278190080,s[t+2]=m>>>16|C<<16|4278190080,s[t+3]=C>>>8|4278190080}for(let f=a*4,m=N.length;f<m;f+=3)s[t++]=N[f]|N[f+1]<<8|N[f+2]<<16|4278190080}else{for(;a<e-2;a+=3,t+=4){let f=u[a],m=u[a+1],C=u[a+2];s[t]=f|255,s[t+1]=f<<24|m>>>8|255,s[t+2]=m<<16|C>>>16|255,s[t+3]=C<<8|255}for(let f=a*4,m=N.length;f<m;f+=3)s[t++]=N[f]<<24|N[f+1]<<16|N[f+2]<<8|255}return{srcPos:h,destPos:t}}function B(N,h){if(o.FeatureTest.isLittleEndian)for(let s=0,t=N.length;s<t;s++)h[s]=N[s]*65793|4278190080;else for(let s=0,t=N.length;s<t;s++)h[s]=N[s]*16843008|255}},(H,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.GlobalWorkerOptions=void 0;let k=Object.create(null);r.GlobalWorkerOptions=k,k.workerPort=null,k.workerSrc=""},(H,r,k)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.MessageHandler=void 0;var o=k(1);let y={UNKNOWN:0,DATA:1,ERROR:2},O={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function M(N){switch(N instanceof Error||typeof N=="object"&&N!==null||(0,o.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),N.name){case"AbortException":return new o.AbortException(N.message);case"MissingPDFException":return new o.MissingPDFException(N.message);case"PasswordException":return new o.PasswordException(N.message,N.code);case"UnexpectedResponseException":return new o.UnexpectedResponseException(N.message,N.status);case"UnknownErrorException":return new o.UnknownErrorException(N.message,N.details);default:return new o.UnknownErrorException(N.message,N.toString())}}class B{constructor(h,s,t){this.sourceName=h,this.targetName=s,this.comObj=t,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=i=>{let l=i.data;if(l.targetName!==this.sourceName)return;if(l.stream){this.#e(l);return}if(l.callback){let e=l.callbackId,u=this.callbackCapabilities[e];if(!u)throw new Error(`Cannot resolve callback ${e}`);if(delete this.callbackCapabilities[e],l.callback===y.DATA)u.resolve(l.data);else if(l.callback===y.ERROR)u.reject(M(l.reason));else throw new Error("Unexpected callback case");return}let a=this.actionHandler[l.action];if(!a)throw new Error(`Unknown action from worker: ${l.action}`);if(l.callbackId){let e=this.sourceName,u=l.sourceName;new Promise(function(f){f(a(l.data))}).then(function(f){t.postMessage({sourceName:e,targetName:u,callback:y.DATA,callbackId:l.callbackId,data:f})},function(f){t.postMessage({sourceName:e,targetName:u,callback:y.ERROR,callbackId:l.callbackId,reason:M(f)})});return}if(l.streamId){this.#t(l);return}a(l.data)},t.addEventListener("message",this._onComObjOnMessage)}on(h,s){let t=this.actionHandler;if(t[h])throw new Error(`There is already an actionName called "${h}"`);t[h]=s}send(h,s,t){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:h,data:s},t)}sendWithPromise(h,s,t){let i=this.callbackId++,l=new o.PromiseCapability;this.callbackCapabilities[i]=l;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:h,callbackId:i,data:s},t)}catch(a){l.reject(a)}return l.promise}sendWithStream(h,s,t,i){let l=this.streamId++,a=this.sourceName,e=this.targetName,u=this.comObj;return new ReadableStream({start:f=>{let m=new o.PromiseCapability;return this.streamControllers[l]={controller:f,startCall:m,pullCall:null,cancelCall:null,isClosed:!1},u.postMessage({sourceName:a,targetName:e,action:h,streamId:l,data:s,desiredSize:f.desiredSize},i),m.promise},pull:f=>{let m=new o.PromiseCapability;return this.streamControllers[l].pullCall=m,u.postMessage({sourceName:a,targetName:e,stream:O.PULL,streamId:l,desiredSize:f.desiredSize}),m.promise},cancel:f=>{(0,o.assert)(f instanceof Error,"cancel must have a valid reason");let m=new o.PromiseCapability;return this.streamControllers[l].cancelCall=m,this.streamControllers[l].isClosed=!0,u.postMessage({sourceName:a,targetName:e,stream:O.CANCEL,streamId:l,reason:M(f)}),m.promise}},t)}#t(h){let s=h.streamId,t=this.sourceName,i=h.sourceName,l=this.comObj,a=this,e=this.actionHandler[h.action],u={enqueue(f,m=1,C){if(this.isCancelled)return;let S=this.desiredSize;this.desiredSize-=m,S>0&&this.desiredSize<=0&&(this.sinkCapability=new o.PromiseCapability,this.ready=this.sinkCapability.promise),l.postMessage({sourceName:t,targetName:i,stream:O.ENQUEUE,streamId:s,chunk:f},C)},close(){this.isCancelled||(this.isCancelled=!0,l.postMessage({sourceName:t,targetName:i,stream:O.CLOSE,streamId:s}),delete a.streamSinks[s])},error(f){(0,o.assert)(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,l.postMessage({sourceName:t,targetName:i,stream:O.ERROR,streamId:s,reason:M(f)}))},sinkCapability:new o.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:h.desiredSize,ready:null};u.sinkCapability.resolve(),u.ready=u.sinkCapability.promise,this.streamSinks[s]=u,new Promise(function(f){f(e(h.data,u))}).then(function(){l.postMessage({sourceName:t,targetName:i,stream:O.START_COMPLETE,streamId:s,success:!0})},function(f){l.postMessage({sourceName:t,targetName:i,stream:O.START_COMPLETE,streamId:s,reason:M(f)})})}#e(h){let s=h.streamId,t=this.sourceName,i=h.sourceName,l=this.comObj,a=this.streamControllers[s],e=this.streamSinks[s];switch(h.stream){case O.START_COMPLETE:h.success?a.startCall.resolve():a.startCall.reject(M(h.reason));break;case O.PULL_COMPLETE:h.success?a.pullCall.resolve():a.pullCall.reject(M(h.reason));break;case O.PULL:if(!e){l.postMessage({sourceName:t,targetName:i,stream:O.PULL_COMPLETE,streamId:s,success:!0});break}e.desiredSize<=0&&h.desiredSize>0&&e.sinkCapability.resolve(),e.desiredSize=h.desiredSize,new Promise(function(u){u(e.onPull?.())}).then(function(){l.postMessage({sourceName:t,targetName:i,stream:O.PULL_COMPLETE,streamId:s,success:!0})},function(u){l.postMessage({sourceName:t,targetName:i,stream:O.PULL_COMPLETE,streamId:s,reason:M(u)})});break;case O.ENQUEUE:if((0,o.assert)(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(h.chunk);break;case O.CLOSE:if((0,o.assert)(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),this.#i(a,s);break;case O.ERROR:(0,o.assert)(a,"error should have stream controller"),a.controller.error(M(h.reason)),this.#i(a,s);break;case O.CANCEL_COMPLETE:h.success?a.cancelCall.resolve():a.cancelCall.reject(M(h.reason)),this.#i(a,s);break;case O.CANCEL:if(!e)break;new Promise(function(u){u(e.onCancel?.(M(h.reason)))}).then(function(){l.postMessage({sourceName:t,targetName:i,stream:O.CANCEL_COMPLETE,streamId:s,success:!0})},function(u){l.postMessage({sourceName:t,targetName:i,stream:O.CANCEL_COMPLETE,streamId:s,reason:M(u)})}),e.sinkCapability.reject(M(h.reason)),e.isCancelled=!0,delete this.streamSinks[s];break;default:throw new Error("Unexpected stream case")}}#i(h,s){return dt(this,null,function*(){yield Promise.allSettled([h.startCall?.promise,h.pullCall?.promise,h.cancelCall?.promise]),delete this.streamControllers[s]})}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}r.MessageHandler=B},(H,r,k)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Metadata=void 0;var o=k(1);class y{#t;#e;constructor({parsedData:M,rawData:B}){this.#t=M,this.#e=B}getRaw(){return this.#e}get(M){return this.#t.get(M)??null}getAll(){return(0,o.objectFromMap)(this.#t)}has(M){return this.#t.has(M)}}r.Metadata=y},(H,r,k)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.OptionalContentConfig=void 0;var o=k(1),y=k(8);let O=Symbol("INTERNAL");class M{#t=!0;constructor(h,s){this.name=h,this.intent=s}get visible(){return this.#t}_setVisible(h,s){h!==O&&(0,o.unreachable)("Internal method `_setVisible` called."),this.#t=s}}class B{#t=null;#e=new Map;#i=null;#s=null;constructor(h){if(this.name=null,this.creator=null,h!==null){this.name=h.name,this.creator=h.creator,this.#s=h.order;for(let s of h.groups)this.#e.set(s.id,new M(s.name,s.intent));if(h.baseState==="OFF")for(let s of this.#e.values())s._setVisible(O,!1);for(let s of h.on)this.#e.get(s)._setVisible(O,!0);for(let s of h.off)this.#e.get(s)._setVisible(O,!1);this.#i=this.getHash()}}#o(h){let s=h.length;if(s<2)return!0;let t=h[0];for(let i=1;i<s;i++){let l=h[i],a;if(Array.isArray(l))a=this.#o(l);else if(this.#e.has(l))a=this.#e.get(l).visible;else return(0,o.warn)(`Optional content group not found: ${l}`),!0;switch(t){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return t==="And"}isVisible(h){if(this.#e.size===0)return!0;if(!h)return(0,o.warn)("Optional content group not defined."),!0;if(h.type==="OCG")return this.#e.has(h.id)?this.#e.get(h.id).visible:((0,o.warn)(`Optional content group not found: ${h.id}`),!0);if(h.type==="OCMD"){if(h.expression)return this.#o(h.expression);if(!h.policy||h.policy==="AnyOn"){for(let s of h.ids){if(!this.#e.has(s))return(0,o.warn)(`Optional content group not found: ${s}`),!0;if(this.#e.get(s).visible)return!0}return!1}else if(h.policy==="AllOn"){for(let s of h.ids){if(!this.#e.has(s))return(0,o.warn)(`Optional content group not found: ${s}`),!0;if(!this.#e.get(s).visible)return!1}return!0}else if(h.policy==="AnyOff"){for(let s of h.ids){if(!this.#e.has(s))return(0,o.warn)(`Optional content group not found: ${s}`),!0;if(!this.#e.get(s).visible)return!0}return!1}else if(h.policy==="AllOff"){for(let s of h.ids){if(!this.#e.has(s))return(0,o.warn)(`Optional content group not found: ${s}`),!0;if(this.#e.get(s).visible)return!1}return!0}return(0,o.warn)(`Unknown optional content policy ${h.policy}.`),!0}return(0,o.warn)(`Unknown group type ${h.type}.`),!0}setVisibility(h,s=!0){if(!this.#e.has(h)){(0,o.warn)(`Optional content group not found: ${h}`);return}this.#e.get(h)._setVisible(O,!!s),this.#t=null}get hasInitialVisibility(){return this.#i===null||this.getHash()===this.#i}getOrder(){return this.#e.size?this.#s?this.#s.slice():[...this.#e.keys()]:null}getGroups(){return this.#e.size>0?(0,o.objectFromMap)(this.#e):null}getGroup(h){return this.#e.get(h)||null}getHash(){if(this.#t!==null)return this.#t;let h=new y.MurmurHash3_64;for(let[s,t]of this.#e)h.update(`${s}:${t.visible}`);return this.#t=h.hexdigest()}}r.OptionalContentConfig=B},(H,r,k)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.PDFDataTransportStream=void 0;var o=k(1),y=k(6);class O{constructor({length:h,initialData:s,progressiveDone:t=!1,contentDispositionFilename:i=null,disableRange:l=!1,disableStream:a=!1},e){if((0,o.assert)(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=t,this._contentDispositionFilename=i,s?.length>0){let u=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(u)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!a,this._isRangeSupported=!l,this._contentLength=h,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((u,f)=>{this._onReceiveData({begin:u,chunk:f})}),this._pdfDataRangeTransport.addProgressListener((u,f)=>{this._onProgress({loaded:u,total:f})}),this._pdfDataRangeTransport.addProgressiveReadListener(u=>{this._onReceiveData({chunk:u})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:h,chunk:s}){let t=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;if(h===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(t):this._queuedChunks.push(t);else{let i=this._rangeReaders.some(function(l){return l._begin!==h?!1:(l._enqueue(t),!0)});(0,o.assert)(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(h){h.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:h.loaded}):this._fullRequestReader?.onProgress?.({loaded:h.loaded,total:h.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(h){let s=this._rangeReaders.indexOf(h);s>=0&&this._rangeReaders.splice(s,1)}getFullReader(){(0,o.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");let h=this._queuedChunks;return this._queuedChunks=null,new M(this,h,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(h,s){if(s<=this._progressiveDataLength)return null;let t=new B(this,h,s);return this._pdfDataRangeTransport.requestDataRange(h,s),this._rangeReaders.push(t),t}cancelAllRequests(h){this._fullRequestReader?.cancel(h);for(let s of this._rangeReaders.slice(0))s.cancel(h);this._pdfDataRangeTransport.abort()}}r.PDFDataTransportStream=O;class M{constructor(h,s,t=!1,i=null){this._stream=h,this._done=t||!1,this._filename=(0,y.isPdfFile)(i)?i:null,this._queuedChunks=s||[],this._loaded=0;for(let l of this._queuedChunks)this._loaded+=l.byteLength;this._requests=[],this._headersReady=Promise.resolve(),h._fullRequestReader=this,this.onProgress=null}_enqueue(h){this._done||(this._requests.length>0?this._requests.shift().resolve({value:h,done:!1}):this._queuedChunks.push(h),this._loaded+=h.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}read(){return dt(this,null,function*(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let h=new o.PromiseCapability;return this._requests.push(h),h.promise})}cancel(h){this._done=!0;for(let s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class B{constructor(h,s,t){this._stream=h,this._begin=s,this._end=t,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(h){if(!this._done){if(this._requests.length===0)this._queuedChunk=h;else{this._requests.shift().resolve({value:h,done:!1});for(let t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}read(){return dt(this,null,function*(){if(this._queuedChunk){let s=this._queuedChunk;return this._queuedChunk=null,{value:s,done:!1}}if(this._done)return{value:void 0,done:!0};let h=new o.PromiseCapability;return this._requests.push(h),h.promise})}cancel(h){this._done=!0;for(let s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(H,r,k)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.PDFFetchStream=void 0;var o=k(1),y=k(20);function O(t,i,l){return{method:"GET",headers:t,signal:l.signal,mode:"cors",credentials:i?"include":"same-origin",redirect:"follow"}}function M(t){let i=new Headers;for(let l in t){let a=t[l];a!==void 0&&i.append(l,a)}return i}function B(t){return t instanceof Uint8Array?t.buffer:t instanceof ArrayBuffer?t:((0,o.warn)(`getArrayBuffer - unexpected data format: ${t}`),new Uint8Array(t).buffer)}class N{constructor(i){this.source=i,this.isHttp=/^https?:/i.test(i.url),this.httpHeaders=this.isHttp&&i.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,o.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new h(this),this._fullRequestReader}getRangeReader(i,l){if(l<=this._progressiveDataLength)return null;let a=new s(this,i,l);return this._rangeRequestReaders.push(a),a}cancelAllRequests(i){this._fullRequestReader?.cancel(i);for(let l of this._rangeRequestReaders.slice(0))l.cancel(i)}}r.PDFFetchStream=N;class h{constructor(i){this._stream=i,this._reader=null,this._loaded=0,this._filename=null;let l=i.source;this._withCredentials=l.withCredentials||!1,this._contentLength=l.length,this._headersCapability=new o.PromiseCapability,this._disableRange=l.disableRange||!1,this._rangeChunkSize=l.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!l.disableStream,this._isRangeSupported=!l.disableRange,this._headers=M(this._stream.httpHeaders);let a=l.url;fetch(a,O(this._headers,this._withCredentials,this._abortController)).then(e=>{if(!(0,y.validateResponseStatus)(e.status))throw(0,y.createResponseStatusError)(e.status,a);this._reader=e.body.getReader(),this._headersCapability.resolve();let u=C=>e.headers.get(C),{allowRangeRequests:f,suggestedLength:m}=(0,y.validateRangeRequestCapabilities)({getResponseHeader:u,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=f,this._contentLength=m||this._contentLength,this._filename=(0,y.extractFilenameFromHeader)(u),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new o.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){return dt(this,null,function*(){yield this._headersCapability.promise;let{value:i,done:l}=yield this._reader.read();return l?{value:i,done:l}:(this._loaded+=i.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:B(i),done:!1})})}cancel(i){this._reader?.cancel(i),this._abortController.abort()}}class s{constructor(i,l,a){this._stream=i,this._reader=null,this._loaded=0;let e=i.source;this._withCredentials=e.withCredentials||!1,this._readCapability=new o.PromiseCapability,this._isStreamingSupported=!e.disableStream,this._abortController=new AbortController,this._headers=M(this._stream.httpHeaders),this._headers.append("Range",`bytes=${l}-${a-1}`);let u=e.url;fetch(u,O(this._headers,this._withCredentials,this._abortController)).then(f=>{if(!(0,y.validateResponseStatus)(f.status))throw(0,y.createResponseStatusError)(f.status,u);this._readCapability.resolve(),this._reader=f.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}read(){return dt(this,null,function*(){yield this._readCapability.promise;let{value:i,done:l}=yield this._reader.read();return l?{value:i,done:l}:(this._loaded+=i.byteLength,this.onProgress?.({loaded:this._loaded}),{value:B(i),done:!1})})}cancel(i){this._reader?.cancel(i),this._abortController.abort()}}},(H,r,k)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.createResponseStatusError=N,r.extractFilenameFromHeader=B,r.validateRangeRequestCapabilities=M,r.validateResponseStatus=h;var o=k(1),y=k(21),O=k(6);function M({getResponseHeader:s,isHttp:t,rangeChunkSize:i,disableRange:l}){let a={allowRangeRequests:!1,suggestedLength:void 0},e=parseInt(s("Content-Length"),10);return!Number.isInteger(e)||(a.suggestedLength=e,e<=2*i)||l||!t||s("Accept-Ranges")!=="bytes"||(s("Content-Encoding")||"identity")!=="identity"||(a.allowRangeRequests=!0),a}function B(s){let t=s("Content-Disposition");if(t){let i=(0,y.getFilenameFromContentDispositionHeader)(t);if(i.includes("%"))try{i=decodeURIComponent(i)}catch{}if((0,O.isPdfFile)(i))return i}return null}function N(s,t){return s===404||s===0&&t.startsWith("file:")?new o.MissingPDFException('Missing PDF "'+t+'".'):new o.UnexpectedResponseException(`Unexpected server response (${s}) while retrieving PDF "${t}".`,s)}function h(s){return s===200||s===206}},(H,r,k)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.getFilenameFromContentDispositionHeader=y;var o=k(1);function y(O){let M=!0,B=N("filename\\*","i").exec(O);if(B){B=B[1];let e=i(B);return e=unescape(e),e=l(e),e=a(e),s(e)}if(B=t(O),B){let e=a(B);return s(e)}if(B=N("filename","i").exec(O),B){B=B[1];let e=i(B);return e=a(e),s(e)}function N(e,u){return new RegExp("(?:^|;)\\s*"+e+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',u)}function h(e,u){if(e){if(!/^[\x00-\xFF]+$/.test(u))return u;try{let f=new TextDecoder(e,{fatal:!0}),m=(0,o.stringToBytes)(u);u=f.decode(m),M=!1}catch{}}return u}function s(e){return M&&/[\x80-\xff]/.test(e)&&(e=h("utf-8",e),M&&(e=h("iso-8859-1",e))),e}function t(e){let u=[],f,m=N("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=m.exec(e))!==null;){let[,S,p,A]=f;if(S=parseInt(S,10),S in u){if(S===0)break;continue}u[S]=[p,A]}let C=[];for(let S=0;S<u.length&&S in u;++S){let[p,A]=u[S];A=i(A),p&&(A=unescape(A),S===0&&(A=l(A))),C.push(A)}return C.join("")}function i(e){if(e.startsWith('"')){let u=e.slice(1).split('\\"');for(let f=0;f<u.length;++f){let m=u[f].indexOf('"');m!==-1&&(u[f]=u[f].slice(0,m),u.length=f+1),u[f]=u[f].replaceAll(/\\(.)/g,"$1")}e=u.join('"')}return e}function l(e){let u=e.indexOf("'");if(u===-1)return e;let f=e.slice(0,u),C=e.slice(u+1).replace(/^[^']*'/,"");return h(f,C)}function a(e){return!e.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(e)?e:e.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(u,f,m,C){if(m==="q"||m==="Q")return C=C.replaceAll("_"," "),C=C.replaceAll(/=([0-9a-fA-F]{2})/g,function(S,p){return String.fromCharCode(parseInt(p,16))}),h(f,C);try{C=atob(C)}catch{}return h(f,C)})}return""}},(H,r,k)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.PDFNetworkStream=void 0;var o=k(1),y=k(20);let O=200,M=206;function B(i){let l=i.response;return typeof l!="string"?l:(0,o.stringToBytes)(l).buffer}class N{constructor(l,a={}){this.url=l,this.isHttp=/^https?:/i.test(l),this.httpHeaders=this.isHttp&&a.httpHeaders||Object.create(null),this.withCredentials=a.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(l,a,e){let u={begin:l,end:a};for(let f in e)u[f]=e[f];return this.request(u)}requestFull(l){return this.request(l)}request(l){let a=new XMLHttpRequest,e=this.currXhrId++,u=this.pendingRequests[e]={xhr:a};a.open("GET",this.url),a.withCredentials=this.withCredentials;for(let f in this.httpHeaders){let m=this.httpHeaders[f];m!==void 0&&a.setRequestHeader(f,m)}return this.isHttp&&"begin"in l&&"end"in l?(a.setRequestHeader("Range",`bytes=${l.begin}-${l.end-1}`),u.expectedStatus=M):u.expectedStatus=O,a.responseType="arraybuffer",l.onError&&(a.onerror=function(f){l.onError(a.status)}),a.onreadystatechange=this.onStateChange.bind(this,e),a.onprogress=this.onProgress.bind(this,e),u.onHeadersReceived=l.onHeadersReceived,u.onDone=l.onDone,u.onError=l.onError,u.onProgress=l.onProgress,a.send(null),e}onProgress(l,a){let e=this.pendingRequests[l];e&&e.onProgress?.(a)}onStateChange(l,a){let e=this.pendingRequests[l];if(!e)return;let u=e.xhr;if(u.readyState>=2&&e.onHeadersReceived&&(e.onHeadersReceived(),delete e.onHeadersReceived),u.readyState!==4||!(l in this.pendingRequests))return;if(delete this.pendingRequests[l],u.status===0&&this.isHttp){e.onError?.(u.status);return}let f=u.status||O;if(!(f===O&&e.expectedStatus===M)&&f!==e.expectedStatus){e.onError?.(u.status);return}let C=B(u);if(f===M){let S=u.getResponseHeader("Content-Range"),p=/bytes (\d+)-(\d+)\/(\d+)/.exec(S);e.onDone({begin:parseInt(p[1],10),chunk:C})}else C?e.onDone({begin:0,chunk:C}):e.onError?.(u.status)}getRequestXhr(l){return this.pendingRequests[l].xhr}isPendingRequest(l){return l in this.pendingRequests}abortRequest(l){let a=this.pendingRequests[l].xhr;delete this.pendingRequests[l],a.abort()}}class h{constructor(l){this._source=l,this._manager=new N(l.url,{httpHeaders:l.httpHeaders,withCredentials:l.withCredentials}),this._rangeChunkSize=l.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(l){let a=this._rangeRequestReaders.indexOf(l);a>=0&&this._rangeRequestReaders.splice(a,1)}getFullReader(){return(0,o.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new s(this._manager,this._source),this._fullRequestReader}getRangeReader(l,a){let e=new t(this._manager,l,a);return e.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(e),e}cancelAllRequests(l){this._fullRequestReader?.cancel(l);for(let a of this._rangeRequestReaders.slice(0))a.cancel(l)}}r.PDFNetworkStream=h;class s{constructor(l,a){this._manager=l;let e={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=a.url,this._fullRequestId=l.requestFull(e),this._headersReceivedCapability=new o.PromiseCapability,this._disableRange=a.disableRange||!1,this._contentLength=a.length,this._rangeChunkSize=a.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){let l=this._fullRequestId,a=this._manager.getRequestXhr(l),e=m=>a.getResponseHeader(m),{allowRangeRequests:u,suggestedLength:f}=(0,y.validateRangeRequestCapabilities)({getResponseHeader:e,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});u&&(this._isRangeSupported=!0),this._contentLength=f||this._contentLength,this._filename=(0,y.extractFilenameFromHeader)(e),this._isRangeSupported&&this._manager.abortRequest(l),this._headersReceivedCapability.resolve()}_onDone(l){if(l&&(this._requests.length>0?this._requests.shift().resolve({value:l.chunk,done:!1}):this._cachedChunks.push(l.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(let a of this._requests)a.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(l){this._storedError=(0,y.createResponseStatusError)(l,this._url),this._headersReceivedCapability.reject(this._storedError);for(let a of this._requests)a.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(l){this.onProgress?.({loaded:l.loaded,total:l.lengthComputable?l.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}read(){return dt(this,null,function*(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let l=new o.PromiseCapability;return this._requests.push(l),l.promise})}cancel(l){this._done=!0,this._headersReceivedCapability.reject(l);for(let a of this._requests)a.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class t{constructor(l,a,e){this._manager=l;let u={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=l.url,this._requestId=l.requestRange(a,e,u),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(l){let a=l.chunk;this._requests.length>0?this._requests.shift().resolve({value:a,done:!1}):this._queuedChunk=a,this._done=!0;for(let e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(l){this._storedError=(0,y.createResponseStatusError)(l,this._url);for(let a of this._requests)a.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(l){this.isStreamingSupported||this.onProgress?.({loaded:l.loaded})}get isStreamingSupported(){return!1}read(){return dt(this,null,function*(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){let a=this._queuedChunk;return this._queuedChunk=null,{value:a,done:!1}}if(this._done)return{value:void 0,done:!0};let l=new o.PromiseCapability;return this._requests.push(l),l.promise})}cancel(l){this._done=!0;for(let a of this._requests)a.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(H,r,k)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.PDFNodeStream=void 0;var o=k(1),y=k(20);let O=/^file:\/\/\/[a-zA-Z]:\//;function M(e){let u=Vt(),f=u.parse(e);return f.protocol==="file:"||f.host?f:/^[a-z]:[/\\]/i.test(e)?u.parse(`file:///${e}`):(f.host||(f.protocol="file:"),f)}class B{constructor(u){this.source=u,this.url=M(u.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&u.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,o.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new l(this):new t(this),this._fullRequestReader}getRangeReader(u,f){if(f<=this._progressiveDataLength)return null;let m=this.isFsUrl?new a(this,u,f):new i(this,u,f);return this._rangeRequestReaders.push(m),m}cancelAllRequests(u){this._fullRequestReader?.cancel(u);for(let f of this._rangeRequestReaders.slice(0))f.cancel(u)}}r.PDFNodeStream=B;class N{constructor(u){this._url=u.url,this._done=!1,this._storedError=null,this.onProgress=null;let f=u.source;this._contentLength=f.length,this._loaded=0,this._filename=null,this._disableRange=f.disableRange||!1,this._rangeChunkSize=f.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!f.disableStream,this._isRangeSupported=!f.disableRange,this._readableStream=null,this._readCapability=new o.PromiseCapability,this._headersCapability=new o.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){return dt(this,null,function*(){if(yield this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let u=this._readableStream.read();return u===null?(this._readCapability=new o.PromiseCapability,this.read()):(this._loaded+=u.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(u).buffer,done:!1})})}cancel(u){if(!this._readableStream){this._error(u);return}this._readableStream.destroy(u)}_error(u){this._storedError=u,this._readCapability.resolve()}_setReadableStream(u){this._readableStream=u,u.on("readable",()=>{this._readCapability.resolve()}),u.on("end",()=>{u.destroy(),this._done=!0,this._readCapability.resolve()}),u.on("error",f=>{this._error(f)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new o.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class h{constructor(u){this._url=u.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new o.PromiseCapability;let f=u.source;this._isStreamingSupported=!f.disableStream}get isStreamingSupported(){return this._isStreamingSupported}read(){return dt(this,null,function*(){if(yield this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let u=this._readableStream.read();return u===null?(this._readCapability=new o.PromiseCapability,this.read()):(this._loaded+=u.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(u).buffer,done:!1})})}cancel(u){if(!this._readableStream){this._error(u);return}this._readableStream.destroy(u)}_error(u){this._storedError=u,this._readCapability.resolve()}_setReadableStream(u){this._readableStream=u,u.on("readable",()=>{this._readCapability.resolve()}),u.on("end",()=>{u.destroy(),this._done=!0,this._readCapability.resolve()}),u.on("error",f=>{this._error(f)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function s(e,u){return{protocol:e.protocol,auth:e.auth,host:e.hostname,port:e.port,path:e.path,method:"GET",headers:u}}class t extends N{constructor(u){super(u);let f=m=>{if(m.statusCode===404){let A=new o.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=A,this._headersCapability.reject(A);return}this._headersCapability.resolve(),this._setReadableStream(m);let C=A=>this._readableStream.headers[A.toLowerCase()],{allowRangeRequests:S,suggestedLength:p}=(0,y.validateRangeRequestCapabilities)({getResponseHeader:C,isHttp:u.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=S,this._contentLength=p||this._contentLength,this._filename=(0,y.extractFilenameFromHeader)(C)};if(this._request=null,this._url.protocol==="http:"){let m=Gt();this._request=m.request(s(this._url,u.httpHeaders),f)}else{let m=zt();this._request=m.request(s(this._url,u.httpHeaders),f)}this._request.on("error",m=>{this._storedError=m,this._headersCapability.reject(m)}),this._request.end()}}class i extends h{constructor(u,f,m){super(u),this._httpHeaders={};for(let S in u.httpHeaders){let p=u.httpHeaders[S];p!==void 0&&(this._httpHeaders[S]=p)}this._httpHeaders.Range=`bytes=${f}-${m-1}`;let C=S=>{if(S.statusCode===404){let p=new o.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=p;return}this._setReadableStream(S)};if(this._request=null,this._url.protocol==="http:"){let S=Gt();this._request=S.request(s(this._url,this._httpHeaders),C)}else{let S=zt();this._request=S.request(s(this._url,this._httpHeaders),C)}this._request.on("error",S=>{this._storedError=S}),this._request.end()}}class l extends N{constructor(u){super(u);let f=decodeURIComponent(this._url.path);O.test(this._url.href)&&(f=f.replace(/^\//,""));let m=Nt();m.lstat(f,(C,S)=>{if(C){C.code==="ENOENT"&&(C=new o.MissingPDFException(`Missing PDF "${f}".`)),this._storedError=C,this._headersCapability.reject(C);return}this._contentLength=S.size,this._setReadableStream(m.createReadStream(f)),this._headersCapability.resolve()})}}class a extends h{constructor(u,f,m){super(u);let C=decodeURIComponent(this._url.path);O.test(this._url.href)&&(C=C.replace(/^\//,""));let S=Nt();this._setReadableStream(S.createReadStream(C,{start:f,end:m-1}))}}},(H,r,k)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.SVGGraphics=void 0;var o=k(6),y=k(1);let O={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},M="http://www.w3.org/XML/1998/namespace",B="http://www.w3.org/1999/xlink",N=["butt","round","square"],h=["miter","round","bevel"],s=function(S,p="",A=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!A)return URL.createObjectURL(new Blob([S],{type:p}));let I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",U=`data:${p};base64,`;for(let R=0,G=S.length;R<G;R+=3){let X=S[R]&255,it=S[R+1]&255,Z=S[R+2]&255,Q=X>>2,nt=(X&3)<<4|it>>4,J=R+1<G?(it&15)<<2|Z>>6:64,F=R+2<G?Z&63:64;U+=I[Q]+I[nt]+I[J]+I[F]}return U},t=function(){let S=new Uint8Array([137,80,78,71,13,10,26,10]),p=12,A=new Int32Array(256);for(let Z=0;Z<256;Z++){let Q=Z;for(let nt=0;nt<8;nt++)Q=Q&1?3988292384^Q>>1&2147483647:Q>>1&2147483647;A[Z]=Q}function I(Z,Q,nt){let J=-1;for(let F=Q;F<nt;F++){let b=(J^Z[F])&255,c=A[b];J=J>>>8^c}return J^-1}function U(Z,Q,nt,J){let F=J,b=Q.length;nt[F]=b>>24&255,nt[F+1]=b>>16&255,nt[F+2]=b>>8&255,nt[F+3]=b&255,F+=4,nt[F]=Z.charCodeAt(0)&255,nt[F+1]=Z.charCodeAt(1)&255,nt[F+2]=Z.charCodeAt(2)&255,nt[F+3]=Z.charCodeAt(3)&255,F+=4,nt.set(Q,F),F+=Q.length;let c=I(nt,J+4,F);nt[F]=c>>24&255,nt[F+1]=c>>16&255,nt[F+2]=c>>8&255,nt[F+3]=c&255}function R(Z,Q,nt){let J=1,F=0;for(let b=Q;b<nt;++b)J=(J+(Z[b]&255))%65521,F=(F+J)%65521;return F<<16|J}function G(Z){if(!y.isNodeJS)return X(Z);try{let Q=parseInt(process.versions.node)>=8?Z:Buffer.from(Z),nt=qt().deflateSync(Q,{level:9});return nt instanceof Uint8Array?nt:new Uint8Array(nt)}catch(Q){(0,y.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+Q)}return X(Z)}function X(Z){let Q=Z.length,nt=65535,J=Math.ceil(Q/nt),F=new Uint8Array(2+Q+J*5+4),b=0;F[b++]=120,F[b++]=156;let c=0;for(;Q>nt;)F[b++]=0,F[b++]=255,F[b++]=255,F[b++]=0,F[b++]=0,F.set(Z.subarray(c,c+nt),b),b+=nt,c+=nt,Q-=nt;F[b++]=1,F[b++]=Q&255,F[b++]=Q>>8&255,F[b++]=~Q&65535&255,F[b++]=(~Q&65535)>>8&255,F.set(Z.subarray(c),b),b+=Z.length-c;let d=R(Z,0,Z.length);return F[b++]=d>>24&255,F[b++]=d>>16&255,F[b++]=d>>8&255,F[b++]=d&255,F}function it(Z,Q,nt,J){let F=Z.width,b=Z.height,c,d,_,P=Z.data;switch(Q){case y.ImageKind.GRAYSCALE_1BPP:d=0,c=1,_=F+7>>3;break;case y.ImageKind.RGB_24BPP:d=2,c=8,_=F*3;break;case y.ImageKind.RGBA_32BPP:d=6,c=8,_=F*4;break;default:throw new Error("invalid format")}let x=new Uint8Array((1+_)*b),D=0,E=0;for(let L=0;L<b;++L)x[D++]=0,x.set(P.subarray(E,E+_),D),E+=_,D+=_;if(Q===y.ImageKind.GRAYSCALE_1BPP&&J){D=0;for(let L=0;L<b;L++){D++;for(let j=0;j<_;j++)x[D++]^=255}}let n=new Uint8Array([F>>24&255,F>>16&255,F>>8&255,F&255,b>>24&255,b>>16&255,b>>8&255,b&255,c,d,0,0,0]),g=G(x),v=S.length+p*3+n.length+g.length,w=new Uint8Array(v),T=0;return w.set(S,T),T+=S.length,U("IHDR",n,w,T),T+=p+n.length,U("IDATA",g,w,T),T+=p+g.length,U("IEND",new Uint8Array(0),w,T),s(w,"image/png",nt)}return function(Q,nt,J){let F=Q.kind===void 0?y.ImageKind.GRAYSCALE_1BPP:Q.kind;return it(Q,F,nt,J)}}();class i{constructor(){this.fontSizeScale=1,this.fontWeight=O.fontWeight,this.fontSize=0,this.textMatrix=y.IDENTITY_MATRIX,this.fontMatrix=y.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=y.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=O.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(p,A){this.x=p,this.y=A}}function l(S){let p=[],A=[];for(let I of S){if(I.fn==="save"){p.push({fnId:92,fn:"group",items:[]}),A.push(p),p=p.at(-1).items;continue}I.fn==="restore"?p=A.pop():p.push(I)}return p}function a(S){if(Number.isInteger(S))return S.toString();let p=S.toFixed(10),A=p.length-1;if(p[A]!=="0")return p;do A--;while(p[A]==="0");return p.substring(0,p[A]==="."?A:A+1)}function e(S){if(S[4]===0&&S[5]===0){if(S[1]===0&&S[2]===0)return S[0]===1&&S[3]===1?"":`scale(${a(S[0])} ${a(S[3])})`;if(S[0]===S[3]&&S[1]===-S[2]){let p=Math.acos(S[0])*180/Math.PI;return`rotate(${a(p)})`}}else if(S[0]===1&&S[1]===0&&S[2]===0&&S[3]===1)return`translate(${a(S[4])} ${a(S[5])})`;return`matrix(${a(S[0])} ${a(S[1])} ${a(S[2])} ${a(S[3])} ${a(S[4])} ${a(S[5])})`}let u=0,f=0,m=0;class C{constructor(p,A,I=!1){(0,o.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new o.DOMSVGFactory,this.current=new i,this.transformMatrix=y.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=p,this.objs=A,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!I,this._operatorIdMapping=[];for(let U in y.OPS)this._operatorIdMapping[y.OPS[U]]=U}getObject(p,A=null){return typeof p=="string"?p.startsWith("g_")?this.commonObjs.get(p):this.objs.get(p):A}save(){this.transformStack.push(this.transformMatrix);let p=this.current;this.extraStack.push(p),this.current=p.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(p){this.save(),this.executeOpTree(p),this.restore()}loadDependencies(p){let A=p.fnArray,I=p.argsArray;for(let U=0,R=A.length;U<R;U++)if(A[U]===y.OPS.dependency)for(let G of I[U]){let X=G.startsWith("g_")?this.commonObjs:this.objs,it=new Promise(Z=>{X.get(G,Z)});this.current.dependencies.push(it)}return Promise.all(this.current.dependencies)}transform(p,A,I,U,R,G){let X=[p,A,I,U,R,G];this.transformMatrix=y.Util.transform(this.transformMatrix,X),this.tgrp=null}getSVG(p,A){this.viewport=A;let I=this._initialize(A);return this.loadDependencies(p).then(()=>(this.transformMatrix=y.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(p)),I))}convertOpList(p){let A=this._operatorIdMapping,I=p.argsArray,U=p.fnArray,R=[];for(let G=0,X=U.length;G<X;G++){let it=U[G];R.push({fnId:it,fn:A[it],args:I[G]})}return l(R)}executeOpTree(p){for(let A of p){let I=A.fn,U=A.fnId,R=A.args;switch(U|0){case y.OPS.beginText:this.beginText();break;case y.OPS.dependency:break;case y.OPS.setLeading:this.setLeading(R);break;case y.OPS.setLeadingMoveText:this.setLeadingMoveText(R[0],R[1]);break;case y.OPS.setFont:this.setFont(R);break;case y.OPS.showText:this.showText(R[0]);break;case y.OPS.showSpacedText:this.showText(R[0]);break;case y.OPS.endText:this.endText();break;case y.OPS.moveText:this.moveText(R[0],R[1]);break;case y.OPS.setCharSpacing:this.setCharSpacing(R[0]);break;case y.OPS.setWordSpacing:this.setWordSpacing(R[0]);break;case y.OPS.setHScale:this.setHScale(R[0]);break;case y.OPS.setTextMatrix:this.setTextMatrix(R[0],R[1],R[2],R[3],R[4],R[5]);break;case y.OPS.setTextRise:this.setTextRise(R[0]);break;case y.OPS.setTextRenderingMode:this.setTextRenderingMode(R[0]);break;case y.OPS.setLineWidth:this.setLineWidth(R[0]);break;case y.OPS.setLineJoin:this.setLineJoin(R[0]);break;case y.OPS.setLineCap:this.setLineCap(R[0]);break;case y.OPS.setMiterLimit:this.setMiterLimit(R[0]);break;case y.OPS.setFillRGBColor:this.setFillRGBColor(R[0],R[1],R[2]);break;case y.OPS.setStrokeRGBColor:this.setStrokeRGBColor(R[0],R[1],R[2]);break;case y.OPS.setStrokeColorN:this.setStrokeColorN(R);break;case y.OPS.setFillColorN:this.setFillColorN(R);break;case y.OPS.shadingFill:this.shadingFill(R[0]);break;case y.OPS.setDash:this.setDash(R[0],R[1]);break;case y.OPS.setRenderingIntent:this.setRenderingIntent(R[0]);break;case y.OPS.setFlatness:this.setFlatness(R[0]);break;case y.OPS.setGState:this.setGState(R[0]);break;case y.OPS.fill:this.fill();break;case y.OPS.eoFill:this.eoFill();break;case y.OPS.stroke:this.stroke();break;case y.OPS.fillStroke:this.fillStroke();break;case y.OPS.eoFillStroke:this.eoFillStroke();break;case y.OPS.clip:this.clip("nonzero");break;case y.OPS.eoClip:this.clip("evenodd");break;case y.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case y.OPS.paintImageXObject:this.paintImageXObject(R[0]);break;case y.OPS.paintInlineImageXObject:this.paintInlineImageXObject(R[0]);break;case y.OPS.paintImageMaskXObject:this.paintImageMaskXObject(R[0]);break;case y.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(R[0],R[1]);break;case y.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case y.OPS.closePath:this.closePath();break;case y.OPS.closeStroke:this.closeStroke();break;case y.OPS.closeFillStroke:this.closeFillStroke();break;case y.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case y.OPS.nextLine:this.nextLine();break;case y.OPS.transform:this.transform(R[0],R[1],R[2],R[3],R[4],R[5]);break;case y.OPS.constructPath:this.constructPath(R[0],R[1]);break;case y.OPS.endPath:this.endPath();break;case 92:this.group(A.items);break;default:(0,y.warn)(`Unimplemented operator ${I}`);break}}}setWordSpacing(p){this.current.wordSpacing=p}setCharSpacing(p){this.current.charSpacing=p}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(p,A,I,U,R,G){let X=this.current;X.textMatrix=X.lineMatrix=[p,A,I,U,R,G],X.textMatrixScale=Math.hypot(p,A),X.x=X.lineX=0,X.y=X.lineY=0,X.xcoords=[],X.ycoords=[],X.tspan=this.svgFactory.createElement("svg:tspan"),X.tspan.setAttributeNS(null,"font-family",X.fontFamily),X.tspan.setAttributeNS(null,"font-size",`${a(X.fontSize)}px`),X.tspan.setAttributeNS(null,"y",a(-X.y)),X.txtElement=this.svgFactory.createElement("svg:text"),X.txtElement.append(X.tspan)}beginText(){let p=this.current;p.x=p.lineX=0,p.y=p.lineY=0,p.textMatrix=y.IDENTITY_MATRIX,p.lineMatrix=y.IDENTITY_MATRIX,p.textMatrixScale=1,p.tspan=this.svgFactory.createElement("svg:tspan"),p.txtElement=this.svgFactory.createElement("svg:text"),p.txtgrp=this.svgFactory.createElement("svg:g"),p.xcoords=[],p.ycoords=[]}moveText(p,A){let I=this.current;I.x=I.lineX+=p,I.y=I.lineY+=A,I.xcoords=[],I.ycoords=[],I.tspan=this.svgFactory.createElement("svg:tspan"),I.tspan.setAttributeNS(null,"font-family",I.fontFamily),I.tspan.setAttributeNS(null,"font-size",`${a(I.fontSize)}px`),I.tspan.setAttributeNS(null,"y",a(-I.y))}showText(p){let A=this.current,I=A.font,U=A.fontSize;if(U===0)return;let R=A.fontSizeScale,G=A.charSpacing,X=A.wordSpacing,it=A.fontDirection,Z=A.textHScale*it,Q=I.vertical,nt=Q?1:-1,J=I.defaultVMetrics,F=U*A.fontMatrix[0],b=0;for(let _ of p){if(_===null){b+=it*X;continue}else if(typeof _=="number"){b+=nt*_*U/1e3;continue}let P=(_.isSpace?X:0)+G,x=_.fontChar,D,E,n=_.width;if(Q){let v,w=_.vmetric||J;v=_.vmetric?w[1]:n*.5,v=-v*F;let T=w[2]*F;n=w?-w[0]:n,D=v/R,E=(b+T)/R}else D=b/R,E=0;(_.isInFont||I.missingFile)&&(A.xcoords.push(A.x+D),Q&&A.ycoords.push(-A.y+E),A.tspan.textContent+=x);let g=Q?n*F-P*it:n*F+P*it;b+=g}A.tspan.setAttributeNS(null,"x",A.xcoords.map(a).join(" ")),Q?A.tspan.setAttributeNS(null,"y",A.ycoords.map(a).join(" ")):A.tspan.setAttributeNS(null,"y",a(-A.y)),Q?A.y-=b:A.x+=b*Z,A.tspan.setAttributeNS(null,"font-family",A.fontFamily),A.tspan.setAttributeNS(null,"font-size",`${a(A.fontSize)}px`),A.fontStyle!==O.fontStyle&&A.tspan.setAttributeNS(null,"font-style",A.fontStyle),A.fontWeight!==O.fontWeight&&A.tspan.setAttributeNS(null,"font-weight",A.fontWeight);let c=A.textRenderingMode&y.TextRenderingMode.FILL_STROKE_MASK;if(c===y.TextRenderingMode.FILL||c===y.TextRenderingMode.FILL_STROKE?(A.fillColor!==O.fillColor&&A.tspan.setAttributeNS(null,"fill",A.fillColor),A.fillAlpha<1&&A.tspan.setAttributeNS(null,"fill-opacity",A.fillAlpha)):A.textRenderingMode===y.TextRenderingMode.ADD_TO_PATH?A.tspan.setAttributeNS(null,"fill","transparent"):A.tspan.setAttributeNS(null,"fill","none"),c===y.TextRenderingMode.STROKE||c===y.TextRenderingMode.FILL_STROKE){let _=1/(A.textMatrixScale||1);this._setStrokeAttributes(A.tspan,_)}let d=A.textMatrix;A.textRise!==0&&(d=d.slice(),d[5]+=A.textRise),A.txtElement.setAttributeNS(null,"transform",`${e(d)} scale(${a(Z)}, -1)`),A.txtElement.setAttributeNS(M,"xml:space","preserve"),A.txtElement.append(A.tspan),A.txtgrp.append(A.txtElement),this._ensureTransformGroup().append(A.txtElement)}setLeadingMoveText(p,A){this.setLeading(-A),this.moveText(p,A)}addFontStyle(p){if(!p.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));let A=s(p.data,p.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${p.loadedName}"; src: url(${A}); }
`}setFont(p){let A=this.current,I=this.commonObjs.get(p[0]),U=p[1];A.font=I,this.embedFonts&&!I.missingFile&&!this.embeddedFonts[I.loadedName]&&(this.addFontStyle(I),this.embeddedFonts[I.loadedName]=I),A.fontMatrix=I.fontMatrix||y.FONT_IDENTITY_MATRIX;let R="normal";I.black?R="900":I.bold&&(R="bold");let G=I.italic?"italic":"normal";U<0?(U=-U,A.fontDirection=-1):A.fontDirection=1,A.fontSize=U,A.fontFamily=I.loadedName,A.fontWeight=R,A.fontStyle=G,A.tspan=this.svgFactory.createElement("svg:tspan"),A.tspan.setAttributeNS(null,"y",a(-A.y)),A.xcoords=[],A.ycoords=[]}endText(){let p=this.current;p.textRenderingMode&y.TextRenderingMode.ADD_TO_PATH_FLAG&&p.txtElement?.hasChildNodes()&&(p.element=p.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(p){p>0&&(this.current.lineWidth=p)}setLineCap(p){this.current.lineCap=N[p]}setLineJoin(p){this.current.lineJoin=h[p]}setMiterLimit(p){this.current.miterLimit=p}setStrokeAlpha(p){this.current.strokeAlpha=p}setStrokeRGBColor(p,A,I){this.current.strokeColor=y.Util.makeHexColor(p,A,I)}setFillAlpha(p){this.current.fillAlpha=p}setFillRGBColor(p,A,I){this.current.fillColor=y.Util.makeHexColor(p,A,I),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(p){this.current.strokeColor=this._makeColorN_Pattern(p)}setFillColorN(p){this.current.fillColor=this._makeColorN_Pattern(p)}shadingFill(p){let{width:A,height:I}=this.viewport,U=y.Util.inverseTransform(this.transformMatrix),[R,G,X,it]=y.Util.getAxialAlignedBoundingBox([0,0,A,I],U),Z=this.svgFactory.createElement("svg:rect");Z.setAttributeNS(null,"x",R),Z.setAttributeNS(null,"y",G),Z.setAttributeNS(null,"width",X-R),Z.setAttributeNS(null,"height",it-G),Z.setAttributeNS(null,"fill",this._makeShadingPattern(p)),this.current.fillAlpha<1&&Z.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(Z)}_makeColorN_Pattern(p){return p[0]==="TilingPattern"?this._makeTilingPattern(p):this._makeShadingPattern(p)}_makeTilingPattern(p){let A=p[1],I=p[2],U=p[3]||y.IDENTITY_MATRIX,[R,G,X,it]=p[4],Z=p[5],Q=p[6],nt=p[7],J=`shading${m++}`,[F,b,c,d]=y.Util.normalizeRect([...y.Util.applyTransform([R,G],U),...y.Util.applyTransform([X,it],U)]),[_,P]=y.Util.singularValueDecompose2dScale(U),x=Z*_,D=Q*P,E=this.svgFactory.createElement("svg:pattern");E.setAttributeNS(null,"id",J),E.setAttributeNS(null,"patternUnits","userSpaceOnUse"),E.setAttributeNS(null,"width",x),E.setAttributeNS(null,"height",D),E.setAttributeNS(null,"x",`${F}`),E.setAttributeNS(null,"y",`${b}`);let n=this.svg,g=this.transformMatrix,v=this.current.fillColor,w=this.current.strokeColor,T=this.svgFactory.create(c-F,d-b);if(this.svg=T,this.transformMatrix=U,nt===2){let L=y.Util.makeHexColor(...A);this.current.fillColor=L,this.current.strokeColor=L}return this.executeOpTree(this.convertOpList(I)),this.svg=n,this.transformMatrix=g,this.current.fillColor=v,this.current.strokeColor=w,E.append(T.childNodes[0]),this.defs.append(E),`url(#${J})`}_makeShadingPattern(p){switch(typeof p=="string"&&(p=this.objs.get(p)),p[0]){case"RadialAxial":let A=`shading${m++}`,I=p[3],U;switch(p[1]){case"axial":let R=p[4],G=p[5];U=this.svgFactory.createElement("svg:linearGradient"),U.setAttributeNS(null,"id",A),U.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),U.setAttributeNS(null,"x1",R[0]),U.setAttributeNS(null,"y1",R[1]),U.setAttributeNS(null,"x2",G[0]),U.setAttributeNS(null,"y2",G[1]);break;case"radial":let X=p[4],it=p[5],Z=p[6],Q=p[7];U=this.svgFactory.createElement("svg:radialGradient"),U.setAttributeNS(null,"id",A),U.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),U.setAttributeNS(null,"cx",it[0]),U.setAttributeNS(null,"cy",it[1]),U.setAttributeNS(null,"r",Q),U.setAttributeNS(null,"fx",X[0]),U.setAttributeNS(null,"fy",X[1]),U.setAttributeNS(null,"fr",Z);break;default:throw new Error(`Unknown RadialAxial type: ${p[1]}`)}for(let R of I){let G=this.svgFactory.createElement("svg:stop");G.setAttributeNS(null,"offset",R[0]),G.setAttributeNS(null,"stop-color",R[1]),U.append(G)}return this.defs.append(U),`url(#${A})`;case"Mesh":return(0,y.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${p[0]}`)}}setDash(p,A){this.current.dashArray=p,this.current.dashPhase=A}constructPath(p,A){let I=this.current,U=I.x,R=I.y,G=[],X=0;for(let it of p)switch(it|0){case y.OPS.rectangle:U=A[X++],R=A[X++];let Z=A[X++],Q=A[X++],nt=U+Z,J=R+Q;G.push("M",a(U),a(R),"L",a(nt),a(R),"L",a(nt),a(J),"L",a(U),a(J),"Z");break;case y.OPS.moveTo:U=A[X++],R=A[X++],G.push("M",a(U),a(R));break;case y.OPS.lineTo:U=A[X++],R=A[X++],G.push("L",a(U),a(R));break;case y.OPS.curveTo:U=A[X+4],R=A[X+5],G.push("C",a(A[X]),a(A[X+1]),a(A[X+2]),a(A[X+3]),a(U),a(R)),X+=6;break;case y.OPS.curveTo2:G.push("C",a(U),a(R),a(A[X]),a(A[X+1]),a(A[X+2]),a(A[X+3])),U=A[X+2],R=A[X+3],X+=4;break;case y.OPS.curveTo3:U=A[X+2],R=A[X+3],G.push("C",a(A[X]),a(A[X+1]),a(U),a(R),a(U),a(R)),X+=4;break;case y.OPS.closePath:G.push("Z");break}G=G.join(" "),I.path&&p.length>0&&p[0]!==y.OPS.rectangle&&p[0]!==y.OPS.moveTo?G=I.path.getAttributeNS(null,"d")+G:(I.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(I.path)),I.path.setAttributeNS(null,"d",G),I.path.setAttributeNS(null,"fill","none"),I.element=I.path,I.setCurrentPoint(U,R)}endPath(){let p=this.current;if(p.path=null,!this.pendingClip)return;if(!p.element){this.pendingClip=null;return}let A=`clippath${u++}`,I=this.svgFactory.createElement("svg:clipPath");I.setAttributeNS(null,"id",A),I.setAttributeNS(null,"transform",e(this.transformMatrix));let U=p.element.cloneNode(!0);if(this.pendingClip==="evenodd"?U.setAttributeNS(null,"clip-rule","evenodd"):U.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,I.append(U),this.defs.append(I),p.activeClipUrl){p.clipGroup=null;for(let R of this.extraStack)R.clipGroup=null;I.setAttributeNS(null,"clip-path",p.activeClipUrl)}p.activeClipUrl=`url(#${A})`,this.tgrp=null}clip(p){this.pendingClip=p}closePath(){let p=this.current;if(p.path){let A=`${p.path.getAttributeNS(null,"d")}Z`;p.path.setAttributeNS(null,"d",A)}}setLeading(p){this.current.leading=-p}setTextRise(p){this.current.textRise=p}setTextRenderingMode(p){this.current.textRenderingMode=p}setHScale(p){this.current.textHScale=p/100}setRenderingIntent(p){}setFlatness(p){}setGState(p){for(let[A,I]of p)switch(A){case"LW":this.setLineWidth(I);break;case"LC":this.setLineCap(I);break;case"LJ":this.setLineJoin(I);break;case"ML":this.setMiterLimit(I);break;case"D":this.setDash(I[0],I[1]);break;case"RI":this.setRenderingIntent(I);break;case"FL":this.setFlatness(I);break;case"Font":this.setFont(I);break;case"CA":this.setStrokeAlpha(I);break;case"ca":this.setFillAlpha(I);break;default:(0,y.warn)(`Unimplemented graphic state operator ${A}`);break}}fill(){let p=this.current;p.element&&(p.element.setAttributeNS(null,"fill",p.fillColor),p.element.setAttributeNS(null,"fill-opacity",p.fillAlpha),this.endPath())}stroke(){let p=this.current;p.element&&(this._setStrokeAttributes(p.element),p.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(p,A=1){let I=this.current,U=I.dashArray;A!==1&&U.length>0&&(U=U.map(function(R){return A*R})),p.setAttributeNS(null,"stroke",I.strokeColor),p.setAttributeNS(null,"stroke-opacity",I.strokeAlpha),p.setAttributeNS(null,"stroke-miterlimit",a(I.miterLimit)),p.setAttributeNS(null,"stroke-linecap",I.lineCap),p.setAttributeNS(null,"stroke-linejoin",I.lineJoin),p.setAttributeNS(null,"stroke-width",a(A*I.lineWidth)+"px"),p.setAttributeNS(null,"stroke-dasharray",U.map(a).join(" ")),p.setAttributeNS(null,"stroke-dashoffset",a(A*I.dashPhase)+"px")}eoFill(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){let p=this.svgFactory.createElement("svg:rect");p.setAttributeNS(null,"x","0"),p.setAttributeNS(null,"y","0"),p.setAttributeNS(null,"width","1px"),p.setAttributeNS(null,"height","1px"),p.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(p)}paintImageXObject(p){let A=this.getObject(p);if(!A){(0,y.warn)(`Dependent image with object ID ${p} is not ready yet`);return}this.paintInlineImageXObject(A)}paintInlineImageXObject(p,A){let I=p.width,U=p.height,R=t(p,this.forceDataSchema,!!A),G=this.svgFactory.createElement("svg:rect");G.setAttributeNS(null,"x","0"),G.setAttributeNS(null,"y","0"),G.setAttributeNS(null,"width",a(I)),G.setAttributeNS(null,"height",a(U)),this.current.element=G,this.clip("nonzero");let X=this.svgFactory.createElement("svg:image");X.setAttributeNS(B,"xlink:href",R),X.setAttributeNS(null,"x","0"),X.setAttributeNS(null,"y",a(-U)),X.setAttributeNS(null,"width",a(I)+"px"),X.setAttributeNS(null,"height",a(U)+"px"),X.setAttributeNS(null,"transform",`scale(${a(1/I)} ${a(-1/U)})`),A?A.append(X):this._ensureTransformGroup().append(X)}paintImageMaskXObject(p){let A=this.getObject(p.data,p);if(A.bitmap){(0,y.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}let I=this.current,U=A.width,R=A.height,G=I.fillColor;I.maskId=`mask${f++}`;let X=this.svgFactory.createElement("svg:mask");X.setAttributeNS(null,"id",I.maskId);let it=this.svgFactory.createElement("svg:rect");it.setAttributeNS(null,"x","0"),it.setAttributeNS(null,"y","0"),it.setAttributeNS(null,"width",a(U)),it.setAttributeNS(null,"height",a(R)),it.setAttributeNS(null,"fill",G),it.setAttributeNS(null,"mask",`url(#${I.maskId})`),this.defs.append(X),this._ensureTransformGroup().append(it),this.paintInlineImageXObject(A,X)}paintFormXObjectBegin(p,A){if(Array.isArray(p)&&p.length===6&&this.transform(p[0],p[1],p[2],p[3],p[4],p[5]),A){let I=A[2]-A[0],U=A[3]-A[1],R=this.svgFactory.createElement("svg:rect");R.setAttributeNS(null,"x",A[0]),R.setAttributeNS(null,"y",A[1]),R.setAttributeNS(null,"width",a(I)),R.setAttributeNS(null,"height",a(U)),this.current.element=R,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(p){let A=this.svgFactory.create(p.width,p.height),I=this.svgFactory.createElement("svg:defs");A.append(I),this.defs=I;let U=this.svgFactory.createElement("svg:g");return U.setAttributeNS(null,"transform",e(p.transform)),A.append(U),this.svg=U,A}_ensureClipGroup(){if(!this.current.clipGroup){let p=this.svgFactory.createElement("svg:g");p.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(p),this.current.clipGroup=p}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",e(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}r.SVGGraphics=C},(H,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.XfaText=void 0;class k{static textContent(y){let O=[],M={items:O,styles:Object.create(null)};function B(N){if(!N)return;let h=null,s=N.name;if(s==="#text")h=N.value;else if(k.shouldBuildText(s))N?.attributes?.textContent?h=N.attributes.textContent:N.value&&(h=N.value);else return;if(h!==null&&O.push({str:h}),!!N.children)for(let t of N.children)B(t)}return B(y),M}static shouldBuildText(y){return!(y==="textarea"||y==="input"||y==="option"||y==="select")}}r.XfaText=k},(H,r,k)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.TextLayerRenderTask=void 0,r.renderTextLayer=e,r.updateTextLayer=u;var o=k(1),y=k(6);let O=1e5,M=30,B=.8,N=new Map;function h(f,m){let C;if(m&&o.FeatureTest.isOffscreenCanvasSupported)C=new OffscreenCanvas(f,f).getContext("2d",{alpha:!1});else{let S=document.createElement("canvas");S.width=S.height=f,C=S.getContext("2d",{alpha:!1})}return C}function s(f,m){let C=N.get(f);if(C)return C;let S=h(M,m);S.font=`${M}px ${f}`;let p=S.measureText(""),A=p.fontBoundingBoxAscent,I=Math.abs(p.fontBoundingBoxDescent);if(A){let R=A/(A+I);return N.set(f,R),S.canvas.width=S.canvas.height=0,R}S.strokeStyle="red",S.clearRect(0,0,M,M),S.strokeText("g",0,0);let U=S.getImageData(0,0,M,M).data;I=0;for(let R=U.length-1-3;R>=0;R-=4)if(U[R]>0){I=Math.ceil(R/4/M);break}S.clearRect(0,0,M,M),S.strokeText("A",0,M),U=S.getImageData(0,0,M,M).data,A=0;for(let R=0,G=U.length;R<G;R+=4)if(U[R]>0){A=M-Math.floor(R/4/M);break}if(S.canvas.width=S.canvas.height=0,A){let R=A/(A+I);return N.set(f,R),R}return N.set(f,B),B}function t(f,m,C){let S=document.createElement("span"),p={angle:0,canvasWidth:0,hasText:m.str!=="",hasEOL:m.hasEOL,fontSize:0};f._textDivs.push(S);let A=o.Util.transform(f._transform,m.transform),I=Math.atan2(A[1],A[0]),U=C[m.fontName];U.vertical&&(I+=Math.PI/2);let R=Math.hypot(A[2],A[3]),G=R*s(U.fontFamily,f._isOffscreenCanvasSupported),X,it;I===0?(X=A[4],it=A[5]-G):(X=A[4]+G*Math.sin(I),it=A[5]-G*Math.cos(I));let Z="calc(var(--scale-factor)*",Q=S.style;f._container===f._rootContainer?(Q.left=`${(100*X/f._pageWidth).toFixed(2)}%`,Q.top=`${(100*it/f._pageHeight).toFixed(2)}%`):(Q.left=`${Z}${X.toFixed(2)}px)`,Q.top=`${Z}${it.toFixed(2)}px)`),Q.fontSize=`${Z}${R.toFixed(2)}px)`,Q.fontFamily=U.fontFamily,p.fontSize=R,S.setAttribute("role","presentation"),S.textContent=m.str,S.dir=m.dir,f._fontInspectorEnabled&&(S.dataset.fontName=m.fontName),I!==0&&(p.angle=I*(180/Math.PI));let nt=!1;if(m.str.length>1)nt=!0;else if(m.str!==" "&&m.transform[0]!==m.transform[3]){let J=Math.abs(m.transform[0]),F=Math.abs(m.transform[3]);J!==F&&Math.max(J,F)/Math.min(J,F)>1.5&&(nt=!0)}nt&&(p.canvasWidth=U.vertical?m.height:m.width),f._textDivProperties.set(S,p),f._isReadableStream&&f._layoutText(S)}function i(f){let{div:m,scale:C,properties:S,ctx:p,prevFontSize:A,prevFontFamily:I}=f,{style:U}=m,R="";if(S.canvasWidth!==0&&S.hasText){let{fontFamily:G}=U,{canvasWidth:X,fontSize:it}=S;(A!==it||I!==G)&&(p.font=`${it*C}px ${G}`,f.prevFontSize=it,f.prevFontFamily=G);let{width:Z}=p.measureText(m.textContent);Z>0&&(R=`scaleX(${X*C/Z})`)}S.angle!==0&&(R=`rotate(${S.angle}deg) ${R}`),R.length>0&&(U.transform=R)}function l(f){if(f._canceled)return;let m=f._textDivs,C=f._capability;if(m.length>O){C.resolve();return}if(!f._isReadableStream)for(let p of m)f._layoutText(p);C.resolve()}class a{constructor({textContentSource:m,container:C,viewport:S,textDivs:p,textDivProperties:A,textContentItemsStr:I,isOffscreenCanvasSupported:U}){this._textContentSource=m,this._isReadableStream=m instanceof ReadableStream,this._container=this._rootContainer=C,this._textDivs=p||[],this._textContentItemsStr=I||[],this._isOffscreenCanvasSupported=U,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._textDivProperties=A||new WeakMap,this._canceled=!1,this._capability=new o.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:S.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:h(0,U)};let{pageWidth:R,pageHeight:G,pageX:X,pageY:it}=S.rawDims;this._transform=[1,0,0,-1,-X,it+G],this._pageWidth=R,this._pageHeight=G,(0,y.setLayerDimensions)(C,S),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new o.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new o.AbortException("TextLayer task cancelled."))}_processItems(m,C){for(let S of m){if(S.str===void 0){if(S.type==="beginMarkedContentProps"||S.type==="beginMarkedContent"){let p=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),S.id!==null&&this._container.setAttribute("id",`${S.id}`),p.append(this._container)}else S.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(S.str),t(this,S,C)}}_layoutText(m){let C=this._layoutTextParams.properties=this._textDivProperties.get(m);if(this._layoutTextParams.div=m,i(this._layoutTextParams),C.hasText&&this._container.append(m),C.hasEOL){let S=document.createElement("br");S.setAttribute("role","presentation"),this._container.append(S)}}_render(){let m=new o.PromiseCapability,C=Object.create(null);if(this._isReadableStream){let S=()=>{this._reader.read().then(({value:p,done:A})=>{if(A){m.resolve();return}Object.assign(C,p.styles),this._processItems(p.items,C),S()},m.reject)};this._reader=this._textContentSource.getReader(),S()}else if(this._textContentSource){let{items:S,styles:p}=this._textContentSource;this._processItems(S,p),m.resolve()}else throw new Error('No "textContentSource" parameter specified.');m.promise.then(()=>{C=null,l(this)},this._capability.reject)}}r.TextLayerRenderTask=a;function e(f){!f.textContentSource&&(f.textContent||f.textContentStream)&&((0,y.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),f.textContentSource=f.textContent||f.textContentStream);let{container:m,viewport:C}=f,S=getComputedStyle(m),p=S.getPropertyValue("visibility"),A=parseFloat(S.getPropertyValue("--scale-factor"));p==="visible"&&(!A||Math.abs(A-C.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");let I=new a(f);return I._render(),I}function u({container:f,viewport:m,textDivs:C,textDivProperties:S,isOffscreenCanvasSupported:p,mustRotate:A=!0,mustRescale:I=!0}){if(A&&(0,y.setLayerDimensions)(f,{rotation:m.rotation}),I){let U=h(0,p),G={prevFontSize:null,prevFontFamily:null,div:null,scale:m.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:U};for(let X of C)G.properties=S.get(X),G.div=X,i(G)}}},(H,r,k)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.AnnotationEditorLayer=void 0;var o=k(1),y=k(4),O=k(28),M=k(33),B=k(6),N=k(34);let h=(()=>{class s{#t;#e=!1;#i=null;#s=this.pointerup.bind(this);#o=this.pointerdown.bind(this);#a=new Map;#r=!1;#l=!1;#c=!1;#n;static _initialized=!1;constructor({uiManager:i,pageIndex:l,div:a,accessibilityManager:e,annotationLayer:u,viewport:f,l10n:m}){let C=[O.FreeTextEditor,M.InkEditor,N.StampEditor];if(!s._initialized){s._initialized=!0;for(let S of C)S.initialize(m)}i.registerEditorTypes(C),this.#n=i,this.pageIndex=l,this.div=a,this.#t=e,this.#i=u,this.viewport=f,this.#n.addLayer(this)}get isEmpty(){return this.#a.size===0}updateToolbar(i){this.#n.updateToolbar(i)}updateMode(i=this.#n.getMode()){this.#p(),i===o.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),i!==o.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",i===o.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",i===o.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",i===o.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(i){if(!i&&this.#n.getMode()!==o.AnnotationEditorType.INK)return;if(!i){for(let a of this.#a.values())if(a.isEmpty()){a.setInBackground();return}}this.#d({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(i){this.#n.setEditingState(i)}addCommands(i){this.#n.addCommands(i)}enable(){this.div.style.pointerEvents="auto";let i=new Set;for(let a of this.#a.values())a.enableEditing(),a.annotationElementId&&i.add(a.annotationElementId);if(!this.#i)return;let l=this.#i.getEditableAnnotations();for(let a of l){if(a.hide(),this.#n.isDeletedAnnotationElement(a.data.id)||i.has(a.data.id))continue;let e=this.deserialize(a);e&&(this.addOrRebuild(e),e.enableEditing())}}disable(){this.#c=!0,this.div.style.pointerEvents="none";let i=new Set;for(let l of this.#a.values()){if(l.disableEditing(),!l.annotationElementId||l.serialize()!==null){i.add(l.annotationElementId);continue}this.getEditableAnnotation(l.annotationElementId)?.show(),l.remove()}if(this.#i){let l=this.#i.getEditableAnnotations();for(let a of l){let{id:e}=a.data;i.has(e)||this.#n.isDeletedAnnotationElement(e)||a.show()}}this.#p(),this.isEmpty&&(this.div.hidden=!0),this.#c=!1}getEditableAnnotation(i){return this.#i?.getEditableAnnotation(i)||null}setActiveEditor(i){this.#n.getActive()!==i&&this.#n.setActiveEditor(i)}enableClick(){this.div.addEventListener("pointerdown",this.#o),this.div.addEventListener("pointerup",this.#s)}disableClick(){this.div.removeEventListener("pointerdown",this.#o),this.div.removeEventListener("pointerup",this.#s)}attach(i){this.#a.set(i.id,i);let{annotationElementId:l}=i;l&&this.#n.isDeletedAnnotationElement(l)&&this.#n.removeDeletedAnnotationElement(i)}detach(i){this.#a.delete(i.id),this.#t?.removePointerInTextLayer(i.contentDiv),!this.#c&&i.annotationElementId&&this.#n.addDeletedAnnotationElement(i)}remove(i){this.detach(i),this.#n.removeEditor(i),i.div.contains(document.activeElement)&&setTimeout(()=>{this.#n.focusMainContainer()},0),i.div.remove(),i.isAttachedToDOM=!1,this.#l||this.addInkEditorIfNeeded(!1)}changeParent(i){i.parent!==this&&(i.annotationElementId&&(this.#n.addDeletedAnnotationElement(i.annotationElementId),y.AnnotationEditor.deleteAnnotationElement(i),i.annotationElementId=null),this.attach(i),i.parent?.detach(i),i.setParent(this),i.div&&i.isAttachedToDOM&&(i.div.remove(),this.div.append(i.div)))}add(i){if(this.changeParent(i),this.#n.addEditor(i),this.attach(i),!i.isAttachedToDOM){let l=i.render();this.div.append(l),i.isAttachedToDOM=!0}i.fixAndSetPosition(),i.onceAdded(),this.#n.addToAnnotationStorage(i)}moveEditorInDOM(i){if(!i.isAttachedToDOM)return;let{activeElement:l}=document;i.div.contains(l)&&(i._focusEventsAllowed=!1,setTimeout(()=>{i.div.contains(document.activeElement)?i._focusEventsAllowed=!0:(i.div.addEventListener("focusin",()=>{i._focusEventsAllowed=!0},{once:!0}),l.focus())},0)),i._structTreeParentId=this.#t?.moveElementInDOM(this.div,i.div,i.contentDiv,!0)}addOrRebuild(i){i.needsToBeRebuilt()?i.rebuild():this.add(i)}addUndoableEditor(i){let l=()=>i._uiManager.rebuild(i),a=()=>{i.remove()};this.addCommands({cmd:l,undo:a,mustExec:!1})}getNextId(){return this.#n.getId()}#f(i){switch(this.#n.getMode()){case o.AnnotationEditorType.FREETEXT:return new O.FreeTextEditor(i);case o.AnnotationEditorType.INK:return new M.InkEditor(i);case o.AnnotationEditorType.STAMP:return new N.StampEditor(i)}return null}pasteEditor(i,l){this.#n.updateToolbar(i),this.#n.updateMode(i);let{offsetX:a,offsetY:e}=this.#u(),u=this.getNextId(),f=this.#f(Rt({parent:this,id:u,x:a,y:e,uiManager:this.#n,isCentered:!0},l));f&&this.add(f)}deserialize(i){switch(i.annotationType??i.annotationEditorType){case o.AnnotationEditorType.FREETEXT:return O.FreeTextEditor.deserialize(i,this,this.#n);case o.AnnotationEditorType.INK:return M.InkEditor.deserialize(i,this,this.#n);case o.AnnotationEditorType.STAMP:return N.StampEditor.deserialize(i,this,this.#n)}return null}#d(i,l){let a=this.getNextId(),e=this.#f({parent:this,id:a,x:i.offsetX,y:i.offsetY,uiManager:this.#n,isCentered:l});return e&&this.add(e),e}#u(){let{x:i,y:l,width:a,height:e}=this.div.getBoundingClientRect(),u=Math.max(0,i),f=Math.max(0,l),m=Math.min(window.innerWidth,i+a),C=Math.min(window.innerHeight,l+e),S=(u+m)/2-i,p=(f+C)/2-l,[A,I]=this.viewport.rotation%180===0?[S,p]:[p,S];return{offsetX:A,offsetY:I}}addNewEditor(){this.#d(this.#u(),!0)}setSelected(i){this.#n.setSelected(i)}toggleSelected(i){this.#n.toggleSelected(i)}isSelected(i){return this.#n.isSelected(i)}unselect(i){this.#n.unselect(i)}pointerup(i){let{isMac:l}=o.FeatureTest.platform;if(!(i.button!==0||i.ctrlKey&&l)&&i.target===this.div&&this.#r){if(this.#r=!1,!this.#e){this.#e=!0;return}if(this.#n.getMode()===o.AnnotationEditorType.STAMP){this.#n.unselectAll();return}this.#d(i,!1)}}pointerdown(i){if(this.#r){this.#r=!1;return}let{isMac:l}=o.FeatureTest.platform;if(i.button!==0||i.ctrlKey&&l||i.target!==this.div)return;this.#r=!0;let a=this.#n.getActive();this.#e=!a||a.isEmpty()}findNewParent(i,l,a){let e=this.#n.findParent(l,a);return e===null||e===this?!1:(e.changeParent(i),!0)}destroy(){this.#n.getActive()?.parent===this&&(this.#n.commitOrRemove(),this.#n.setActiveEditor(null));for(let i of this.#a.values())this.#t?.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,this.#a.clear(),this.#n.removeLayer(this)}#p(){this.#l=!0;for(let i of this.#a.values())i.isEmpty()&&i.remove();this.#l=!1}render({viewport:i}){this.viewport=i,(0,B.setLayerDimensions)(this.div,i);for(let l of this.#n.getEditors(this.pageIndex))this.add(l);this.updateMode()}update({viewport:i}){this.#n.commitOrRemove(),this.viewport=i,(0,B.setLayerDimensions)(this.div,{rotation:i.rotation}),this.updateMode()}get pageDimensions(){let{pageWidth:i,pageHeight:l}=this.viewport.rawDims;return[i,l]}}return s})();r.AnnotationEditorLayer=h},(H,r,k)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.FreeTextEditor=void 0;var o=k(1),y=k(5),O=k(4),M=k(29);let B=(()=>{class N extends O.AnnotationEditor{#t=this.editorDivBlur.bind(this);#e=this.editorDivFocus.bind(this);#i=this.editorDivInput.bind(this);#s=this.editorDivKeydown.bind(this);#o;#a="";#r=`${this.id}-editor`;#l;#c=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){let s=N.prototype,t=a=>a.isEmpty(),i=y.AnnotationEditorUIManager.TRANSLATE_SMALL,l=y.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,o.shadow)(this,"_keyboardManager",new y.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],s.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],s.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],s._translateEmpty,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],s._translateEmpty,{args:[-l,0],checker:t}],[["ArrowRight","mac+ArrowRight"],s._translateEmpty,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],s._translateEmpty,{args:[l,0],checker:t}],[["ArrowUp","mac+ArrowUp"],s._translateEmpty,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],s._translateEmpty,{args:[0,-l],checker:t}],[["ArrowDown","mac+ArrowDown"],s._translateEmpty,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],s._translateEmpty,{args:[0,l],checker:t}]]))}static _type="freetext";constructor(s){super(Ot(Rt({},s),{name:"freeTextEditor"})),this.#o=s.color||N._defaultColor||O.AnnotationEditor._defaultLineColor,this.#l=s.fontSize||N._defaultFontSize}static initialize(s){O.AnnotationEditor.initialize(s,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});let t=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(t.getPropertyValue("--freetext-padding"))}static updateDefaultParams(s,t){switch(s){case o.AnnotationEditorParamsType.FREETEXT_SIZE:N._defaultFontSize=t;break;case o.AnnotationEditorParamsType.FREETEXT_COLOR:N._defaultColor=t;break}}updateParams(s,t){switch(s){case o.AnnotationEditorParamsType.FREETEXT_SIZE:this.#n(t);break;case o.AnnotationEditorParamsType.FREETEXT_COLOR:this.#f(t);break}}static get defaultPropertiesToUpdate(){return[[o.AnnotationEditorParamsType.FREETEXT_SIZE,N._defaultFontSize],[o.AnnotationEditorParamsType.FREETEXT_COLOR,N._defaultColor||O.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[o.AnnotationEditorParamsType.FREETEXT_SIZE,this.#l],[o.AnnotationEditorParamsType.FREETEXT_COLOR,this.#o]]}#n(s){let t=l=>{this.editorDiv.style.fontSize=`calc(${l}px * var(--scale-factor))`,this.translate(0,-(l-this.#l)*this.parentScale),this.#l=l,this.#u()},i=this.#l;this.addCommands({cmd:()=>{t(s)},undo:()=>{t(i)},mustExec:!0,type:o.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#f(s){let t=this.#o;this.addCommands({cmd:()=>{this.#o=this.editorDiv.style.color=s},undo:()=>{this.#o=this.editorDiv.style.color=t},mustExec:!0,type:o.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(s,t){this._uiManager.translateSelectedEditors(s,t,!0)}getInitialTranslation(){let s=this.parentScale;return[-N._internalPadding*s,-(N._internalPadding+this.#l)*s]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(o.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",this.#s),this.editorDiv.addEventListener("focus",this.#e),this.editorDiv.addEventListener("blur",this.#t),this.editorDiv.addEventListener("input",this.#i))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#r),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",this.#s),this.editorDiv.removeEventListener("focus",this.#e),this.editorDiv.removeEventListener("blur",this.#t),this.editorDiv.removeEventListener("input",this.#i),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(s){this._focusEventsAllowed&&(super.focusin(s),s.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){if(this.width){this.#m();return}this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}#d(){let s=this.editorDiv.getElementsByTagName("div");if(s.length===0)return this.editorDiv.innerText;let t=[];for(let i of s)t.push(i.innerText.replace(/\r\n?|\n/,""));return t.join(`
`)}#u(){let[s,t]=this.parentDimensions,i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{let{currentLayer:l,div:a}=this,e=a.style.display;a.style.display="hidden",l.div.append(this.div),i=a.getBoundingClientRect(),a.remove(),a.style.display=e}this.rotation%180===this.parentRotation%180?(this.width=i.width/s,this.height=i.height/t):(this.width=i.height/s,this.height=i.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();let s=this.#a,t=this.#a=this.#d().trimEnd();if(s===t)return;let i=l=>{if(this.#a=l,!l){this.remove();return}this.#p(),this._uiManager.rebuild(this),this.#u()};this.addCommands({cmd:()=>{i(t)},undo:()=>{i(s)},mustExec:!1}),this.#u()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(s){this.enterInEditMode()}keydown(s){s.target===this.div&&s.key==="Enter"&&(this.enterInEditMode(),s.preventDefault())}editorDivKeydown(s){N._keyboardManager.exec(this,s)}editorDivFocus(s){this.isEditing=!0}editorDivBlur(s){this.isEditing=!1}editorDivInput(s){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let s,t;this.width&&(s=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#r),this.enableEditing(),O.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(l=>this.editorDiv?.setAttribute("aria-label",l)),O.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(l=>this.editorDiv?.setAttribute("default-content",l)),this.editorDiv.contentEditable=!0;let{style:i}=this.editorDiv;if(i.fontSize=`calc(${this.#l}px * var(--scale-factor))`,i.color=this.#o,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,y.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){let[l,a]=this.parentDimensions;if(this.annotationElementId){let{position:e}=this.#c,[u,f]=this.getInitialTranslation();[u,f]=this.pageTranslationToScreen(u,f);let[m,C]=this.pageDimensions,[S,p]=this.pageTranslation,A,I;switch(this.rotation){case 0:A=s+(e[0]-S)/m,I=t+this.height-(e[1]-p)/C;break;case 90:A=s+(e[0]-S)/m,I=t-(e[1]-p)/C,[u,f]=[f,-u];break;case 180:A=s-this.width+(e[0]-S)/m,I=t-(e[1]-p)/C,[u,f]=[-u,-f];break;case 270:A=s+(e[0]-S-this.height*C)/m,I=t+(e[1]-p-this.width*m)/C,[u,f]=[-f,u];break}this.setAt(A*l,I*a,u,f)}else this.setAt(s*l,t*a,this.width*l,this.height*a);this.#p(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}#p(){if(this.editorDiv.replaceChildren(),!!this.#a)for(let s of this.#a.split(`
`)){let t=document.createElement("div");t.append(s?document.createTextNode(s):document.createElement("br")),this.editorDiv.append(t)}}get contentDiv(){return this.editorDiv}static deserialize(s,t,i){let l=null;if(s instanceof M.FreeTextAnnotationElement){let{data:{defaultAppearanceData:{fontSize:e,fontColor:u},rect:f,rotation:m,id:C},textContent:S,textPosition:p,parent:{page:{pageNumber:A}}}=s;if(!S||S.length===0)return null;l=s={annotationType:o.AnnotationEditorType.FREETEXT,color:Array.from(u),fontSize:e,value:S.join(`
`),position:p,pageIndex:A-1,rect:f,rotation:m,id:C,deleted:!1}}let a=super.deserialize(s,t,i);return a.#l=s.fontSize,a.#o=o.Util.makeHexColor(...s.color),a.#a=s.value,a.annotationElementId=s.id||null,a.#c=l,a}serialize(s=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};let t=N._internalPadding*this.parentScale,i=this.getRect(t,t),l=O.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#o),a={annotationType:o.AnnotationEditorType.FREETEXT,color:l,fontSize:this.#l,value:this.#a,pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return s?a:this.annotationElementId&&!this.#b(a)?null:(a.id=this.annotationElementId,a)}#b(s){let{value:t,fontSize:i,color:l,rect:a,pageIndex:e}=this.#c;return s.value!==t||s.fontSize!==i||s.rect.some((u,f)=>Math.abs(u-a[f])>=1)||s.color.some((u,f)=>u!==l[f])||s.pageIndex!==e}#m(s=!1){if(!this.annotationElementId)return;if(this.#u(),!s&&(this.width===0||this.height===0)){setTimeout(()=>this.#m(!0),0);return}let t=N._internalPadding*this.parentScale;this.#c.rect=this.getRect(t,t)}}return N})();r.FreeTextEditor=B},(H,r,k)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.StampAnnotationElement=r.InkAnnotationElement=r.FreeTextAnnotationElement=r.AnnotationLayer=void 0;var o=k(1),y=k(6),O=k(3),M=k(30),B=k(31),N=k(32);let h=1e3,s=9,t=new WeakSet;function i(E){return{width:E[2]-E[0],height:E[3]-E[1]}}class l{static create(n){switch(n.data.annotationType){case o.AnnotationType.LINK:return new e(n);case o.AnnotationType.TEXT:return new u(n);case o.AnnotationType.WIDGET:switch(n.data.fieldType){case"Tx":return new m(n);case"Btn":return n.data.radioButton?new p(n):n.data.checkBox?new S(n):new A(n);case"Ch":return new I(n);case"Sig":return new C(n)}return new f(n);case o.AnnotationType.POPUP:return new U(n);case o.AnnotationType.FREETEXT:return new G(n);case o.AnnotationType.LINE:return new X(n);case o.AnnotationType.SQUARE:return new it(n);case o.AnnotationType.CIRCLE:return new Z(n);case o.AnnotationType.POLYLINE:return new Q(n);case o.AnnotationType.CARET:return new J(n);case o.AnnotationType.INK:return new F(n);case o.AnnotationType.POLYGON:return new nt(n);case o.AnnotationType.HIGHLIGHT:return new b(n);case o.AnnotationType.UNDERLINE:return new c(n);case o.AnnotationType.SQUIGGLY:return new d(n);case o.AnnotationType.STRIKEOUT:return new _(n);case o.AnnotationType.STAMP:return new P(n);case o.AnnotationType.FILEATTACHMENT:return new x(n);default:return new a(n)}}}class a{#t=!1;constructor(n,{isRenderable:g=!1,ignoreBorder:v=!1,createQuadrilaterals:w=!1}={}){this.isRenderable=g,this.data=n.data,this.layer=n.layer,this.linkService=n.linkService,this.downloadManager=n.downloadManager,this.imageResourcesPath=n.imageResourcesPath,this.renderForms=n.renderForms,this.svgFactory=n.svgFactory,this.annotationStorage=n.annotationStorage,this.enableScripting=n.enableScripting,this.hasJSActions=n.hasJSActions,this._fieldObjects=n.fieldObjects,this.parent=n.parent,g&&(this.container=this._createContainer(v)),w&&this._createQuadrilaterals()}static _hasPopupData({titleObj:n,contentsObj:g,richText:v}){return!!(n?.str||g?.str||v?.str)}get hasPopupData(){return a._hasPopupData(this.data)}_createContainer(n){let{data:g,parent:{page:v,viewport:w}}=this,T=document.createElement("section");T.setAttribute("data-annotation-id",g.id),this instanceof f||(T.tabIndex=h),T.style.zIndex=this.parent.zIndex++,this.data.popupRef&&T.setAttribute("aria-haspopup","dialog"),g.noRotate&&T.classList.add("norotate");let{pageWidth:L,pageHeight:j,pageX:V,pageY:st}=w.rawDims;if(!g.rect||this instanceof U){let{rotation:tt}=g;return!g.hasOwnCanvas&&tt!==0&&this.setRotation(tt,T),T}let{width:q,height:$}=i(g.rect),Y=o.Util.normalizeRect([g.rect[0],v.view[3]-g.rect[1]+v.view[1],g.rect[2],v.view[3]-g.rect[3]+v.view[1]]);if(!n&&g.borderStyle.width>0){T.style.borderWidth=`${g.borderStyle.width}px`;let tt=g.borderStyle.horizontalCornerRadius,rt=g.borderStyle.verticalCornerRadius;if(tt>0||rt>0){let lt=`calc(${tt}px * var(--scale-factor)) / calc(${rt}px * var(--scale-factor))`;T.style.borderRadius=lt}else if(this instanceof p){let lt=`calc(${q}px * var(--scale-factor)) / calc(${$}px * var(--scale-factor))`;T.style.borderRadius=lt}switch(g.borderStyle.style){case o.AnnotationBorderStyleType.SOLID:T.style.borderStyle="solid";break;case o.AnnotationBorderStyleType.DASHED:T.style.borderStyle="dashed";break;case o.AnnotationBorderStyleType.BEVELED:(0,o.warn)("Unimplemented border style: beveled");break;case o.AnnotationBorderStyleType.INSET:(0,o.warn)("Unimplemented border style: inset");break;case o.AnnotationBorderStyleType.UNDERLINE:T.style.borderBottomStyle="solid";break;default:break}let ot=g.borderColor||null;ot?(this.#t=!0,T.style.borderColor=o.Util.makeHexColor(ot[0]|0,ot[1]|0,ot[2]|0)):T.style.borderWidth=0}T.style.left=`${100*(Y[0]-V)/L}%`,T.style.top=`${100*(Y[1]-st)/j}%`;let{rotation:K}=g;return g.hasOwnCanvas||K===0?(T.style.width=`${100*q/L}%`,T.style.height=`${100*$/j}%`):this.setRotation(K,T),T}setRotation(n,g=this.container){if(!this.data.rect)return;let{pageWidth:v,pageHeight:w}=this.parent.viewport.rawDims,{width:T,height:L}=i(this.data.rect),j,V;n%180===0?(j=100*T/v,V=100*L/w):(j=100*L/v,V=100*T/w),g.style.width=`${j}%`,g.style.height=`${V}%`,g.setAttribute("data-main-rotation",(360-n)%360)}get _commonActions(){let n=(g,v,w)=>{let T=w.detail[g],L=T[0],j=T.slice(1);w.target.style[v]=M.ColorConverters[`${L}_HTML`](j),this.annotationStorage.setValue(this.data.id,{[v]:M.ColorConverters[`${L}_rgb`](j)})};return(0,o.shadow)(this,"_commonActions",{display:g=>{let{display:v}=g.detail,w=v%2===1;this.container.style.visibility=w?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:w,noPrint:v===1||v===2})},print:g=>{this.annotationStorage.setValue(this.data.id,{noPrint:!g.detail.print})},hidden:g=>{let{hidden:v}=g.detail;this.container.style.visibility=v?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:v,noView:v})},focus:g=>{setTimeout(()=>g.target.focus({preventScroll:!1}),0)},userName:g=>{g.target.title=g.detail.userName},readonly:g=>{g.target.disabled=g.detail.readonly},required:g=>{this._setRequired(g.target,g.detail.required)},bgColor:g=>{n("bgColor","backgroundColor",g)},fillColor:g=>{n("fillColor","backgroundColor",g)},fgColor:g=>{n("fgColor","color",g)},textColor:g=>{n("textColor","color",g)},borderColor:g=>{n("borderColor","borderColor",g)},strokeColor:g=>{n("strokeColor","borderColor",g)},rotation:g=>{let v=g.detail.rotation;this.setRotation(v),this.annotationStorage.setValue(this.data.id,{rotation:v})}})}_dispatchEventFromSandbox(n,g){let v=this._commonActions;for(let w of Object.keys(g.detail))(n[w]||v[w])?.(g)}_setDefaultPropertiesFromJS(n){if(!this.enableScripting)return;let g=this.annotationStorage.getRawValue(this.data.id);if(!g)return;let v=this._commonActions;for(let[w,T]of Object.entries(g)){let L=v[w];if(L){let j={detail:{[w]:T},target:n};L(j),delete g[w]}}}_createQuadrilaterals(){if(!this.container)return;let{quadPoints:n}=this.data;if(!n)return;let[g,v,w,T]=this.data.rect;if(n.length===1){let[,{x:rt,y:ot},{x:lt,y:ct}]=n[0];if(w===rt&&T===ot&&g===lt&&v===ct)return}let{style:L}=this.container,j;if(this.#t){let{borderColor:rt,borderWidth:ot}=L;L.borderWidth=0,j=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${rt}" stroke-width="${ot}">`],this.container.classList.add("hasBorder")}let V=w-g,st=T-v,{svgFactory:q}=this,$=q.createElement("svg");$.classList.add("quadrilateralsContainer"),$.setAttribute("width",0),$.setAttribute("height",0);let Y=q.createElement("defs");$.append(Y);let K=q.createElement("clipPath"),tt=`clippath_${this.data.id}`;K.setAttribute("id",tt),K.setAttribute("clipPathUnits","objectBoundingBox"),Y.append(K);for(let[,{x:rt,y:ot},{x:lt,y:ct}]of n){let ht=q.createElement("rect"),ft=(lt-g)/V,yt=(T-ot)/st,bt=(rt-lt)/V,Tt=(ot-ct)/st;ht.setAttribute("x",ft),ht.setAttribute("y",yt),ht.setAttribute("width",bt),ht.setAttribute("height",Tt),K.append(ht),j?.push(`<rect vector-effect="non-scaling-stroke" x="${ft}" y="${yt}" width="${bt}" height="${Tt}"/>`)}this.#t&&(j.push("</g></svg>')"),L.backgroundImage=j.join("")),this.container.append($),this.container.style.clipPath=`url(#${tt})`}_createPopup(){let{container:n,data:g}=this;n.setAttribute("aria-haspopup","dialog");let v=new U({data:{color:g.color,titleObj:g.titleObj,modificationDate:g.modificationDate,contentsObj:g.contentsObj,richText:g.richText,parentRect:g.rect,borderStyle:0,id:`popup_${g.id}`,rotation:g.rotation},parent:this.parent,elements:[this]});this.parent.div.append(v.render())}render(){(0,o.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(n,g=null){let v=[];if(this._fieldObjects){let w=this._fieldObjects[n];if(w)for(let{page:T,id:L,exportValues:j}of w){if(T===-1||L===g)continue;let V=typeof j=="string"?j:null,st=document.querySelector(`[data-element-id="${L}"]`);if(st&&!t.has(st)){(0,o.warn)(`_getElementsByName - element not allowed: ${L}`);continue}v.push({id:L,exportValue:V,domElement:st})}return v}for(let w of document.getElementsByName(n)){let{exportValue:T}=w,L=w.getAttribute("data-element-id");L!==g&&t.has(w)&&v.push({id:L,exportValue:T,domElement:w})}return v}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){let n=this.getElementsToTriggerPopup();if(Array.isArray(n))for(let g of n)g.classList.add("highlightArea");else n.classList.add("highlightArea")}_editOnDoubleClick(){let{annotationEditorType:n,data:{id:g}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:n,editId:g})})}}class e extends a{constructor(n,g=null){super(n,{isRenderable:!0,ignoreBorder:!!g?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=n.data.isTooltipOnly}render(){let{data:n,linkService:g}=this,v=document.createElement("a");v.setAttribute("data-element-id",n.id);let w=!1;return n.url?(g.addLinkAttributes(v,n.url,n.newWindow),w=!0):n.action?(this._bindNamedAction(v,n.action),w=!0):n.attachment?(this._bindAttachment(v,n.attachment),w=!0):n.setOCGState?(this.#e(v,n.setOCGState),w=!0):n.dest?(this._bindLink(v,n.dest),w=!0):(n.actions&&(n.actions.Action||n.actions["Mouse Up"]||n.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(v,n),w=!0),n.resetForm?(this._bindResetFormAction(v,n.resetForm),w=!0):this.isTooltipOnly&&!w&&(this._bindLink(v,""),w=!0)),this.container.classList.add("linkAnnotation"),w&&this.container.append(v),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(n,g){n.href=this.linkService.getDestinationHash(g),n.onclick=()=>(g&&this.linkService.goToDestination(g),!1),(g||g==="")&&this.#t()}_bindNamedAction(n,g){n.href=this.linkService.getAnchorUrl(""),n.onclick=()=>(this.linkService.executeNamedAction(g),!1),this.#t()}_bindAttachment(n,g){n.href=this.linkService.getAnchorUrl(""),n.onclick=()=>(this.downloadManager?.openOrDownloadData(this.container,g.content,g.filename),!1),this.#t()}#e(n,g){n.href=this.linkService.getAnchorUrl(""),n.onclick=()=>(this.linkService.executeSetOCGState(g),!1),this.#t()}_bindJSAction(n,g){n.href=this.linkService.getAnchorUrl("");let v=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(let w of Object.keys(g.actions)){let T=v.get(w);T&&(n[T]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:g.id,name:w}}),!1))}n.onclick||(n.onclick=()=>!1),this.#t()}_bindResetFormAction(n,g){let v=n.onclick;if(v||(n.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){(0,o.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),v||(n.onclick=()=>!1);return}n.onclick=()=>{v?.();let{fields:w,refs:T,include:L}=g,j=[];if(w.length!==0||T.length!==0){let q=new Set(T);for(let $ of w){let Y=this._fieldObjects[$]||[];for(let{id:K}of Y)q.add(K)}for(let $ of Object.values(this._fieldObjects))for(let Y of $)q.has(Y.id)===L&&j.push(Y)}else for(let q of Object.values(this._fieldObjects))j.push(...q);let V=this.annotationStorage,st=[];for(let q of j){let{id:$}=q;switch(st.push($),q.type){case"text":{let K=q.defaultValue||"";V.setValue($,{value:K});break}case"checkbox":case"radiobutton":{let K=q.defaultValue===q.exportValues;V.setValue($,{value:K});break}case"combobox":case"listbox":{let K=q.defaultValue||"";V.setValue($,{value:K});break}default:continue}let Y=document.querySelector(`[data-element-id="${$}"]`);if(Y){if(!t.has(Y)){(0,o.warn)(`_bindResetFormAction - element not allowed: ${$}`);continue}}else continue;Y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:st,name:"ResetForm"}}),!1}}}class u extends a{constructor(n){super(n,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");let n=document.createElement("img");return n.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",n.alt="[{{type}} Annotation]",n.dataset.l10nId="text_annotation_type",n.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(n),this.container}}class f extends a{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(n){this.data.hasOwnCanvas&&(n.previousSibling?.nodeName==="CANVAS"&&(n.previousSibling.hidden=!0),n.hidden=!1)}_getKeyModifier(n){let{isWin:g,isMac:v}=o.FeatureTest.platform;return g&&n.ctrlKey||v&&n.metaKey}_setEventListener(n,g,v,w,T){v.includes("mouse")?n.addEventListener(v,L=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:w,value:T(L),shift:L.shiftKey,modifier:this._getKeyModifier(L)}})}):n.addEventListener(v,L=>{if(v==="blur"){if(!g.focused||!L.relatedTarget)return;g.focused=!1}else if(v==="focus"){if(g.focused)return;g.focused=!0}T&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:w,value:T(L)}})})}_setEventListeners(n,g,v,w){for(let[T,L]of v)(L==="Action"||this.data.actions?.[L])&&((L==="Focus"||L==="Blur")&&(g||={focused:!1}),this._setEventListener(n,g,T,L,w),L==="Focus"&&!this.data.actions?.Blur?this._setEventListener(n,g,"blur","Blur",null):L==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(n,g,"focus","Focus",null))}_setBackgroundColor(n){let g=this.data.backgroundColor||null;n.style.backgroundColor=g===null?"transparent":o.Util.makeHexColor(g[0],g[1],g[2])}_setTextStyle(n){let g=["left","center","right"],{fontColor:v}=this.data.defaultAppearanceData,w=this.data.defaultAppearanceData.fontSize||s,T=n.style,L,j=2,V=st=>Math.round(10*st)/10;if(this.data.multiLine){let st=Math.abs(this.data.rect[3]-this.data.rect[1]-j),q=Math.round(st/(o.LINE_FACTOR*w))||1,$=st/q;L=Math.min(w,V($/o.LINE_FACTOR))}else{let st=Math.abs(this.data.rect[3]-this.data.rect[1]-j);L=Math.min(w,V(st/o.LINE_FACTOR))}T.fontSize=`calc(${L}px * var(--scale-factor))`,T.color=o.Util.makeHexColor(v[0],v[1],v[2]),this.data.textAlignment!==null&&(T.textAlign=g[this.data.textAlignment])}_setRequired(n,g){g?n.setAttribute("required",!0):n.removeAttribute("required"),n.setAttribute("aria-required",g)}}class m extends f{constructor(n){let g=n.renderForms||!n.data.hasAppearance&&!!n.data.fieldValue;super(n,{isRenderable:g})}setPropertyOnSiblings(n,g,v,w){let T=this.annotationStorage;for(let L of this._getElementsByName(n.name,n.id))L.domElement&&(L.domElement[g]=v),T.setValue(L.id,{[w]:v})}render(){let n=this.annotationStorage,g=this.data.id;this.container.classList.add("textWidgetAnnotation");let v=null;if(this.renderForms){let w=n.getValue(g,{value:this.data.fieldValue}),T=w.value||"",L=n.getValue(g,{charLimit:this.data.maxLen}).charLimit;L&&T.length>L&&(T=T.slice(0,L));let j=w.formattedValue||this.data.textContent?.join(`
`)||null;j&&this.data.comb&&(j=j.replaceAll(/\s+/g,""));let V={userValue:T,formattedValue:j,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(v=document.createElement("textarea"),v.textContent=j??T,this.data.doNotScroll&&(v.style.overflowY="hidden")):(v=document.createElement("input"),v.type="text",v.setAttribute("value",j??T),this.data.doNotScroll&&(v.style.overflowX="hidden")),this.data.hasOwnCanvas&&(v.hidden=!0),t.add(v),v.setAttribute("data-element-id",g),v.disabled=this.data.readOnly,v.name=this.data.fieldName,v.tabIndex=h,this._setRequired(v,this.data.required),L&&(v.maxLength=L),v.addEventListener("input",q=>{n.setValue(g,{value:q.target.value}),this.setPropertyOnSiblings(v,"value",q.target.value,"value"),V.formattedValue=null}),v.addEventListener("resetform",q=>{let $=this.data.defaultFieldValue??"";v.value=V.userValue=$,V.formattedValue=null});let st=q=>{let{formattedValue:$}=V;$!=null&&(q.target.value=$),q.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){v.addEventListener("focus",$=>{if(V.focused)return;let{target:Y}=$;V.userValue&&(Y.value=V.userValue),V.lastCommittedValue=Y.value,V.commitKey=1,V.focused=!0}),v.addEventListener("updatefromsandbox",$=>{this.showElementAndHideCanvas($.target);let Y={value(K){V.userValue=K.detail.value??"",n.setValue(g,{value:V.userValue.toString()}),K.target.value=V.userValue},formattedValue(K){let{formattedValue:tt}=K.detail;V.formattedValue=tt,tt!=null&&K.target!==document.activeElement&&(K.target.value=tt),n.setValue(g,{formattedValue:tt})},selRange(K){K.target.setSelectionRange(...K.detail.selRange)},charLimit:K=>{let{charLimit:tt}=K.detail,{target:rt}=K;if(tt===0){rt.removeAttribute("maxLength");return}rt.setAttribute("maxLength",tt);let ot=V.userValue;!ot||ot.length<=tt||(ot=ot.slice(0,tt),rt.value=V.userValue=ot,n.setValue(g,{value:ot}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:g,name:"Keystroke",value:ot,willCommit:!0,commitKey:1,selStart:rt.selectionStart,selEnd:rt.selectionEnd}}))}};this._dispatchEventFromSandbox(Y,$)}),v.addEventListener("keydown",$=>{V.commitKey=1;let Y=-1;if($.key==="Escape"?Y=0:$.key==="Enter"&&!this.data.multiLine?Y=2:$.key==="Tab"&&(V.commitKey=3),Y===-1)return;let{value:K}=$.target;V.lastCommittedValue!==K&&(V.lastCommittedValue=K,V.userValue=K,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:g,name:"Keystroke",value:K,willCommit:!0,commitKey:Y,selStart:$.target.selectionStart,selEnd:$.target.selectionEnd}}))});let q=st;st=null,v.addEventListener("blur",$=>{if(!V.focused||!$.relatedTarget)return;V.focused=!1;let{value:Y}=$.target;V.userValue=Y,V.lastCommittedValue!==Y&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:g,name:"Keystroke",value:Y,willCommit:!0,commitKey:V.commitKey,selStart:$.target.selectionStart,selEnd:$.target.selectionEnd}}),q($)}),this.data.actions?.Keystroke&&v.addEventListener("beforeinput",$=>{V.lastCommittedValue=null;let{data:Y,target:K}=$,{value:tt,selectionStart:rt,selectionEnd:ot}=K,lt=rt,ct=ot;switch($.inputType){case"deleteWordBackward":{let ht=tt.substring(0,rt).match(/\w*[^\w]*$/);ht&&(lt-=ht[0].length);break}case"deleteWordForward":{let ht=tt.substring(rt).match(/^[^\w]*\w*/);ht&&(ct+=ht[0].length);break}case"deleteContentBackward":rt===ot&&(lt-=1);break;case"deleteContentForward":rt===ot&&(ct+=1);break}$.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:g,name:"Keystroke",value:tt,change:Y||"",willCommit:!1,selStart:lt,selEnd:ct}})}),this._setEventListeners(v,V,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],$=>$.target.value)}if(st&&v.addEventListener("blur",st),this.data.comb){let $=(this.data.rect[2]-this.data.rect[0])/L;v.classList.add("comb"),v.style.letterSpacing=`calc(${$}px * var(--scale-factor) - 1ch)`}}else v=document.createElement("div"),v.textContent=this.data.fieldValue,v.style.verticalAlign="middle",v.style.display="table-cell";return this._setTextStyle(v),this._setBackgroundColor(v),this._setDefaultPropertiesFromJS(v),this.container.append(v),this.container}}class C extends f{constructor(n){super(n,{isRenderable:!!n.data.hasOwnCanvas})}}class S extends f{constructor(n){super(n,{isRenderable:n.renderForms})}render(){let n=this.annotationStorage,g=this.data,v=g.id,w=n.getValue(v,{value:g.exportValue===g.fieldValue}).value;typeof w=="string"&&(w=w!=="Off",n.setValue(v,{value:w})),this.container.classList.add("buttonWidgetAnnotation","checkBox");let T=document.createElement("input");return t.add(T),T.setAttribute("data-element-id",v),T.disabled=g.readOnly,this._setRequired(T,this.data.required),T.type="checkbox",T.name=g.fieldName,w&&T.setAttribute("checked",!0),T.setAttribute("exportValue",g.exportValue),T.tabIndex=h,T.addEventListener("change",L=>{let{name:j,checked:V}=L.target;for(let st of this._getElementsByName(j,v)){let q=V&&st.exportValue===g.exportValue;st.domElement&&(st.domElement.checked=q),n.setValue(st.id,{value:q})}n.setValue(v,{value:V})}),T.addEventListener("resetform",L=>{let j=g.defaultFieldValue||"Off";L.target.checked=j===g.exportValue}),this.enableScripting&&this.hasJSActions&&(T.addEventListener("updatefromsandbox",L=>{let j={value(V){V.target.checked=V.detail.value!=="Off",n.setValue(v,{value:V.target.checked})}};this._dispatchEventFromSandbox(j,L)}),this._setEventListeners(T,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],L=>L.target.checked)),this._setBackgroundColor(T),this._setDefaultPropertiesFromJS(T),this.container.append(T),this.container}}class p extends f{constructor(n){super(n,{isRenderable:n.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");let n=this.annotationStorage,g=this.data,v=g.id,w=n.getValue(v,{value:g.fieldValue===g.buttonValue}).value;typeof w=="string"&&(w=w!==g.buttonValue,n.setValue(v,{value:w}));let T=document.createElement("input");if(t.add(T),T.setAttribute("data-element-id",v),T.disabled=g.readOnly,this._setRequired(T,this.data.required),T.type="radio",T.name=g.fieldName,w&&T.setAttribute("checked",!0),T.tabIndex=h,T.addEventListener("change",L=>{let{name:j,checked:V}=L.target;for(let st of this._getElementsByName(j,v))n.setValue(st.id,{value:!1});n.setValue(v,{value:V})}),T.addEventListener("resetform",L=>{let j=g.defaultFieldValue;L.target.checked=j!=null&&j===g.buttonValue}),this.enableScripting&&this.hasJSActions){let L=g.buttonValue;T.addEventListener("updatefromsandbox",j=>{let V={value:st=>{let q=L===st.detail.value;for(let $ of this._getElementsByName(st.target.name)){let Y=q&&$.id===v;$.domElement&&($.domElement.checked=Y),n.setValue($.id,{value:Y})}}};this._dispatchEventFromSandbox(V,j)}),this._setEventListeners(T,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],j=>j.target.checked)}return this._setBackgroundColor(T),this._setDefaultPropertiesFromJS(T),this.container.append(T),this.container}}class A extends e{constructor(n){super(n,{ignoreBorder:n.data.hasAppearance})}render(){let n=super.render();n.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(n.title=this.data.alternativeText);let g=n.lastChild;return this.enableScripting&&this.hasJSActions&&g&&(this._setDefaultPropertiesFromJS(g),g.addEventListener("updatefromsandbox",v=>{this._dispatchEventFromSandbox({},v)})),n}}class I extends f{constructor(n){super(n,{isRenderable:n.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");let n=this.annotationStorage,g=this.data.id,v=n.getValue(g,{value:this.data.fieldValue}),w=document.createElement("select");t.add(w),w.setAttribute("data-element-id",g),w.disabled=this.data.readOnly,this._setRequired(w,this.data.required),w.name=this.data.fieldName,w.tabIndex=h;let T=this.data.combo&&this.data.options.length>0;this.data.combo||(w.size=this.data.options.length,this.data.multiSelect&&(w.multiple=!0)),w.addEventListener("resetform",q=>{let $=this.data.defaultFieldValue;for(let Y of w.options)Y.selected=Y.value===$});for(let q of this.data.options){let $=document.createElement("option");$.textContent=q.displayValue,$.value=q.exportValue,v.value.includes(q.exportValue)&&($.setAttribute("selected",!0),T=!1),w.append($)}let L=null;if(T){let q=document.createElement("option");q.value=" ",q.setAttribute("hidden",!0),q.setAttribute("selected",!0),w.prepend(q),L=()=>{q.remove(),w.removeEventListener("input",L),L=null},w.addEventListener("input",L)}let j=q=>{let $=q?"value":"textContent",{options:Y,multiple:K}=w;return K?Array.prototype.filter.call(Y,tt=>tt.selected).map(tt=>tt[$]):Y.selectedIndex===-1?null:Y[Y.selectedIndex][$]},V=j(!1),st=q=>{let $=q.target.options;return Array.prototype.map.call($,Y=>({displayValue:Y.textContent,exportValue:Y.value}))};return this.enableScripting&&this.hasJSActions?(w.addEventListener("updatefromsandbox",q=>{let $={value(Y){L?.();let K=Y.detail.value,tt=new Set(Array.isArray(K)?K:[K]);for(let rt of w.options)rt.selected=tt.has(rt.value);n.setValue(g,{value:j(!0)}),V=j(!1)},multipleSelection(Y){w.multiple=!0},remove(Y){let K=w.options,tt=Y.detail.remove;K[tt].selected=!1,w.remove(tt),K.length>0&&Array.prototype.findIndex.call(K,ot=>ot.selected)===-1&&(K[0].selected=!0),n.setValue(g,{value:j(!0),items:st(Y)}),V=j(!1)},clear(Y){for(;w.length!==0;)w.remove(0);n.setValue(g,{value:null,items:[]}),V=j(!1)},insert(Y){let{index:K,displayValue:tt,exportValue:rt}=Y.detail.insert,ot=w.children[K],lt=document.createElement("option");lt.textContent=tt,lt.value=rt,ot?ot.before(lt):w.append(lt),n.setValue(g,{value:j(!0),items:st(Y)}),V=j(!1)},items(Y){let{items:K}=Y.detail;for(;w.length!==0;)w.remove(0);for(let tt of K){let{displayValue:rt,exportValue:ot}=tt,lt=document.createElement("option");lt.textContent=rt,lt.value=ot,w.append(lt)}w.options.length>0&&(w.options[0].selected=!0),n.setValue(g,{value:j(!0),items:st(Y)}),V=j(!1)},indices(Y){let K=new Set(Y.detail.indices);for(let tt of Y.target.options)tt.selected=K.has(tt.index);n.setValue(g,{value:j(!0)}),V=j(!1)},editable(Y){Y.target.disabled=!Y.detail.editable}};this._dispatchEventFromSandbox($,q)}),w.addEventListener("input",q=>{let $=j(!0);n.setValue(g,{value:$}),q.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:g,name:"Keystroke",value:V,changeEx:$,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(w,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],q=>q.target.value)):w.addEventListener("input",function(q){n.setValue(g,{value:j(!0)})}),this.data.combo&&this._setTextStyle(w),this._setBackgroundColor(w),this._setDefaultPropertiesFromJS(w),this.container.append(w),this.container}}class U extends a{constructor(n){let{data:g,elements:v}=n;super(n,{isRenderable:a._hasPopupData(g)}),this.elements=v}render(){this.container.classList.add("popupAnnotation");let n=new R({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),g=[];for(let v of this.elements)v.popup=n,g.push(v.data.id),v.addHighlightArea();return this.container.setAttribute("aria-controls",g.map(v=>`${o.AnnotationPrefix}${v}`).join(",")),this.container}}class R{#t=null;#e=this.#h.bind(this);#i=this.#S.bind(this);#s=this.#E.bind(this);#o=this.#_.bind(this);#a=null;#r=null;#l=null;#c=null;#n=null;#f=null;#d=!1;#u=null;#p=null;#b=null;#m=null;#g=!1;constructor({container:n,color:g,elements:v,titleObj:w,modificationDate:T,contentsObj:L,richText:j,parent:V,rect:st,parentRect:q,open:$}){this.#r=n,this.#m=w,this.#l=L,this.#b=j,this.#n=V,this.#a=g,this.#p=st,this.#f=q,this.#c=v;let Y=y.PDFDateString.toDateObject(T);Y&&(this.#t=V.l10n.get("annotation_date_string",{date:Y.toLocaleDateString(),time:Y.toLocaleTimeString()})),this.trigger=v.flatMap(K=>K.getElementsToTriggerPopup());for(let K of this.trigger)K.addEventListener("click",this.#o),K.addEventListener("mouseenter",this.#s),K.addEventListener("mouseleave",this.#i),K.classList.add("popupTriggerArea");for(let K of v)K.container?.addEventListener("keydown",this.#e);this.#r.hidden=!0,$&&this.#_()}render(){if(this.#u)return;let{page:{view:n},viewport:{rawDims:{pageWidth:g,pageHeight:v,pageX:w,pageY:T}}}=this.#n,L=this.#u=document.createElement("div");if(L.className="popup",this.#a){let ht=L.style.outlineColor=o.Util.makeHexColor(...this.#a);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?L.style.backgroundColor=`color-mix(in srgb, ${ht} 30%, white)`:L.style.backgroundColor=o.Util.makeHexColor(...this.#a.map(yt=>Math.floor(.7*(255-yt)+yt)))}let j=document.createElement("span");j.className="header";let V=document.createElement("h1");if(j.append(V),{dir:V.dir,str:V.textContent}=this.#m,L.append(j),this.#t){let ht=document.createElement("span");ht.classList.add("popupDate"),this.#t.then(ft=>{ht.textContent=ft}),j.append(ht)}let st=this.#l,q=this.#b;if(q?.str&&(!st?.str||st.str===q.str))N.XfaLayer.render({xfaHtml:q.html,intent:"richText",div:L}),L.lastChild.classList.add("richText","popupContent");else{let ht=this._formatContents(st);L.append(ht)}let $=!!this.#f,Y=$?this.#f:this.#p;for(let ht of this.#c)if(!Y||o.Util.intersect(ht.data.rect,Y)!==null){Y=ht.data.rect,$=!0;break}let K=o.Util.normalizeRect([Y[0],n[3]-Y[1]+n[1],Y[2],n[3]-Y[3]+n[1]]),rt=$?Y[2]-Y[0]+5:0,ot=K[0]+rt,lt=K[1],{style:ct}=this.#r;ct.left=`${100*(ot-w)/g}%`,ct.top=`${100*(lt-T)/v}%`,this.#r.append(L)}_formatContents({str:n,dir:g}){let v=document.createElement("p");v.classList.add("popupContent"),v.dir=g;let w=n.split(/(?:\r\n?|\n)/);for(let T=0,L=w.length;T<L;++T){let j=w[T];v.append(document.createTextNode(j)),T<L-1&&v.append(document.createElement("br"))}return v}#h(n){n.altKey||n.shiftKey||n.ctrlKey||n.metaKey||(n.key==="Enter"||n.key==="Escape"&&this.#d)&&this.#_()}#_(){this.#d=!this.#d,this.#d?(this.#E(),this.#r.addEventListener("click",this.#o),this.#r.addEventListener("keydown",this.#e)):(this.#S(),this.#r.removeEventListener("click",this.#o),this.#r.removeEventListener("keydown",this.#e))}#E(){this.#u||this.render(),this.isVisible?this.#d&&this.#r.classList.add("focused"):(this.#r.hidden=!1,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)+1e3)}#S(){this.#r.classList.remove("focused"),!(this.#d||!this.isVisible)&&(this.#r.hidden=!0,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)-1e3)}forceHide(){this.#g=this.isVisible,this.#g&&(this.#r.hidden=!0)}maybeShow(){this.#g&&(this.#g=!1,this.#r.hidden=!1)}get isVisible(){return this.#r.hidden===!1}}class G extends a{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0}),this.textContent=n.data.textContent,this.textPosition=n.data.textPosition,this.annotationEditorType=o.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){let n=document.createElement("div");n.classList.add("annotationTextContent"),n.setAttribute("role","comment");for(let g of this.textContent){let v=document.createElement("span");v.textContent=g,n.append(v)}this.container.append(n)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}r.FreeTextAnnotationElement=G;class X extends a{#t=null;constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");let n=this.data,{width:g,height:v}=i(n.rect),w=this.svgFactory.create(g,v,!0),T=this.#t=this.svgFactory.createElement("svg:line");return T.setAttribute("x1",n.rect[2]-n.lineCoordinates[0]),T.setAttribute("y1",n.rect[3]-n.lineCoordinates[1]),T.setAttribute("x2",n.rect[2]-n.lineCoordinates[2]),T.setAttribute("y2",n.rect[3]-n.lineCoordinates[3]),T.setAttribute("stroke-width",n.borderStyle.width||1),T.setAttribute("stroke","transparent"),T.setAttribute("fill","transparent"),w.append(T),this.container.append(w),!n.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class it extends a{#t=null;constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");let n=this.data,{width:g,height:v}=i(n.rect),w=this.svgFactory.create(g,v,!0),T=n.borderStyle.width,L=this.#t=this.svgFactory.createElement("svg:rect");return L.setAttribute("x",T/2),L.setAttribute("y",T/2),L.setAttribute("width",g-T),L.setAttribute("height",v-T),L.setAttribute("stroke-width",T||1),L.setAttribute("stroke","transparent"),L.setAttribute("fill","transparent"),w.append(L),this.container.append(w),!n.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Z extends a{#t=null;constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");let n=this.data,{width:g,height:v}=i(n.rect),w=this.svgFactory.create(g,v,!0),T=n.borderStyle.width,L=this.#t=this.svgFactory.createElement("svg:ellipse");return L.setAttribute("cx",g/2),L.setAttribute("cy",v/2),L.setAttribute("rx",g/2-T/2),L.setAttribute("ry",v/2-T/2),L.setAttribute("stroke-width",T||1),L.setAttribute("stroke","transparent"),L.setAttribute("fill","transparent"),w.append(L),this.container.append(w),!n.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Q extends a{#t=null;constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);let n=this.data,{width:g,height:v}=i(n.rect),w=this.svgFactory.create(g,v,!0),T=[];for(let j of n.vertices){let V=j.x-n.rect[0],st=n.rect[3]-j.y;T.push(V+","+st)}T=T.join(" ");let L=this.#t=this.svgFactory.createElement(this.svgElementName);return L.setAttribute("points",T),L.setAttribute("stroke-width",n.borderStyle.width||1),L.setAttribute("stroke","transparent"),L.setAttribute("fill","transparent"),w.append(L),this.container.append(w),!n.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class nt extends Q{constructor(n){super(n),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class J extends a{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class F extends a{#t=[];constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=o.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);let n=this.data,{width:g,height:v}=i(n.rect),w=this.svgFactory.create(g,v,!0);for(let T of n.inkLists){let L=[];for(let V of T){let st=V.x-n.rect[0],q=n.rect[3]-V.y;L.push(`${st},${q}`)}L=L.join(" ");let j=this.svgFactory.createElement(this.svgElementName);this.#t.push(j),j.setAttribute("points",L),j.setAttribute("stroke-width",n.borderStyle.width||1),j.setAttribute("stroke","transparent"),j.setAttribute("fill","transparent"),!n.popupRef&&this.hasPopupData&&this._createPopup(),w.append(j)}return this.container.append(w),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}r.InkAnnotationElement=F;class b extends a{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class c extends a{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class d extends a{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class _ extends a{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class P extends a{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}r.StampAnnotationElement=P;class x extends a{#t=null;constructor(n){super(n,{isRenderable:!0});let{filename:g,content:v}=this.data.file;this.filename=(0,y.getFilenameFromUrl)(g,!0),this.content=v,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:g,content:v})}render(){this.container.classList.add("fileAttachmentAnnotation");let{container:n,data:g}=this,v;g.hasAppearance||g.fillAlpha===0?v=document.createElement("div"):(v=document.createElement("img"),v.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(g.name)?"paperclip":"pushpin"}.svg`,g.fillAlpha&&g.fillAlpha<1&&(v.style=`filter: opacity(${Math.round(g.fillAlpha*100)}%);`)),v.addEventListener("dblclick",this.#e.bind(this)),this.#t=v;let{isMac:w}=o.FeatureTest.platform;return n.addEventListener("keydown",T=>{T.key==="Enter"&&(w?T.metaKey:T.ctrlKey)&&this.#e()}),!g.popupRef&&this.hasPopupData?this._createPopup():v.classList.add("popupTriggerArea"),n.append(v),n}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}class D{#t=null;#e=null;#i=new Map;constructor({div:n,accessibilityManager:g,annotationCanvasMap:v,l10n:w,page:T,viewport:L}){this.div=n,this.#t=g,this.#e=v,this.l10n=w,this.page=T,this.viewport=L,this.zIndex=0,this.l10n||=B.NullL10n}#s(n,g){let v=n.firstChild||n;v.id=`${o.AnnotationPrefix}${g}`,this.div.append(n),this.#t?.moveElementInDOM(this.div,n,v,!1)}render(n){return dt(this,null,function*(){let{annotations:g}=n,v=this.div;(0,y.setLayerDimensions)(v,this.viewport);let w=new Map,T={data:null,layer:v,linkService:n.linkService,downloadManager:n.downloadManager,imageResourcesPath:n.imageResourcesPath||"",renderForms:n.renderForms!==!1,svgFactory:new y.DOMSVGFactory,annotationStorage:n.annotationStorage||new O.AnnotationStorage,enableScripting:n.enableScripting===!0,hasJSActions:n.hasJSActions,fieldObjects:n.fieldObjects,parent:this,elements:null};for(let L of g){if(L.noHTML)continue;let j=L.annotationType===o.AnnotationType.POPUP;if(j){let q=w.get(L.id);if(!q)continue;T.elements=q}else{let{width:q,height:$}=i(L.rect);if(q<=0||$<=0)continue}T.data=L;let V=l.create(T);if(!V.isRenderable)continue;if(!j&&L.popupRef){let q=w.get(L.popupRef);q?q.push(V):w.set(L.popupRef,[V])}V.annotationEditorType>0&&this.#i.set(V.data.id,V);let st=V.render();L.hidden&&(st.style.visibility="hidden"),this.#s(st,L.id)}this.#o(),yield this.l10n.translate(v)})}update({viewport:n}){let g=this.div;this.viewport=n,(0,y.setLayerDimensions)(g,{rotation:n.rotation}),this.#o(),g.hidden=!1}#o(){if(!this.#e)return;let n=this.div;for(let[g,v]of this.#e){let w=n.querySelector(`[data-annotation-id="${g}"]`);if(!w)continue;let{firstChild:T}=w;T?T.nodeName==="CANVAS"?T.replaceWith(v):T.before(v):w.append(v)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#i.values())}getEditableAnnotation(n){return this.#i.get(n)}}r.AnnotationLayer=D},(H,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ColorConverters=void 0;function k(O){return Math.floor(Math.max(0,Math.min(1,O))*255).toString(16).padStart(2,"0")}function o(O){return Math.max(0,Math.min(255,255*O))}class y{static CMYK_G([M,B,N,h]){return["G",1-Math.min(1,.3*M+.59*N+.11*B+h)]}static G_CMYK([M]){return["CMYK",0,0,0,1-M]}static G_RGB([M]){return["RGB",M,M,M]}static G_rgb([M]){return M=o(M),[M,M,M]}static G_HTML([M]){let B=k(M);return`#${B}${B}${B}`}static RGB_G([M,B,N]){return["G",.3*M+.59*B+.11*N]}static RGB_rgb(M){return M.map(o)}static RGB_HTML(M){return`#${M.map(k).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([M,B,N,h]){return["RGB",1-Math.min(1,M+h),1-Math.min(1,N+h),1-Math.min(1,B+h)]}static CMYK_rgb([M,B,N,h]){return[o(1-Math.min(1,M+h)),o(1-Math.min(1,N+h)),o(1-Math.min(1,B+h))]}static CMYK_HTML(M){let B=this.CMYK_RGB(M).slice(1);return this.RGB_HTML(B)}static RGB_CMYK([M,B,N]){let h=1-M,s=1-B,t=1-N,i=Math.min(h,s,t);return["CMYK",h,s,t,i]}}r.ColorConverters=y},(H,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.NullL10n=void 0,r.getL10nFallback=o;let k={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} \xD7 {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} \xD7 {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing\u2026",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};k.print_progress_percent="{{progress}}%";function o(B,N){switch(B){case"find_match_count":B=`find_match_count[${N.total===1?"one":"other"}]`;break;case"find_match_count_limit":B=`find_match_count_limit[${N.limit===1?"one":"other"}]`;break}return k[B]||""}function y(B,N){return N?B.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(h,s)=>s in N?N[s]:"{{"+s+"}}"):B}let O={getLanguage(){return dt(this,null,function*(){return"en-us"})},getDirection(){return dt(this,null,function*(){return"ltr"})},get(s){return dt(this,arguments,function*(B,N=null,h=o(B,N)){return y(h,N)})},translate(B){return dt(this,null,function*(){})}};r.NullL10n=O},(H,r,k)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.XfaLayer=void 0;var o=k(25);class y{static setupStorage(M,B,N,h,s){let t=h.getValue(B,{value:null});switch(N.name){case"textarea":if(t.value!==null&&(M.textContent=t.value),s==="print")break;M.addEventListener("input",i=>{h.setValue(B,{value:i.target.value})});break;case"input":if(N.attributes.type==="radio"||N.attributes.type==="checkbox"){if(t.value===N.attributes.xfaOn?M.setAttribute("checked",!0):t.value===N.attributes.xfaOff&&M.removeAttribute("checked"),s==="print")break;M.addEventListener("change",i=>{h.setValue(B,{value:i.target.checked?i.target.getAttribute("xfaOn"):i.target.getAttribute("xfaOff")})})}else{if(t.value!==null&&M.setAttribute("value",t.value),s==="print")break;M.addEventListener("input",i=>{h.setValue(B,{value:i.target.value})})}break;case"select":if(t.value!==null){M.setAttribute("value",t.value);for(let i of N.children)i.attributes.value===t.value?i.attributes.selected=!0:i.attributes.hasOwnProperty("selected")&&delete i.attributes.selected}M.addEventListener("input",i=>{let l=i.target.options,a=l.selectedIndex===-1?"":l[l.selectedIndex].value;h.setValue(B,{value:a})});break}}static setAttributes({html:M,element:B,storage:N=null,intent:h,linkService:s}){let{attributes:t}=B,i=M instanceof HTMLAnchorElement;t.type==="radio"&&(t.name=`${t.name}-${h}`);for(let[l,a]of Object.entries(t))if(a!=null)switch(l){case"class":a.length&&M.setAttribute(l,a.join(" "));break;case"dataId":break;case"id":M.setAttribute("data-element-id",a);break;case"style":Object.assign(M.style,a);break;case"textContent":M.textContent=a;break;default:(!i||l!=="href"&&l!=="newWindow")&&M.setAttribute(l,a)}i&&s.addLinkAttributes(M,t.href,t.newWindow),N&&t.dataId&&this.setupStorage(M,t.dataId,B,N)}static render(M){let B=M.annotationStorage,N=M.linkService,h=M.xfaHtml,s=M.intent||"display",t=document.createElement(h.name);h.attributes&&this.setAttributes({html:t,element:h,intent:s,linkService:N});let i=[[h,-1,t]],l=M.div;if(l.append(t),M.viewport){let e=`matrix(${M.viewport.transform.join(",")})`;l.style.transform=e}s!=="richText"&&l.setAttribute("class","xfaLayer xfaFont");let a=[];for(;i.length>0;){let[e,u,f]=i.at(-1);if(u+1===e.children.length){i.pop();continue}let m=e.children[++i.at(-1)[1]];if(m===null)continue;let{name:C}=m;if(C==="#text"){let p=document.createTextNode(m.value);a.push(p),f.append(p);continue}let S=m?.attributes?.xmlns?document.createElementNS(m.attributes.xmlns,C):document.createElement(C);if(f.append(S),m.attributes&&this.setAttributes({html:S,element:m,storage:B,intent:s,linkService:N}),m.children&&m.children.length>0)i.push([m,-1,S]);else if(m.value){let p=document.createTextNode(m.value);o.XfaText.shouldBuildText(C)&&a.push(p),S.append(p)}}for(let e of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))e.setAttribute("readOnly",!0);return{textDivs:a}}static update(M){let B=`matrix(${M.viewport.transform.join(",")})`;M.div.style.transform=B,M.div.hidden=!1}}r.XfaLayer=y},(H,r,k)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.InkEditor=void 0;var o=k(1),y=k(4),O=k(29),M=k(6),B=k(5);let N=(()=>{class h extends y.AnnotationEditor{#t=0;#e=0;#i=this.canvasPointermove.bind(this);#s=this.canvasPointerleave.bind(this);#o=this.canvasPointerup.bind(this);#a=this.canvasPointerdown.bind(this);#r=new Path2D;#l=!1;#c=!1;#n=!1;#f=null;#d=0;#u=0;#p=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";constructor(t){super(Ot(Rt({},t),{name:"inkEditor"})),this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t){y.AnnotationEditor.initialize(t,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(t,i){switch(t){case o.AnnotationEditorParamsType.INK_THICKNESS:h._defaultThickness=i;break;case o.AnnotationEditorParamsType.INK_COLOR:h._defaultColor=i;break;case o.AnnotationEditorParamsType.INK_OPACITY:h._defaultOpacity=i/100;break}}updateParams(t,i){switch(t){case o.AnnotationEditorParamsType.INK_THICKNESS:this.#b(i);break;case o.AnnotationEditorParamsType.INK_COLOR:this.#m(i);break;case o.AnnotationEditorParamsType.INK_OPACITY:this.#g(i);break}}static get defaultPropertiesToUpdate(){return[[o.AnnotationEditorParamsType.INK_THICKNESS,h._defaultThickness],[o.AnnotationEditorParamsType.INK_COLOR,h._defaultColor||y.AnnotationEditor._defaultLineColor],[o.AnnotationEditorParamsType.INK_OPACITY,Math.round(h._defaultOpacity*100)]]}get propertiesToUpdate(){return[[o.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||h._defaultThickness],[o.AnnotationEditorParamsType.INK_COLOR,this.color||h._defaultColor||y.AnnotationEditor._defaultLineColor],[o.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??h._defaultOpacity))]]}#b(t){let i=this.thickness;this.addCommands({cmd:()=>{this.thickness=t,this.#C()},undo:()=>{this.thickness=i,this.#C()},mustExec:!0,type:o.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#m(t){let i=this.color;this.addCommands({cmd:()=>{this.color=t,this.#A()},undo:()=>{this.color=i,this.#A()},mustExec:!0,type:o.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#g(t){t/=100;let i=this.opacity;this.addCommands({cmd:()=>{this.opacity=t,this.#A()},undo:()=>{this.opacity=i,this.#A()},mustExec:!0,type:o.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(this.#k(),this.#M()),this.isAttachedToDOM||(this.parent.add(this),this.#y()),this.#C()))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#f.disconnect(),this.#f=null,super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&t===null&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){let[t,i]=this.parentDimensions,l=this.width*t,a=this.height*i;this.setDimensions(l,a)}enableEditMode(){this.#l||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",this.#a))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",this.#a))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}#h(){let{parentRotation:t,parentDimensions:[i,l]}=this;switch(t){case 90:return[0,l,l,i];case 180:return[i,l,i,l];case 270:return[i,0,l,i];default:return[0,0,i,l]}}#_(){let{ctx:t,color:i,opacity:l,thickness:a,parentScale:e,scaleFactor:u}=this;t.lineWidth=a*e/u,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${i}${(0,B.opacityToHex)(l)}`}#E(t,i){this.canvas.addEventListener("contextmenu",M.noContextMenu),this.canvas.addEventListener("pointerleave",this.#s),this.canvas.addEventListener("pointermove",this.#i),this.canvas.addEventListener("pointerup",this.#o),this.canvas.removeEventListener("pointerdown",this.#a),this.isEditing=!0,this.#n||(this.#n=!0,this.#y(),this.thickness||=h._defaultThickness,this.color||=h._defaultColor||y.AnnotationEditor._defaultLineColor,this.opacity??=h._defaultOpacity),this.currentPath.push([t,i]),this.#c=!1,this.#_(),this.#p=()=>{this.#I(),this.#p&&window.requestAnimationFrame(this.#p)},window.requestAnimationFrame(this.#p)}#S(t,i){let[l,a]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===l&&i===a)return;let e=this.currentPath,u=this.#r;if(e.push([t,i]),this.#c=!0,e.length<=2){u.moveTo(...e[0]),u.lineTo(t,i);return}e.length===3&&(this.#r=u=new Path2D,u.moveTo(...e[0])),this.#L(u,...e.at(-3),...e.at(-2),t,i)}#T(){if(this.currentPath.length===0)return;let t=this.currentPath.at(-1);this.#r.lineTo(...t)}#x(t,i){this.#p=null,t=Math.min(Math.max(t,0),this.canvas.width),i=Math.min(Math.max(i,0),this.canvas.height),this.#S(t,i),this.#T();let l;if(this.currentPath.length!==1)l=this.#O();else{let m=[t,i];l=[[m,m.slice(),m.slice(),m]]}let a=this.#r,e=this.currentPath;this.currentPath=[],this.#r=new Path2D;let u=()=>{this.allRawPaths.push(e),this.paths.push(l),this.bezierPath2D.push(a),this.rebuild()},f=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(this.#k(),this.#M()),this.#C())};this.addCommands({cmd:u,undo:f,mustExec:!0})}#I(){if(!this.#c)return;this.#c=!1;let t=Math.ceil(this.thickness*this.parentScale),i=this.currentPath.slice(-3),l=i.map(S=>S[0]),a=i.map(S=>S[1]),e=Math.min(...l)-t,u=Math.max(...l)+t,f=Math.min(...a)-t,m=Math.max(...a)+t,{ctx:C}=this;C.save(),C.clearRect(0,0,this.canvas.width,this.canvas.height);for(let S of this.bezierPath2D)C.stroke(S);C.stroke(this.#r),C.restore()}#L(t,i,l,a,e,u,f){let m=(i+a)/2,C=(l+e)/2,S=(a+u)/2,p=(e+f)/2;t.bezierCurveTo(m+2*(a-m)/3,C+2*(e-C)/3,S+2*(a-S)/3,p+2*(e-p)/3,S,p)}#O(){let t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];let i=[],l,[a,e]=t[0];for(l=1;l<t.length-2;l++){let[A,I]=t[l],[U,R]=t[l+1],G=(A+U)/2,X=(I+R)/2,it=[a+2*(A-a)/3,e+2*(I-e)/3],Z=[G+2*(A-G)/3,X+2*(I-X)/3];i.push([[a,e],it,Z,[G,X]]),[a,e]=[G,X]}let[u,f]=t[l],[m,C]=t[l+1],S=[a+2*(u-a)/3,e+2*(f-e)/3],p=[m+2*(u-m)/3,C+2*(f-C)/3];return i.push([[a,e],S,p,[m,C]]),i}#A(){if(this.isEmpty()){this.#w();return}this.#_();let{canvas:t,ctx:i}=this;i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,t.width,t.height),this.#w();for(let l of this.bezierPath2D)i.stroke(l)}commit(){this.#l||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#l=!0,this.div.classList.add("disabled"),this.#C(!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}canvasPointerdown(t){t.button!==0||!this.isInEditMode()||this.#l||(this.setInForeground(),t.preventDefault(),t.type!=="mouse"&&this.div.focus(),this.#E(t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),this.#S(t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),this.#D(t)}canvasPointerleave(t){this.#D(t)}#D(t){this.canvas.removeEventListener("pointerleave",this.#s),this.canvas.removeEventListener("pointermove",this.#i),this.canvas.removeEventListener("pointerup",this.#o),this.canvas.addEventListener("pointerdown",this.#a),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",M.noContextMenu)},10),this.#x(t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#k(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",y.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(t=>this.canvas?.setAttribute("aria-label",t)),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#M(){this.#f=new ResizeObserver(t=>{let i=t[0].contentRect;i.width&&i.height&&this.setDimensions(i.width,i.height)}),this.#f.observe(this.div)}get isResizable(){return!this.isEmpty()&&this.#l}render(){if(this.div)return this.div;let t,i;this.width&&(t=this.x,i=this.y),super.render(),y.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(f=>this.div?.setAttribute("aria-label",f));let[l,a,e,u]=this.#h();if(this.setAt(l,a,0,0),this.setDims(e,u),this.#k(),this.width){let[f,m]=this.parentDimensions;this.setAspectRatio(this.width*f,this.height*m),this.setAt(t*f,i*m,this.width*f,this.height*m),this.#n=!0,this.#y(),this.setDims(this.width*f,this.height*m),this.#A(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#M(),this.div}#y(){if(!this.#n)return;let[t,i]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*i),this.#w()}setDimensions(t,i){let l=Math.round(t),a=Math.round(i);if(this.#d===l&&this.#u===a)return;this.#d=l,this.#u=a,this.canvas.style.visibility="hidden";let[e,u]=this.parentDimensions;this.width=t/e,this.height=i/u,this.fixAndSetPosition(),this.#l&&this.#P(t,i),this.#y(),this.#A(),this.canvas.style.visibility="visible",this.fixDims()}#P(t,i){let l=this.#R(),a=(t-l)/this.#e,e=(i-l)/this.#t;this.scaleFactor=Math.min(a,e)}#w(){let t=this.#R()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)}static#N(t){let i=new Path2D;for(let l=0,a=t.length;l<a;l++){let[e,u,f,m]=t[l];l===0&&i.moveTo(...e),i.bezierCurveTo(u[0],u[1],f[0],f[1],m[0],m[1])}return i}static#B(t,i,l){let[a,e,u,f]=i;switch(l){case 0:for(let m=0,C=t.length;m<C;m+=2)t[m]+=a,t[m+1]=f-t[m+1];break;case 90:for(let m=0,C=t.length;m<C;m+=2){let S=t[m];t[m]=t[m+1]+a,t[m+1]=S+e}break;case 180:for(let m=0,C=t.length;m<C;m+=2)t[m]=u-t[m],t[m+1]+=e;break;case 270:for(let m=0,C=t.length;m<C;m+=2){let S=t[m];t[m]=u-t[m+1],t[m+1]=f-S}break;default:throw new Error("Invalid rotation")}return t}static#U(t,i,l){let[a,e,u,f]=i;switch(l){case 0:for(let m=0,C=t.length;m<C;m+=2)t[m]-=a,t[m+1]=f-t[m+1];break;case 90:for(let m=0,C=t.length;m<C;m+=2){let S=t[m];t[m]=t[m+1]-e,t[m+1]=S-a}break;case 180:for(let m=0,C=t.length;m<C;m+=2)t[m]=u-t[m],t[m+1]-=e;break;case 270:for(let m=0,C=t.length;m<C;m+=2){let S=t[m];t[m]=f-t[m+1],t[m+1]=u-S}break;default:throw new Error("Invalid rotation")}return t}#j(t,i,l,a){let e=[],u=this.thickness/2,f=t*i+u,m=t*l+u;for(let C of this.paths){let S=[],p=[];for(let A=0,I=C.length;A<I;A++){let[U,R,G,X]=C[A],it=t*U[0]+f,Z=t*U[1]+m,Q=t*R[0]+f,nt=t*R[1]+m,J=t*G[0]+f,F=t*G[1]+m,b=t*X[0]+f,c=t*X[1]+m;A===0&&(S.push(it,Z),p.push(it,Z)),S.push(Q,nt,J,F,b,c),p.push(Q,nt),A===I-1&&p.push(b,c)}e.push({bezier:h.#B(S,a,this.rotation),points:h.#B(p,a,this.rotation)})}return e}#F(){let t=1/0,i=-1/0,l=1/0,a=-1/0;for(let e of this.paths)for(let[u,f,m,C]of e){let S=o.Util.bezierBoundingBox(...u,...f,...m,...C);t=Math.min(t,S[0]),l=Math.min(l,S[1]),i=Math.max(i,S[2]),a=Math.max(a,S[3])}return[t,l,i,a]}#R(){return this.#l?Math.ceil(this.thickness*this.parentScale):0}#C(t=!1){if(this.isEmpty())return;if(!this.#l){this.#A();return}let i=this.#F(),l=this.#R();this.#e=Math.max(y.AnnotationEditor.MIN_SIZE,i[2]-i[0]),this.#t=Math.max(y.AnnotationEditor.MIN_SIZE,i[3]-i[1]);let a=Math.ceil(l+this.#e*this.scaleFactor),e=Math.ceil(l+this.#t*this.scaleFactor),[u,f]=this.parentDimensions;this.width=a/u,this.height=e/f,this.setAspectRatio(a,e);let m=this.translationX,C=this.translationY;this.translationX=-i[0],this.translationY=-i[1],this.#y(),this.#A(),this.#d=a,this.#u=e,this.setDims(a,e);let S=t?l/this.scaleFactor/2:0;this.translate(m-this.translationX-S,C-this.translationY-S)}static deserialize(t,i,l){if(t instanceof O.InkAnnotationElement)return null;let a=super.deserialize(t,i,l);a.thickness=t.thickness,a.color=o.Util.makeHexColor(...t.color),a.opacity=t.opacity;let[e,u]=a.pageDimensions,f=a.width*e,m=a.height*u,C=a.parentScale,S=t.thickness/2;a.#l=!0,a.#d=Math.round(f),a.#u=Math.round(m);let{paths:p,rect:A,rotation:I}=t;for(let{bezier:R}of p){R=h.#U(R,A,I);let G=[];a.paths.push(G);let X=C*(R[0]-S),it=C*(R[1]-S);for(let Q=2,nt=R.length;Q<nt;Q+=6){let J=C*(R[Q]-S),F=C*(R[Q+1]-S),b=C*(R[Q+2]-S),c=C*(R[Q+3]-S),d=C*(R[Q+4]-S),_=C*(R[Q+5]-S);G.push([[X,it],[J,F],[b,c],[d,_]]),X=d,it=_}let Z=this.#N(G);a.bezierPath2D.push(Z)}let U=a.#F();return a.#e=Math.max(y.AnnotationEditor.MIN_SIZE,U[2]-U[0]),a.#t=Math.max(y.AnnotationEditor.MIN_SIZE,U[3]-U[1]),a.#P(f,m),a}serialize(){if(this.isEmpty())return null;let t=this.getRect(0,0),i=y.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:o.AnnotationEditorType.INK,color:i,thickness:this.thickness,opacity:this.opacity,paths:this.#j(this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}return h})();r.InkEditor=N},(H,r,k)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.StampEditor=void 0;var o=k(1),y=k(4),O=k(6),M=k(29);let B=(()=>{class N extends y.AnnotationEditor{#t=null;#e=null;#i=null;#s=null;#o=null;#a=null;#r=null;#l=null;#c=!1;#n=!1;static _type="stamp";constructor(s){super(Ot(Rt({},s),{name:"stampEditor"})),this.#s=s.bitmapUrl,this.#o=s.bitmapFile}static initialize(s){y.AnnotationEditor.initialize(s)}static get supportedTypes(){let s=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,o.shadow)(this,"supportedTypes",s.map(t=>`image/${t}`))}static get supportedTypesStr(){return(0,o.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(s){return this.supportedTypes.includes(s)}static paste(s,t){t.pasteEditor(o.AnnotationEditorType.STAMP,{bitmapFile:s.getAsFile()})}#f(s,t=!1){if(!s){this.remove();return}this.#t=s.bitmap,t||(this.#e=s.id,this.#c=s.isSvg),this.#p()}#d(){this.#i=null,this._uiManager.enableWaiting(!1),this.#a&&this.div.focus()}#u(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(t=>this.#f(t,!0)).finally(()=>this.#d());return}if(this.#s){let t=this.#s;this.#s=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromUrl(t).then(i=>this.#f(i)).finally(()=>this.#d());return}if(this.#o){let t=this.#o;this.#o=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromFile(t).then(i=>this.#f(i)).finally(()=>this.#d());return}let s=document.createElement("input");s.type="file",s.accept=N.supportedTypesStr,this.#i=new Promise(t=>{s.addEventListener("change",()=>dt(this,null,function*(){if(!s.files||s.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);let i=yield this._uiManager.imageManager.getFromFile(s.files[0]);this.#f(i)}t()})),s.addEventListener("cancel",()=>{this.remove(),t()})}).finally(()=>this.#d()),s.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#a?.remove(),this.#a=null,this.#r?.disconnect(),this.#r=null),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#u();return}super.rebuild(),this.div!==null&&(this.#e&&this.#u(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#i||this.#t||this.#s||this.#o)}get isResizable(){return!0}render(){if(this.div)return this.div;let s,t;if(this.width&&(s=this.x,t=this.y),super.render(),this.div.hidden=!0,this.#t?this.#p():this.#u(),this.width){let[i,l]=this.parentDimensions;this.setAt(s*i,t*l,this.width*i,this.height*l)}return this.div}#p(){let{div:s}=this,{width:t,height:i}=this.#t,[l,a]=this.pageDimensions,e=.75;if(this.width)t=this.width*l,i=this.height*a;else if(t>e*l||i>e*a){let C=Math.min(e*l/t,e*a/i);t*=C,i*=C}let[u,f]=this.parentDimensions;this.setDims(t*u/l,i*f/a),this._uiManager.enableWaiting(!1);let m=this.#a=document.createElement("canvas");s.append(m),s.hidden=!1,this.#g(t,i),this.#_(),this.#n||(this.parent.addUndoableEditor(this),this.#n=!0),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()}#b(s,t){let[i,l]=this.parentDimensions;this.width=s/i,this.height=t/l,this.setDims(s,t),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this.#l!==null&&clearTimeout(this.#l);let a=200;this.#l=setTimeout(()=>{this.#l=null,this.#g(s,t)},a)}#m(s,t){let{width:i,height:l}=this.#t,a=i,e=l,u=this.#t;for(;a>2*s||e>2*t;){let f=a,m=e;a>2*s&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),e>2*t&&(e=e>=16384?Math.floor(e/2)-1:Math.ceil(e/2));let C=new OffscreenCanvas(a,e);C.getContext("2d").drawImage(u,0,0,f,m,0,0,a,e),u=C.transferToImageBitmap()}return u}#g(s,t){s=Math.ceil(s),t=Math.ceil(t);let i=this.#a;if(!i||i.width===s&&i.height===t)return;i.width=s,i.height=t;let l=this.#c?this.#t:this.#m(s,t),a=i.getContext("2d");a.filter=this._uiManager.hcmFilter,a.drawImage(l,0,0,l.width,l.height,0,0,s,t)}#h(s){if(s){if(this.#c){let l=this._uiManager.imageManager.getSvgUrl(this.#e);if(l)return l}let t=document.createElement("canvas");return{width:t.width,height:t.height}=this.#t,t.getContext("2d").drawImage(this.#t,0,0),t.toDataURL()}if(this.#c){let[t,i]=this.pageDimensions,l=Math.round(this.width*t*O.PixelsPerInch.PDF_TO_CSS_UNITS),a=Math.round(this.height*i*O.PixelsPerInch.PDF_TO_CSS_UNITS),e=new OffscreenCanvas(l,a);return e.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,l,a),e.transferToImageBitmap()}return structuredClone(this.#t)}#_(){this.#r=new ResizeObserver(s=>{let t=s[0].contentRect;t.width&&t.height&&this.#b(t.width,t.height)}),this.#r.observe(this.div)}static deserialize(s,t,i){if(s instanceof M.StampAnnotationElement)return null;let l=super.deserialize(s,t,i),{rect:a,bitmapUrl:e,bitmapId:u,isSvg:f,accessibilityData:m}=s;u&&i.imageManager.isValidId(u)?l.#e=u:l.#s=e,l.#c=f;let[C,S]=l.pageDimensions;return l.width=(a[2]-a[0])/C,l.height=(a[3]-a[1])/S,m&&(l.altTextData=m),l}serialize(s=!1,t=null){if(this.isEmpty())return null;let i={annotationType:o.AnnotationEditorType.STAMP,bitmapId:this.#e,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#c,structTreeParentId:this._structTreeParentId};if(s)return i.bitmapUrl=this.#h(!0),i.accessibilityData=this.altTextData,i;let{decorative:l,altText:a}=this.altTextData;if(!l&&a&&(i.accessibilityData={type:"Figure",alt:a}),t===null)return i;t.stamps||=new Map;let e=this.#c?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!t.stamps.has(this.#e))t.stamps.set(this.#e,{area:e,serialized:i}),i.bitmap=this.#h(!1);else if(this.#c){let u=t.stamps.get(this.#e);e>u.area&&(u.area=e,u.serialized.bitmap.close(),u.serialized.bitmap=this.#h(!1))}return i}}return N})();r.StampEditor=B}],__webpack_module_cache__={};function __w_pdfjs_require__(H){var r=__webpack_module_cache__[H];if(r!==void 0)return r.exports;var k=__webpack_module_cache__[H]={exports:{}};return __webpack_modules__[H](k,k.exports,__w_pdfjs_require__),k.exports}var __webpack_exports__={};return(()=>{var H=__webpack_exports__;Object.defineProperty(H,"__esModule",{value:!0}),Object.defineProperty(H,"AbortException",{enumerable:!0,get:function(){return r.AbortException}}),Object.defineProperty(H,"AnnotationEditorLayer",{enumerable:!0,get:function(){return O.AnnotationEditorLayer}}),Object.defineProperty(H,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return r.AnnotationEditorParamsType}}),Object.defineProperty(H,"AnnotationEditorType",{enumerable:!0,get:function(){return r.AnnotationEditorType}}),Object.defineProperty(H,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return M.AnnotationEditorUIManager}}),Object.defineProperty(H,"AnnotationLayer",{enumerable:!0,get:function(){return B.AnnotationLayer}}),Object.defineProperty(H,"AnnotationMode",{enumerable:!0,get:function(){return r.AnnotationMode}}),Object.defineProperty(H,"CMapCompressionType",{enumerable:!0,get:function(){return r.CMapCompressionType}}),Object.defineProperty(H,"DOMSVGFactory",{enumerable:!0,get:function(){return o.DOMSVGFactory}}),Object.defineProperty(H,"FeatureTest",{enumerable:!0,get:function(){return r.FeatureTest}}),Object.defineProperty(H,"GlobalWorkerOptions",{enumerable:!0,get:function(){return N.GlobalWorkerOptions}}),Object.defineProperty(H,"ImageKind",{enumerable:!0,get:function(){return r.ImageKind}}),Object.defineProperty(H,"InvalidPDFException",{enumerable:!0,get:function(){return r.InvalidPDFException}}),Object.defineProperty(H,"MissingPDFException",{enumerable:!0,get:function(){return r.MissingPDFException}}),Object.defineProperty(H,"OPS",{enumerable:!0,get:function(){return r.OPS}}),Object.defineProperty(H,"PDFDataRangeTransport",{enumerable:!0,get:function(){return k.PDFDataRangeTransport}}),Object.defineProperty(H,"PDFDateString",{enumerable:!0,get:function(){return o.PDFDateString}}),Object.defineProperty(H,"PDFWorker",{enumerable:!0,get:function(){return k.PDFWorker}}),Object.defineProperty(H,"PasswordResponses",{enumerable:!0,get:function(){return r.PasswordResponses}}),Object.defineProperty(H,"PermissionFlag",{enumerable:!0,get:function(){return r.PermissionFlag}}),Object.defineProperty(H,"PixelsPerInch",{enumerable:!0,get:function(){return o.PixelsPerInch}}),Object.defineProperty(H,"PromiseCapability",{enumerable:!0,get:function(){return r.PromiseCapability}}),Object.defineProperty(H,"RenderingCancelledException",{enumerable:!0,get:function(){return o.RenderingCancelledException}}),Object.defineProperty(H,"SVGGraphics",{enumerable:!0,get:function(){return k.SVGGraphics}}),Object.defineProperty(H,"UnexpectedResponseException",{enumerable:!0,get:function(){return r.UnexpectedResponseException}}),Object.defineProperty(H,"Util",{enumerable:!0,get:function(){return r.Util}}),Object.defineProperty(H,"VerbosityLevel",{enumerable:!0,get:function(){return r.VerbosityLevel}}),Object.defineProperty(H,"XfaLayer",{enumerable:!0,get:function(){return h.XfaLayer}}),Object.defineProperty(H,"build",{enumerable:!0,get:function(){return k.build}}),Object.defineProperty(H,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return r.createValidAbsoluteUrl}}),Object.defineProperty(H,"getDocument",{enumerable:!0,get:function(){return k.getDocument}}),Object.defineProperty(H,"getFilenameFromUrl",{enumerable:!0,get:function(){return o.getFilenameFromUrl}}),Object.defineProperty(H,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return o.getPdfFilenameFromUrl}}),Object.defineProperty(H,"getXfaPageViewport",{enumerable:!0,get:function(){return o.getXfaPageViewport}}),Object.defineProperty(H,"isDataScheme",{enumerable:!0,get:function(){return o.isDataScheme}}),Object.defineProperty(H,"isPdfFile",{enumerable:!0,get:function(){return o.isPdfFile}}),Object.defineProperty(H,"loadScript",{enumerable:!0,get:function(){return o.loadScript}}),Object.defineProperty(H,"noContextMenu",{enumerable:!0,get:function(){return o.noContextMenu}}),Object.defineProperty(H,"normalizeUnicode",{enumerable:!0,get:function(){return r.normalizeUnicode}}),Object.defineProperty(H,"renderTextLayer",{enumerable:!0,get:function(){return y.renderTextLayer}}),Object.defineProperty(H,"setLayerDimensions",{enumerable:!0,get:function(){return o.setLayerDimensions}}),Object.defineProperty(H,"shadow",{enumerable:!0,get:function(){return r.shadow}}),Object.defineProperty(H,"updateTextLayer",{enumerable:!0,get:function(){return y.updateTextLayer}}),Object.defineProperty(H,"version",{enumerable:!0,get:function(){return k.version}});var r=__w_pdfjs_require__(1),k=__w_pdfjs_require__(2),o=__w_pdfjs_require__(6),y=__w_pdfjs_require__(26),O=__w_pdfjs_require__(27),M=__w_pdfjs_require__(5),B=__w_pdfjs_require__(29),N=__w_pdfjs_require__(14),h=__w_pdfjs_require__(32);let s="3.11.174",t="ce8716743"})(),__webpack_exports__})())});export default Kt();
